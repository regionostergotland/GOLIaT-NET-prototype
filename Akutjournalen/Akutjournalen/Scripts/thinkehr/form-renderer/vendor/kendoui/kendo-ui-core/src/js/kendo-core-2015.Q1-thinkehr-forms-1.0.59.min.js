!function(f,define){define([],f)}(function(){return function($,window,undefined){function Class(){}function compilePart(part,stringPart){if(stringPart)return"'"+part.split("'").join("\\'").split('\\"').join('\\\\\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t")+"'";var first=part.charAt(0),rest=part.substring(1);return"="===first?"+("+rest+")+":":"===first?"+$kendoHtmlEncode("+rest+")+":";"+part+";$kendoOutput+="}function pad(number,digits,end){return number+="",digits=digits||2,end=digits-number.length,end?zeros[digits].substring(0,end)+number:number}function getShadows(element){var shadow=element.css(kendo.support.transitions.css+"box-shadow")||element.css("box-shadow"),radius=shadow?shadow.match(boxShadowRegExp)||[0,0,0,0,0]:[0,0,0,0,0],blur=math.max(+radius[3],+(radius[4]||0));return{left:-radius[1]+blur,right:+radius[1]+blur,bottom:+radius[2]+blur}}function wrap(element,autosize){var percentage,browser=support.browser,isRtl="rtl"==element.css("direction");if(element.parent().hasClass("k-animation-container")){var wrapper=element.parent(".k-animation-container"),wrapperStyle=wrapper[0].style;wrapper.is(":hidden")&&wrapper.show(),percentage=percentRegExp.test(wrapperStyle.width)||percentRegExp.test(wrapperStyle.height),percentage||wrapper.css({width:element.outerWidth(),height:element.outerHeight(),boxSizing:"content-box",mozBoxSizing:"content-box",webkitBoxSizing:"content-box"})}else{var shadows=getShadows(element),width=element[0].style.width,height=element[0].style.height,percentWidth=percentRegExp.test(width),percentHeight=percentRegExp.test(height);browser.opera&&(shadows.left=shadows.right=shadows.bottom=5),percentage=percentWidth||percentHeight,!percentWidth&&(!autosize||autosize&&width)&&(width=element.outerWidth()),!percentHeight&&(!autosize||autosize&&height)&&(height=element.outerHeight()),element.wrap($("<div/>").addClass("k-animation-container").css({width:width,height:height,marginLeft:shadows.left*(isRtl?1:-1),paddingLeft:shadows.left,paddingRight:shadows.right,paddingBottom:shadows.bottom})),percentage&&element.css({width:"100%",height:"100%",boxSizing:"border-box",mozBoxSizing:"border-box",webkitBoxSizing:"border-box"})}return browser.msie&&math.floor(browser.version)<=7&&(element.css({zoom:1}),element.children(".k-menu").width(element.width())),element.parent()}function deepExtend(destination){var i=1,length=arguments.length;for(i=1;length>i;i++)deepExtendOne(destination,arguments[i]);return destination}function deepExtendOne(destination,source){var property,propValue,propType,propInit,destProp,ObservableArray=kendo.data.ObservableArray,LazyObservableArray=kendo.data.LazyObservableArray,DataSource=kendo.data.DataSource,HierarchicalDataSource=kendo.data.HierarchicalDataSource;for(property in source)propValue=source[property],propType=typeof propValue,propInit=propType===OBJECT&&null!==propValue?propValue.constructor:null,propInit&&propInit!==Array&&propInit!==ObservableArray&&propInit!==LazyObservableArray&&propInit!==DataSource&&propInit!==HierarchicalDataSource?propValue instanceof Date?destination[property]=new Date(propValue.getTime()):isFunction(propValue.clone)?destination[property]=propValue.clone():(destProp=destination[property],typeof destProp===OBJECT?destination[property]=destProp||{}:destination[property]={},deepExtendOne(destination[property],propValue)):propType!==UNDEFINED&&(destination[property]=propValue);return destination}function testRx(agent,rxs,dflt){for(var rx in rxs)if(rxs.hasOwnProperty(rx)&&rxs[rx].test(agent))return rx;return dflt!==undefined?dflt:agent}function toHyphens(str){return str.replace(/([a-z][A-Z])/g,function(g){return g.charAt(0)+"-"+g.charAt(1).toLowerCase()})}function toCamelCase(str){return str.replace(/\-(\w)/g,function(strMatch,g1){return g1.toUpperCase()})}function getComputedStyles(element,properties){var computedStyle,styles={};return document.defaultView&&document.defaultView.getComputedStyle?(computedStyle=document.defaultView.getComputedStyle(element,""),properties&&$.each(properties,function(idx,value){styles[value]=computedStyle.getPropertyValue(value)})):(computedStyle=element.currentStyle,properties&&$.each(properties,function(idx,value){styles[value]=computedStyle[toCamelCase(value)]})),kendo.size(styles)||(styles=computedStyle),styles}function size(obj){var key,result=0;for(key in obj)obj.hasOwnProperty(key)&&"toJSON"!=key&&result++;return result}function getOffset(element,type,positioned){type||(type="offset");var result=element[type]();support.mobileOS;return support.browser.msie&&(support.pointers||support.msPointers)&&!positioned&&(result.top-=window.pageYOffset-document.documentElement.scrollTop,result.left-=window.pageXOffset-document.documentElement.scrollLeft),result}function parseEffects(input){var effects={};return each("string"==typeof input?input.split(" "):input,function(idx){effects[idx]=this}),effects}function fx(element){return new kendo.effects.Element(element)}function prepareAnimationOptions(options,duration,reverse,complete){return typeof options===STRING&&(isFunction(duration)&&(complete=duration,duration=400,reverse=!1),isFunction(reverse)&&(complete=reverse,reverse=!1),typeof duration===BOOLEAN&&(reverse=duration,duration=400),options={effects:options,duration:duration,reverse:reverse,complete:complete}),extend({effects:{},duration:400,reverse:!1,init:noop,teardown:noop,hide:!1},options,{completeCallback:options.complete,complete:noop})}function animate(element,options,duration,reverse,complete){for(var instance,idx=0,length=element.length;length>idx;idx++)instance=$(element[idx]),instance.queue(function(){effects.promise(instance,prepareAnimationOptions(options,duration,reverse,complete))});return element}function toggleClass(element,classes,options,add){return classes&&(classes=classes.split(" "),each(classes,function(idx,value){element.toggleClass(value,add)})),element}function htmlEncode(value){return(""+value).replace(ampRegExp,"&amp;").replace(ltRegExp,"&lt;").replace(gtRegExp,"&gt;").replace(quoteRegExp,"&quot;").replace(aposRegExp,"&#39;")}function parseOption(element,option){var value;return 0===option.indexOf("data")&&(option=option.substring(4),option=option.charAt(0).toLowerCase()+option.substring(1)),option=option.replace(dashRegExp,"-$1"),value=element.getAttribute("data-"+kendo.ns+option),null===value?value=undefined:"null"===value?value=null:"true"===value?value=!0:"false"===value?value=!1:numberRegExp.test(value)?value=parseFloat(value):jsonRegExp.test(value)&&!jsonFormatRegExp.test(value)&&(value=new Function("return ("+value+")")()),value}function parseOptions(element,options){var option,value,result={};for(option in options)value=parseOption(element,option),value!==undefined&&(templateRegExp.test(option)&&(value=kendo.template($("#"+value).html())),result[option]=value);return result}function containmentComparer(a,b){return $.contains(a,b)?-1:1}function resizableWidget(){var widget=$(this);return $.inArray(widget.attr("data-"+kendo.ns+"role"),["slider","rangeslider"])>-1||widget.is(":visible")}function focusable(element,isTabIndexNotNaN){var nodeName=element.nodeName.toLowerCase();return(/input|select|textarea|button|object/.test(nodeName)?!element.disabled:"a"===nodeName?element.href||isTabIndexNotNaN:isTabIndexNotNaN)&&visible(element)}function visible(element){return!$(element).parents().addBack().filter(function(){return"hidden"===$.css(this,"visibility")||$.expr.filters.hidden(this)}).length}function kendoJQuery(selector,context){return new kendoJQuery.fn.init(selector,context)}var Template,kendo=window.kendo=window.kendo||{cultures:{}},extend=$.extend,each=$.each,isArray=$.isArray,proxy=$.proxy,noop=$.noop,math=Math,JSON=window.JSON||{},support={},percentRegExp=/%/,formatRegExp=/\{(\d+)(:[^\}]+)?\}/g,boxShadowRegExp=/(\d+(?:\.?)\d*)px\s*(\d+(?:\.?)\d*)px\s*(\d+(?:\.?)\d*)px\s*(\d+)?/i,numberRegExp=/^(\+|-?)\d+(\.?)\d*$/,FUNCTION="function",STRING="string",NUMBER="number",OBJECT="object",NULL="null",BOOLEAN="boolean",UNDEFINED="undefined",getterCache={},setterCache={},slice=[].slice,globalize=window.Globalize;kendo.version="$KENDO_VERSION",Class.extend=function(proto){var member,fn,base=function(){},that=this,subclass=proto&&proto.init?proto.init:function(){that.apply(this,arguments)};base.prototype=that.prototype,fn=subclass.fn=subclass.prototype=new base;for(member in proto)null!=proto[member]&&proto[member].constructor===Object?fn[member]=extend(!0,{},base.prototype[member],proto[member]):fn[member]=proto[member];return fn.constructor=subclass,subclass.extend=that.extend,subclass},Class.prototype._initOptions=function(options){this.options=deepExtend({},this.options,options)};var isFunction=kendo.isFunction=function(fn){return"function"==typeof fn},preventDefault=function(){this._defaultPrevented=!0},isDefaultPrevented=function(){return this._defaultPrevented===!0},Observable=Class.extend({init:function(){this._events={}},bind:function(eventName,handlers,one){var idx,length,original,handler,events,that=this,eventNames=typeof eventName===STRING?[eventName]:eventName,handlersIsFunction=typeof handlers===FUNCTION;if(handlers===undefined){for(idx in eventName)that.bind(idx,eventName[idx]);return that}for(idx=0,length=eventNames.length;length>idx;idx++)eventName=eventNames[idx],handler=handlersIsFunction?handlers:handlers[eventName],handler&&(one&&(original=handler,handler=function(){that.unbind(eventName,handler),original.apply(that,arguments)},handler.original=original),events=that._events[eventName]=that._events[eventName]||[],events.push(handler));return that},one:function(eventNames,handlers){return this.bind(eventNames,handlers,!0)},first:function(eventName,handlers){var idx,length,handler,events,that=this,eventNames=typeof eventName===STRING?[eventName]:eventName,handlersIsFunction=typeof handlers===FUNCTION;for(idx=0,length=eventNames.length;length>idx;idx++)eventName=eventNames[idx],handler=handlersIsFunction?handlers:handlers[eventName],handler&&(events=that._events[eventName]=that._events[eventName]||[],events.unshift(handler));return that},trigger:function(eventName,e){var idx,length,that=this,events=that._events[eventName];if(events){for(e=e||{},e.sender=that,e._defaultPrevented=!1,e.preventDefault=preventDefault,e.isDefaultPrevented=isDefaultPrevented,events=events.slice(),idx=0,length=events.length;length>idx;idx++)events[idx].call(that,e);return e._defaultPrevented===!0}return!1},unbind:function(eventName,handler){var idx,that=this,events=that._events[eventName];if(eventName===undefined)that._events={};else if(events)if(handler)for(idx=events.length-1;idx>=0;idx--)events[idx]!==handler&&events[idx].original!==handler||events.splice(idx,1);else that._events[eventName]=[];return that}}),argumentNameRegExp=/^\w+/,encodeRegExp=/\$\{([^}]*)\}/g,escapedCurlyRegExp=/\\\}/g,curlyRegExp=/__CURLY__/g,escapedSharpRegExp=/\\#/g,sharpRegExp=/__SHARP__/g,zeros=["","0","00","000","0000"];Template={paramName:"data",useWithBlock:!0,render:function(template,data){var idx,length,html="";for(idx=0,length=data.length;length>idx;idx++)html+=template(data[idx]);return html},compile:function(template,options){var fn,parts,idx,settings=extend({},this,options),paramName=settings.paramName,argumentName=paramName.match(argumentNameRegExp)[0],useWithBlock=settings.useWithBlock,functionBody="var $kendoOutput, $kendoHtmlEncode = kendo.htmlEncode;";if(isFunction(template))return template;for(functionBody+=useWithBlock?"with("+paramName+"){":"",functionBody+="$kendoOutput=",parts=template.replace(escapedCurlyRegExp,"__CURLY__").replace(encodeRegExp,"#=$kendoHtmlEncode($1)#").replace(curlyRegExp,"}").replace(escapedSharpRegExp,"__SHARP__").split("#"),idx=0;idx<parts.length;idx++)functionBody+=compilePart(parts[idx],idx%2===0);functionBody+=useWithBlock?";}":";",functionBody+="return $kendoOutput;",functionBody=functionBody.replace(sharpRegExp,"#");try{return fn=new Function(argumentName,functionBody),fn._slotCount=Math.floor(parts.length/2),fn}catch(e){throw new Error(kendo.format("Invalid template:'{0}' Generated code:'{1}'",template,functionBody))}}},function(){function quote(string){return escapable.lastIndex=0,escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c===STRING?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,partial,type,mind=gap,value=holder[key];if(value&&typeof value===OBJECT&&typeof value.toJSON===FUNCTION&&(value=value.toJSON(key)),typeof rep===FUNCTION&&(value=rep.call(holder,key,value)),type=typeof value,type===STRING)return quote(value);if(type===NUMBER)return isFinite(value)?String(value):NULL;if(type===BOOLEAN||type===NULL)return String(value);if(type===OBJECT){if(!value)return NULL;if(gap+=indent,partial=[],"[object Array]"===toString.apply(value)){for(length=value.length,i=0;length>i;i++)partial[i]=str(i,value)||NULL;return v=0===partial.length?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]",gap=mind,v}if(rep&&typeof rep===OBJECT)for(length=rep.length,i=0;length>i;i++)typeof rep[i]===STRING&&(k=rep[i],v=str(k,value),v&&partial.push(quote(k)+(gap?": ":":")+v));else for(k in value)Object.hasOwnProperty.call(value,k)&&(v=str(k,value),v&&partial.push(quote(k)+(gap?": ":":")+v));return v=0===partial.length?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}",gap=mind,v}}var gap,indent,rep,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},toString={}.toString;typeof Date.prototype.toJSON!==FUNCTION&&(Date.prototype.toJSON=function(){var that=this;return isFinite(that.valueOf())?pad(that.getUTCFullYear(),4)+"-"+pad(that.getUTCMonth()+1)+"-"+pad(that.getUTCDate())+"T"+pad(that.getUTCHours())+":"+pad(that.getUTCMinutes())+":"+pad(that.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}),typeof JSON.stringify!==FUNCTION&&(JSON.stringify=function(value,replacer,space){var i;if(gap="",indent="",typeof space===NUMBER)for(i=0;space>i;i+=1)indent+=" ";else typeof space===STRING&&(indent=space);if(rep=replacer,replacer&&typeof replacer!==FUNCTION&&(typeof replacer!==OBJECT||typeof replacer.length!==NUMBER))throw new Error("JSON.stringify");return str("",{"":value})})}(),function(){function findCulture(culture){if(culture){if(culture.numberFormat)return culture;if(typeof culture===STRING){var cultures=kendo.cultures;return cultures[culture]||cultures[culture.split("-")[0]]||null}return null}return null}function getCulture(culture){return culture&&(culture=findCulture(culture)),culture||kendo.cultures.current}function expandNumberFormat(numberFormat){numberFormat.groupSizes=numberFormat.groupSize,numberFormat.percent.groupSizes=numberFormat.percent.groupSize,numberFormat.currency.groupSizes=numberFormat.currency.groupSize}function formatDate(date,format,culture){culture=getCulture(culture);var calendar=culture.calendars.standard,days=calendar.days,months=calendar.months;return format=calendar.patterns[format]||format,format.replace(dateFormatRegExp,function(match){var minutes,result,sign;return"d"===match?result=date.getDate():"dd"===match?result=pad(date.getDate()):"ddd"===match?result=days.namesAbbr[date.getDay()]:"dddd"===match?result=days.names[date.getDay()]:"M"===match?result=date.getMonth()+1:"MM"===match?result=pad(date.getMonth()+1):"MMM"===match?result=months.namesAbbr[date.getMonth()]:"MMMM"===match?result=months.names[date.getMonth()]:"yy"===match?result=pad(date.getFullYear()%100):"yyyy"===match?result=pad(date.getFullYear(),4):"h"===match?result=date.getHours()%12||12:"hh"===match?result=pad(date.getHours()%12||12):"H"===match?result=date.getHours():"HH"===match?result=pad(date.getHours()):"m"===match?result=date.getMinutes():"mm"===match?result=pad(date.getMinutes()):"s"===match?result=date.getSeconds():"ss"===match?result=pad(date.getSeconds()):"f"===match?result=math.floor(date.getMilliseconds()/100):"ff"===match?(result=date.getMilliseconds(),result>99&&(result=math.floor(result/10)),result=pad(result)):"fff"===match?result=pad(date.getMilliseconds(),3):"tt"===match?result=date.getHours()<12?calendar.AM[0]:calendar.PM[0]:"zzz"===match?(minutes=date.getTimezoneOffset(),sign=0>minutes,result=math.abs(minutes/60).toString().split(".")[0],minutes=math.abs(minutes)-60*result,result=(sign?"+":"-")+pad(result),result+=":"+pad(minutes)):"zz"!==match&&"z"!==match||(result=date.getTimezoneOffset()/60,sign=0>result,result=math.abs(result).toString().split(".")[0],result=(sign?"+":"-")+("zz"===match?pad(result):result)),result!==undefined?result:match.slice(1,match.length-1)})}function formatNumber(number,format,culture){culture=getCulture(culture);var symbol,isCurrency,isPercent,customPrecision,formatAndPrecision,integer,fraction,integerLength,fractionLength,idx,length,ch,hasGroup,hasNegativeFormat,decimalIndex,sharpIndex,zeroIndex,hasZero,hasSharp,percentIndex,currencyIndex,startZeroIndex,end,numberFormat=culture.numberFormat,groupSize=numberFormat.groupSize[0],groupSeparator=numberFormat[COMMA],decimal=numberFormat[POINT],precision=numberFormat.decimals,pattern=numberFormat.pattern[0],literals=[],negative=0>number,replacement=EMPTY,value=EMPTY,start=-1;if(number===undefined)return EMPTY;if(!isFinite(number))return number;if(!format)return culture.name.length?number.toLocaleString():number.toString();if(formatAndPrecision=standardFormatRegExp.exec(format)){if(format=formatAndPrecision[1].toLowerCase(),isCurrency="c"===format,isPercent="p"===format,(isCurrency||isPercent)&&(numberFormat=isCurrency?numberFormat.currency:numberFormat.percent,groupSize=numberFormat.groupSize[0],groupSeparator=numberFormat[COMMA],decimal=numberFormat[POINT],precision=numberFormat.decimals,symbol=numberFormat.symbol,pattern=numberFormat.pattern[negative?0:1]),customPrecision=formatAndPrecision[2],customPrecision&&(precision=+customPrecision),"e"===format)return customPrecision?number.toExponential(precision):number.toExponential();if(isPercent&&(number*=100),number=round(number,precision),negative=0>number,number=number.split(POINT),integer=number[0],fraction=number[1],negative&&(integer=integer.substring(1)),value=integer,integerLength=integer.length,integerLength>=groupSize)for(value=EMPTY,idx=0;integerLength>idx;idx++)idx>0&&(integerLength-idx)%groupSize===0&&(value+=groupSeparator),value+=integer.charAt(idx);if(fraction&&(value+=decimal+fraction),"n"===format&&!negative)return value;for(number=EMPTY,idx=0,length=pattern.length;length>idx;idx++)ch=pattern.charAt(idx),number+="n"===ch?value:"$"===ch||"%"===ch?symbol:ch;return number}if(negative&&(number=-number),(format.indexOf("'")>-1||format.indexOf('"')>-1||format.indexOf("\\")>-1)&&(format=format.replace(literalRegExp,function(match){var quoteChar=match.charAt(0).replace("\\",""),literal=match.slice(1).replace(quoteChar,"");return literals.push(literal),PLACEHOLDER})),format=format.split(";"),negative&&format[1])format=format[1],hasNegativeFormat=!0;else if(0===number){if(format=format[2]||format[0],-1==format.indexOf(SHARP)&&-1==format.indexOf(ZERO))return format}else format=format[0];if(percentIndex=format.indexOf("%"),currencyIndex=format.indexOf("$"),isPercent=-1!=percentIndex,isCurrency=-1!=currencyIndex,isPercent&&(number*=100),isCurrency&&"\\"===format[currencyIndex-1]&&(format=format.split("\\").join(""),isCurrency=!1),(isCurrency||isPercent)&&(numberFormat=isCurrency?numberFormat.currency:numberFormat.percent,groupSize=numberFormat.groupSize[0],groupSeparator=numberFormat[COMMA],decimal=numberFormat[POINT],precision=numberFormat.decimals,symbol=numberFormat.symbol),hasGroup=format.indexOf(COMMA)>-1,hasGroup&&(format=format.replace(commaRegExp,EMPTY)),decimalIndex=format.indexOf(POINT),length=format.length,-1!=decimalIndex?(fraction=number.toString().split("e"),fraction=fraction[1]?round(number,Math.abs(fraction[1])):fraction[0],fraction=fraction.split(POINT)[1]||EMPTY,zeroIndex=format.lastIndexOf(ZERO)-decimalIndex,sharpIndex=format.lastIndexOf(SHARP)-decimalIndex,hasZero=zeroIndex>-1,hasSharp=sharpIndex>-1,idx=fraction.length,hasZero||hasSharp||(format=format.substring(0,decimalIndex)+format.substring(decimalIndex+1),length=format.length,decimalIndex=-1,idx=0),hasZero&&zeroIndex>sharpIndex?idx=zeroIndex:sharpIndex>zeroIndex&&(hasSharp&&idx>sharpIndex?idx=sharpIndex:hasZero&&zeroIndex>idx&&(idx=zeroIndex)),idx>-1&&(number=round(number,idx))):number=round(number),sharpIndex=format.indexOf(SHARP),startZeroIndex=zeroIndex=format.indexOf(ZERO),start=-1==sharpIndex&&-1!=zeroIndex?zeroIndex:-1!=sharpIndex&&-1==zeroIndex?sharpIndex:sharpIndex>zeroIndex?zeroIndex:sharpIndex,sharpIndex=format.lastIndexOf(SHARP),zeroIndex=format.lastIndexOf(ZERO),end=-1==sharpIndex&&-1!=zeroIndex?zeroIndex:-1!=sharpIndex&&-1==zeroIndex?sharpIndex:sharpIndex>zeroIndex?sharpIndex:zeroIndex,start==length&&(end=start),-1!=start){if(value=number.toString().split(POINT),integer=value[0],fraction=value[1]||EMPTY,integerLength=integer.length,fractionLength=fraction.length,negative&&-1*number>=0&&(negative=!1),hasGroup)if(integerLength===groupSize&&decimalIndex-startZeroIndex>integerLength)integer=groupSeparator+integer;else if(integerLength>groupSize){for(value=EMPTY,idx=0;integerLength>idx;idx++)idx>0&&(integerLength-idx)%groupSize===0&&(value+=groupSeparator),value+=integer.charAt(idx);integer=value}for(number=format.substring(0,start),negative&&!hasNegativeFormat&&(number+="-"),idx=start;length>idx;idx++){if(ch=format.charAt(idx),-1==decimalIndex){if(integerLength>end-idx){number+=integer;break}}else if(-1!=zeroIndex&&idx>zeroIndex&&(replacement=EMPTY),integerLength>=decimalIndex-idx&&decimalIndex-idx>-1&&(number+=integer,idx=decimalIndex),decimalIndex===idx){number+=(fraction?decimal:EMPTY)+fraction,idx+=end-decimalIndex+1;continue}ch===ZERO?(number+=ch,replacement=ch):ch===SHARP&&(number+=replacement)}if(end>=start&&(number+=format.substring(end+1)),isCurrency||isPercent){for(value=EMPTY,idx=0,length=number.length;length>idx;idx++)ch=number.charAt(idx),value+="$"===ch||"%"===ch?symbol:ch;number=value}if(length=literals.length)for(idx=0;length>idx;idx++)number=number.replace(PLACEHOLDER,literals[idx])}return number}var dateFormatRegExp=/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|"[^"]*"|'[^']*'/g,standardFormatRegExp=/^(n|c|p|e)(\d*)$/i,literalRegExp=/(\\.)|(['][^']*[']?)|(["][^"]*["]?)/g,commaRegExp=/\,/g,EMPTY="",POINT=".",COMMA=",",SHARP="#",ZERO="0",PLACEHOLDER="??",EN="en-US",objectToString={}.toString;kendo.cultures["en-US"]={name:EN,numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSize:[3],percent:{pattern:["-n %","n %"],decimals:2,",":",",".":".",groupSize:[3],symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,",":",",".":".",groupSize:[3],symbol:"$"}},calendars:{standard:{days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December"],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},AM:["AM","am","AM"],PM:["PM","pm","PM"],patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",F:"dddd, MMMM dd, yyyy h:mm:ss tt",g:"M/d/yyyy h:mm tt",G:"M/d/yyyy h:mm:ss tt",m:"MMMM dd",M:"MMMM dd",s:"yyyy'-'MM'-'ddTHH':'mm':'ss",t:"h:mm tt",T:"h:mm:ss tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",y:"MMMM, yyyy",Y:"MMMM, yyyy"},"/":"/",":":":",firstDay:0,twoDigitYearMax:2029}}},kendo.culture=function(cultureName){var culture,cultures=kendo.cultures;return cultureName===undefined?cultures.current:(culture=findCulture(cultureName)||cultures[EN],culture.calendar=culture.calendars.standard,cultures.current=culture,globalize&&!globalize.load&&expandNumberFormat(culture.numberFormat),void 0)},kendo.findCulture=findCulture,kendo.getCulture=getCulture,kendo.culture(EN);var round=function(value,precision){return precision=precision||0,value=value.toString().split("e"),value=Math.round(+(value[0]+"e"+(value[1]?+value[1]+precision:precision))),value=value.toString().split("e"),value=+(value[0]+"e"+(value[1]?+value[1]-precision:-precision)),value.toFixed(precision)},toString=function(value,fmt,culture){if(fmt){if("[object Date]"===objectToString.call(value))return formatDate(value,fmt,culture);if(typeof value===NUMBER)return formatNumber(value,fmt,culture)}return value!==undefined?value:""};globalize&&!globalize.load&&(toString=function(value,format,culture){return $.isPlainObject(culture)&&(culture=culture.name),globalize.format(value,format,culture)}),kendo.format=function(fmt){var values=arguments;return fmt.replace(formatRegExp,function(match,index,placeholderFormat){var value=values[parseInt(index,10)+1];return toString(value,placeholderFormat?placeholderFormat.substring(1):"")})},kendo._extractFormat=function(format){return"{0:"===format.slice(0,3)&&(format=format.slice(3,format.length-1)),format},kendo._activeElement=function(){try{return document.activeElement}catch(e){return document.documentElement.activeElement}},kendo._round=round,kendo.toString=toString}(),function(){function outOfRange(value,start,end){return!(value>=start&&end>=value)}function designatorPredicate(designator){return designator.charAt(0)}function mapDesignators(designators){return $.map(designators,designatorPredicate)}function adjustDST(date,hours){hours||23!==date.getHours()||date.setHours(date.getHours()+2)}function lowerArray(data){for(var idx=0,length=data.length,array=[];length>idx;idx++)array[idx]=(data[idx]+"").toLowerCase();return array}function lowerLocalInfo(localInfo){var property,newLocalInfo={};for(property in localInfo)newLocalInfo[property]=lowerArray(localInfo[property]);return newLocalInfo}function parseExact(value,format,culture){if(!value)return null;var ch,count,length,pattern,pmHour,UTC,matches,amDesignators,pmDesignators,hoursOffset,minutesOffset,hasTime,match,lookAhead=function(match){for(var i=0;format[idx]===match;)i++,idx++;return i>0&&(idx-=1),i},getNumber=function(size){var rg=numberRegExp[size]||new RegExp("^\\d{1,"+size+"}"),match=value.substr(valueIdx,size).match(rg);return match?(match=match[0],valueIdx+=match.length,parseInt(match,10)):null},getIndexByName=function(names,lower){for(var name,nameLength,subValue,i=0,length=names.length;length>i;i++)if(name=names[i],nameLength=name.length,subValue=value.substr(valueIdx,nameLength),lower&&(subValue=subValue.toLowerCase()),subValue==name)return valueIdx+=nameLength,i+1;return null},checkLiteral=function(){var result=!1;return value.charAt(valueIdx)===format[idx]&&(valueIdx++,result=!0),result},calendar=culture.calendars.standard,year=null,month=null,day=null,hours=null,minutes=null,seconds=null,milliseconds=null,idx=0,valueIdx=0,literal=!1,date=new Date,twoDigitYearMax=calendar.twoDigitYearMax||2029,defaultYear=date.getFullYear();for(format||(format="d"),pattern=calendar.patterns[format],pattern&&(format=pattern),format=format.split(""),length=format.length;length>idx;idx++)if(ch=format[idx],literal)"'"===ch?literal=!1:checkLiteral();else if("d"===ch){if(count=lookAhead("d"),calendar._lowerDays||(calendar._lowerDays=lowerLocalInfo(calendar.days)),null!==day&&count>2)continue;if(day=3>count?getNumber(2):getIndexByName(calendar._lowerDays[3==count?"namesAbbr":"names"],!0),null===day||outOfRange(day,1,31))return null}else if("M"===ch){if(count=lookAhead("M"),calendar._lowerMonths||(calendar._lowerMonths=lowerLocalInfo(calendar.months)),month=3>count?getNumber(2):getIndexByName(calendar._lowerMonths[3==count?"namesAbbr":"names"],!0),null===month||outOfRange(month,1,12))return null;month-=1}else if("y"===ch){if(count=lookAhead("y"),year=getNumber(count),null===year)return null;2==count&&("string"==typeof twoDigitYearMax&&(twoDigitYearMax=defaultYear+parseInt(twoDigitYearMax,10)),year=defaultYear-defaultYear%100+year,year>twoDigitYearMax&&(year-=100))}else if("h"===ch){if(lookAhead("h"),hours=getNumber(2),12==hours&&(hours=0),null===hours||outOfRange(hours,0,11))return null}else if("H"===ch){if(lookAhead("H"),hours=getNumber(2),null===hours||outOfRange(hours,0,23))return null}else if("m"===ch){if(lookAhead("m"),minutes=getNumber(2),null===minutes||outOfRange(minutes,0,59))return null}else if("s"===ch){if(lookAhead("s"),seconds=getNumber(2),null===seconds||outOfRange(seconds,0,59))return null}else if("f"===ch){if(count=lookAhead("f"),match=value.substr(valueIdx,count).match(numberRegExp[3]),milliseconds=getNumber(count),null!==milliseconds&&(match=match[0].length,3>match&&(milliseconds*=Math.pow(10,3-match)),count>3&&(milliseconds=parseInt(milliseconds.toString().substring(0,3),10))),null===milliseconds||outOfRange(milliseconds,0,999))return null}else if("t"===ch){if(count=lookAhead("t"),amDesignators=calendar.AM,pmDesignators=calendar.PM,1===count&&(amDesignators=mapDesignators(amDesignators),pmDesignators=mapDesignators(pmDesignators)),pmHour=getIndexByName(pmDesignators),!pmHour&&!getIndexByName(amDesignators))return null}else if("z"===ch){if(UTC=!0,count=lookAhead("z"),"Z"===value.substr(valueIdx,1)){checkLiteral();continue}if(matches=value.substr(valueIdx,6).match(count>2?longTimeZoneRegExp:shortTimeZoneRegExp),!matches)return null;if(matches=matches[0].split(":"),hoursOffset=matches[0],minutesOffset=matches[1],!minutesOffset&&hoursOffset.length>3&&(valueIdx=hoursOffset.length-2,minutesOffset=hoursOffset.substring(valueIdx),hoursOffset=hoursOffset.substring(0,valueIdx)),hoursOffset=parseInt(hoursOffset,10),outOfRange(hoursOffset,-12,13))return null;if(count>2&&(minutesOffset=parseInt(minutesOffset,10),isNaN(minutesOffset)||outOfRange(minutesOffset,0,59)))return null}else if("'"===ch)literal=!0,checkLiteral();else if(!checkLiteral())return null;return hasTime=null!==hours||null!==minutes||seconds||null,null===year&&null===month&&null===day&&hasTime?(year=defaultYear,month=date.getMonth(),day=date.getDate()):(null===year&&(year=defaultYear),null===day&&(day=1)),pmHour&&12>hours&&(hours+=12),UTC?(hoursOffset&&(hours+=-hoursOffset),minutesOffset&&(minutes+=-minutesOffset),value=new Date(Date.UTC(year,month,day,hours,minutes,seconds,milliseconds))):(value=new Date(year,month,day,hours,minutes,seconds,milliseconds),adjustDST(value,hours)),100>year&&value.setFullYear(year),value.getDate()!==day&&UTC===undefined?null:value}function parseMicrosoftFormatOffset(offset){var sign="-"===offset.substr(0,1)?-1:1;return offset=offset.substring(1),offset=60*parseInt(offset.substr(0,2),10)+parseInt(offset.substring(2),10),sign*offset}var nonBreakingSpaceRegExp=/\u00A0/g,exponentRegExp=/[eE][\-+]?[0-9]+/,shortTimeZoneRegExp=/[+|\-]\d{1,2}/,longTimeZoneRegExp=/[+|\-]\d{1,2}:?\d{2}/,dateRegExp=/^\/Date\((.*?)\)\/$/,offsetRegExp=/[+-]\d*/,formatsSequence=["G","g","d","F","D","y","m","T","t"],numberRegExp={2:/^\d{1,2}/,3:/^\d{1,3}/,4:/^\d{4}/},objectToString={}.toString;kendo.parseDate=function(value,formats,culture){if("[object Date]"===objectToString.call(value))return value;var length,patterns,tzoffset,idx=0,date=null;if(value&&0===value.indexOf("/D")&&(date=dateRegExp.exec(value)))return date=date[1],tzoffset=offsetRegExp.exec(date.substring(1)),date=new Date(parseInt(date,10)),tzoffset&&(tzoffset=parseMicrosoftFormatOffset(tzoffset[0]),date=kendo.timezone.apply(date,0),date=kendo.timezone.convert(date,0,-1*tzoffset)),date;if(culture=kendo.getCulture(culture),!formats){for(formats=[],patterns=culture.calendar.patterns,length=formatsSequence.length;length>idx;idx++)formats[idx]=patterns[formatsSequence[idx]];idx=0,formats=["yyyy/MM/dd HH:mm:ss","yyyy/MM/dd HH:mm","yyyy/MM/dd","ddd MMM dd yyyy HH:mm:ss","yyyy-MM-ddTHH:mm:ss.fffffffzzz","yyyy-MM-ddTHH:mm:ss.fffzzz","yyyy-MM-ddTHH:mm:sszzz","yyyy-MM-ddTHH:mm:ss.fffffff","yyyy-MM-ddTHH:mm:ss.fff","yyyy-MM-ddTHH:mmzzz","yyyy-MM-ddTHH:mmzz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm","yyyy-MM-dd HH:mm:ss","yyyy-MM-dd HH:mm","yyyy-MM-dd","HH:mm:ss","HH:mm"].concat(formats);
}for(formats=isArray(formats)?formats:[formats],length=formats.length;length>idx;idx++)if(date=parseExact(value,formats[idx],culture))return date;return date},kendo.parseInt=function(value,culture){var result=kendo.parseFloat(value,culture);return result&&(result=0|result),result},kendo.parseFloat=function(value,culture,format){if(!value&&0!==value)return null;if(typeof value===NUMBER)return value;value=value.toString(),culture=kendo.getCulture(culture);var parts,isPercent,number=culture.numberFormat,percent=number.percent,currency=number.currency,symbol=currency.symbol,percentSymbol=percent.symbol,negative=value.indexOf("-");return exponentRegExp.test(value)?(value=parseFloat(value.replace(number["."],".")),isNaN(value)&&(value=null),value):negative>0?null:(negative=negative>-1,value.indexOf(symbol)>-1||format&&format.toLowerCase().indexOf("c")>-1?(number=currency,parts=number.pattern[0].replace("$",symbol).split("n"),value.indexOf(parts[0])>-1&&value.indexOf(parts[1])>-1&&(value=value.replace(parts[0],"").replace(parts[1],""),negative=!0)):value.indexOf(percentSymbol)>-1&&(isPercent=!0,number=percent,symbol=percentSymbol),value=value.replace("-","").replace(symbol,"").replace(nonBreakingSpaceRegExp," ").split(number[","].replace(nonBreakingSpaceRegExp," ")).join("").replace(number["."],"."),value=parseFloat(value),isNaN(value)?value=null:negative&&(value*=-1),value&&isPercent&&(value/=100),value)},globalize&&!globalize.load&&(kendo.parseDate=function(value,format,culture){return"[object Date]"===objectToString.call(value)?value:globalize.parseDate(value,format,culture)},kendo.parseFloat=function(value,culture){return typeof value===NUMBER?value:value===undefined||null===value?null:($.isPlainObject(culture)&&(culture=culture.name),value=globalize.parseFloat(value,culture),isNaN(value)?null:value)})}(),function(){support._scrollbar=undefined,support.scrollbar=function(refresh){if(isNaN(support._scrollbar)||refresh){var result,div=document.createElement("div");return div.style.cssText="overflow:scroll;overflow-x:hidden;zoom:1;clear:both;display:block",div.innerHTML="&nbsp;",document.body.appendChild(div),support._scrollbar=result=div.offsetWidth-div.scrollWidth,document.body.removeChild(div),result}return support._scrollbar},support.isRtl=function(element){return $(element).closest(".k-rtl").length>0};var table=document.createElement("table");try{table.innerHTML="<tr><td></td></tr>",support.tbodyInnerHtml=!0}catch(e){support.tbodyInnerHtml=!1}support.touch="ontouchstart"in window,support.msPointers=window.MSPointerEvent,support.pointers=window.PointerEvent;var transitions=support.transitions=!1,transforms=support.transforms=!1,elementProto="HTMLElement"in window?HTMLElement.prototype:[];support.hasHW3D="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix||"MozPerspective"in document.documentElement.style||"msPerspective"in document.documentElement.style,each(["Moz","webkit","O","ms"],function(){var prefix=this.toString(),hasTransitions=typeof table.style[prefix+"Transition"]===STRING;if(hasTransitions||typeof table.style[prefix+"Transform"]===STRING){var lowPrefix=prefix.toLowerCase();return transforms={css:"ms"!=lowPrefix?"-"+lowPrefix+"-":"",prefix:prefix,event:"o"===lowPrefix||"webkit"===lowPrefix?lowPrefix:""},hasTransitions&&(transitions=transforms,transitions.event=transitions.event?transitions.event+"TransitionEnd":"transitionend"),!1}}),table=null,support.transforms=transforms,support.transitions=transitions,support.devicePixelRatio=window.devicePixelRatio===undefined?1:window.devicePixelRatio;try{support.screenWidth=window.outerWidth||window.screen?window.screen.availWidth:window.innerWidth,support.screenHeight=window.outerHeight||window.screen?window.screen.availHeight:window.innerHeight}catch(e){support.screenWidth=window.screen.availWidth,support.screenHeight=window.screen.availHeight}support.detectOS=function(ua){var minorVersion,os=!1,match=[],notAndroidPhone=!/mobile safari/i.test(ua),agentRxs={wp:/(Windows Phone(?: OS)?)\s(\d+)\.(\d+(\.\d+)?)/,fire:/(Silk)\/(\d+)\.(\d+(\.\d+)?)/,android:/(Android|Android.*(?:Opera|Firefox).*?\/)\s*(\d+)\.(\d+(\.\d+)?)/,iphone:/(iPhone|iPod).*OS\s+(\d+)[\._]([\d\._]+)/,ipad:/(iPad).*OS\s+(\d+)[\._]([\d_]+)/,meego:/(MeeGo).+NokiaBrowser\/(\d+)\.([\d\._]+)/,webos:/(webOS)\/(\d+)\.(\d+(\.\d+)?)/,blackberry:/(BlackBerry|BB10).*?Version\/(\d+)\.(\d+(\.\d+)?)/,playbook:/(PlayBook).*?Tablet\s*OS\s*(\d+)\.(\d+(\.\d+)?)/,windows:/(MSIE)\s+(\d+)\.(\d+(\.\d+)?)/,tizen:/(tizen).*?Version\/(\d+)\.(\d+(\.\d+)?)/i,sailfish:/(sailfish).*rv:(\d+)\.(\d+(\.\d+)?).*firefox/i,ffos:/(Mobile).*rv:(\d+)\.(\d+(\.\d+)?).*Firefox/},osRxs={ios:/^i(phone|pad|pod)$/i,android:/^android|fire$/i,blackberry:/^blackberry|playbook/i,windows:/windows/,wp:/wp/,flat:/sailfish|ffos|tizen/i,meego:/meego/},formFactorRxs={tablet:/playbook|ipad|fire/i},browserRxs={omini:/Opera\sMini/i,omobile:/Opera\sMobi/i,firefox:/Firefox|Fennec/i,mobilesafari:/version\/.*safari/i,ie:/MSIE|Windows\sPhone/i,chrome:/chrome|crios/i,webkit:/webkit/i};for(var agent in agentRxs)if(agentRxs.hasOwnProperty(agent)&&(match=ua.match(agentRxs[agent]))){if("windows"==agent&&"plugins"in navigator)return!1;os={},os.device=agent,os.tablet=testRx(agent,formFactorRxs,!1),os.browser=testRx(ua,browserRxs,"default"),os.name=testRx(agent,osRxs),os[os.name]=!0,os.majorVersion=match[2],os.minorVersion=match[3].replace("_","."),minorVersion=os.minorVersion.replace(".","").substr(0,2),os.flatVersion=os.majorVersion+minorVersion+new Array(3-(minorVersion.length<3?minorVersion.length:2)).join("0"),os.cordova=typeof window.PhoneGap!==UNDEFINED||typeof window.cordova!==UNDEFINED,os.appMode=window.navigator.standalone||/file|local|wmapp/.test(window.location.protocol)||os.cordova,os.android&&(support.devicePixelRatio<1.5&&os.flatVersion<400||notAndroidPhone)&&(support.screenWidth>800||support.screenHeight>800)&&(os.tablet=agent);break}return os};var mobileOS=support.mobileOS=support.detectOS(navigator.userAgent);support.wpDevicePixelRatio=mobileOS.wp?screen.width/320:0,support.kineticScrollNeeded=mobileOS&&(support.touch||support.msPointers||support.pointers),support.hasNativeScrolling=!1,(mobileOS.ios||mobileOS.android&&mobileOS.majorVersion>2||mobileOS.wp)&&(support.hasNativeScrolling=mobileOS),support.mouseAndTouchPresent=support.touch&&!(support.mobileOS.ios||support.mobileOS.android),support.detectBrowser=function(ua){var browser=!1,match=[],browserRxs={webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,opera:/(opera)(?:.*version|)[ \/]([\w.]+)/i,msie:/(msie\s|trident.*? rv:)([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(var agent in browserRxs)if(browserRxs.hasOwnProperty(agent)&&(match=ua.match(browserRxs[agent]))){browser={},browser[agent]=!0,browser[match[1].toLowerCase().split(" ")[0].split("/")[0]]=!0,browser.version=parseInt(document.documentMode||match[2],10);break}return browser},support.browser=support.detectBrowser(navigator.userAgent),support.zoomLevel=function(){try{var browser=support.browser,ie11WidthCorrection=0,docEl=document.documentElement;return browser.msie&&11==browser.version&&docEl.scrollHeight>docEl.clientHeight&&!support.touch&&(ie11WidthCorrection=support.scrollbar()),support.touch?docEl.clientWidth/window.innerWidth:browser.msie&&browser.version>=10?((top||window).document.documentElement.offsetWidth+ie11WidthCorrection)/(top||window).innerWidth:1}catch(e){return 1}},support.cssBorderSpacing="undefined"!=typeof document.documentElement.style.borderSpacing&&!(support.browser.msie&&support.browser.version<8),function(browser){var cssClass="",docElement=$(document.documentElement),majorVersion=parseInt(browser.version,10);browser.msie?cssClass="ie":browser.mozilla?cssClass="ff":browser.safari?cssClass="safari":browser.webkit?cssClass="webkit":browser.opera&&(cssClass="opera"),cssClass&&(cssClass="k-"+cssClass+" k-"+cssClass+majorVersion),support.mobileOS&&(cssClass+=" k-mobile"),docElement.addClass(cssClass)}(support.browser),support.eventCapture=document.documentElement.addEventListener;var input=document.createElement("input");support.placeholder="placeholder"in input,support.propertyChangeEvent="onpropertychange"in input,support.input=function(){for(var type,types=["number","date","time","month","week","datetime","datetime-local"],length=types.length,value="test",result={},idx=0;length>idx;idx++)type=types[idx],input.setAttribute("type",type),input.value=value,result[type.replace("-","")]="text"!==input.type&&input.value!==value;return result}(),input.style.cssText="float:left;",support.cssFloat=!!input.style.cssFloat,input=null,support.stableSort=function(){for(var threshold=513,sorted=[{index:0,field:"b"}],i=1;threshold>i;i++)sorted.push({index:i,field:"a"});return sorted.sort(function(a,b){return a.field>b.field?1:a.field<b.field?-1:0}),1===sorted[0].index}(),support.matchesSelector=elementProto.webkitMatchesSelector||elementProto.mozMatchesSelector||elementProto.msMatchesSelector||elementProto.oMatchesSelector||elementProto.matchesSelector||elementProto.matches||function(selector){for(var nodeList=document.querySelectorAll?(this.parentNode||document).querySelectorAll(selector)||[]:$(selector),i=nodeList.length;i--;)if(nodeList[i]==this)return!0;return!1},support.pushState=window.history&&window.history.pushState;var documentMode=document.documentMode;support.hashChange="onhashchange"in window&&!(support.browser.msie&&(!documentMode||8>=documentMode))}();var directions={left:{reverse:"right"},right:{reverse:"left"},down:{reverse:"up"},up:{reverse:"down"},top:{reverse:"bottom"},bottom:{reverse:"top"},"in":{reverse:"out"},out:{reverse:"in"}},effects={};$.extend(effects,{enabled:!0,Element:function(element){this.element=$(element)},promise:function(element,options){element.is(":visible")||element.css({display:element.data("olddisplay")||"block"}).css("display"),options.hide&&element.data("olddisplay",element.css("display")).hide(),options.init&&options.init(),options.completeCallback&&options.completeCallback(element),element.dequeue()},disable:function(){this.enabled=!1,this.promise=this.promiseShim},enable:function(){this.enabled=!0,this.promise=this.animatedPromise}}),effects.promiseShim=effects.promise,"kendoAnimate"in $.fn||extend($.fn,{kendoStop:function(clearQueue,gotoEnd){return this.stop(clearQueue,gotoEnd)},kendoAnimate:function(options,duration,reverse,complete){return animate(this,options,duration,reverse,complete)},kendoAddClass:function(classes,options){return kendo.toggleClass(this,classes,options,!0)},kendoRemoveClass:function(classes,options){return kendo.toggleClass(this,classes,options,!1)},kendoToggleClass:function(classes,options,toggle){return kendo.toggleClass(this,classes,options,toggle)}});var ampRegExp=/&/g,ltRegExp=/</g,quoteRegExp=/"/g,aposRegExp=/'/g,gtRegExp=/>/g,eventTarget=function(e){return e.target};support.touch&&(eventTarget=function(e){var touches="originalEvent"in e?e.originalEvent.changedTouches:"changedTouches"in e?e.changedTouches:null;return touches?document.elementFromPoint(touches[0].clientX,touches[0].clientY):e.target},each(["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap"],function(m,value){$.fn[value]=function(callback){return this.bind(value,callback)}})),support.touch?support.mobileOS?(support.mousedown="touchstart",support.mouseup="touchend",support.mousemove="touchmove",support.mousecancel="touchcancel",support.click="touchend",support.resize="orientationchange"):(support.mousedown="mousedown touchstart",support.mouseup="mouseup touchend",support.mousemove="mousemove touchmove",support.mousecancel="mouseleave touchcancel",support.click="click",support.resize="resize"):support.pointers?(support.mousemove="pointermove",support.mousedown="pointerdown",support.mouseup="pointerup",support.mousecancel="pointercancel",support.click="pointerup",support.resize="orientationchange resize"):support.msPointers?(support.mousemove="MSPointerMove",support.mousedown="MSPointerDown",support.mouseup="MSPointerUp",support.mousecancel="MSPointerCancel",support.click="MSPointerUp",support.resize="orientationchange resize"):(support.mousemove="mousemove",support.mousedown="mousedown",support.mouseup="mouseup",support.mousecancel="mouseleave",support.click="click",support.resize="resize");var wrapExpression=function(members,paramName){var index,idx,length,member,result=paramName||"d",count=1;for(idx=0,length=members.length;length>idx;idx++)member=members[idx],""!==member&&(index=member.indexOf("["),0!==index&&(-1==index?member="."+member:(count++,member="."+member.substring(0,index)+" || {})"+member.substring(index))),count++,result+=member+(length-1>idx?" || {})":")"));return new Array(count).join("(")+result},localUrlRe=/^([a-z]+:)?\/\//i;extend(kendo,{ui:kendo.ui||{},fx:kendo.fx||fx,effects:kendo.effects||effects,mobile:kendo.mobile||{},data:kendo.data||{},dataviz:kendo.dataviz||{},keys:{INSERT:45,DELETE:46,BACKSPACE:8,TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,END:35,HOME:36,SPACEBAR:32,PAGEUP:33,PAGEDOWN:34,F2:113,F10:121,F12:123,NUMPAD_PLUS:107,NUMPAD_MINUS:109,NUMPAD_DOT:110},support:kendo.support||support,animate:kendo.animate||animate,ns:"",attr:function(value){return"data-"+kendo.ns+value},getShadows:getShadows,wrap:wrap,deepExtend:deepExtend,getComputedStyles:getComputedStyles,size:size,toCamelCase:toCamelCase,toHyphens:toHyphens,getOffset:kendo.getOffset||getOffset,parseEffects:kendo.parseEffects||parseEffects,toggleClass:kendo.toggleClass||toggleClass,directions:kendo.directions||directions,Observable:Observable,Class:Class,Template:Template,template:proxy(Template.compile,Template),render:proxy(Template.render,Template),stringify:proxy(JSON.stringify,JSON),eventTarget:eventTarget,htmlEncode:htmlEncode,isLocalUrl:function(url){return url&&!localUrlRe.test(url)},expr:function(expression,safe,paramName){return expression=expression||"",typeof safe==STRING&&(paramName=safe,safe=!1),paramName=paramName||"d",expression&&"["!==expression.charAt(0)&&(expression="."+expression),safe?(expression=expression.replace(/"([^.]*)\.([^"]*)"/g,'"$1_$DOT$_$2"'),expression=expression.replace(/'([^.]*)\.([^']*)'/g,"'$1_$DOT$_$2'"),expression=wrapExpression(expression.split("."),paramName),expression=expression.replace(/_\$DOT\$_/g,".")):expression=paramName+expression,expression},getter:function(expression,safe){var key=expression+safe;return getterCache[key]=getterCache[key]||new Function("d","return "+kendo.expr(expression,safe))},setter:function(expression){return setterCache[expression]=setterCache[expression]||new Function("d,value",kendo.expr(expression)+"=value")},accessor:function(expression){return{get:kendo.getter(expression),set:kendo.setter(expression)}},guid:function(){var i,random,id="";for(i=0;32>i;i++)random=16*math.random()|0,8!=i&&12!=i&&16!=i&&20!=i||(id+="-"),id+=(12==i?4:16==i?3&random|8:random).toString(16);return id},roleSelector:function(role){return role.replace(/(\S+)/g,"["+kendo.attr("role")+"=$1],").slice(0,-1)},directiveSelector:function(directives){var selectors=directives.split(" ");if(selectors)for(var i=0;i<selectors.length;i++)"view"!=selectors[i]&&(selectors[i]=selectors[i].replace(/(\w*)(view|bar|strip|over)$/,"$1-$2"));return selectors.join(" ").replace(/(\S+)/g,"kendo-mobile-$1,").slice(0,-1)},triggeredByInput:function(e){return/^(label|input|textarea|select)$/i.test(e.target.tagName)},logToConsole:function(message){var console=window.console;!kendo.suppressLog&&"undefined"!=typeof console&&console.log&&console.log(message)}});var Widget=Observable.extend({init:function(element,options){var that=this;that.element=kendo.jQuery(element).handler(that),that.angular("init",options),Observable.fn.init.call(that);var dataSource=options?options.dataSource:null;dataSource&&(options=extend({},options,{dataSource:{}})),options=that.options=extend(!0,{},that.options,options),dataSource&&(options.dataSource=dataSource),that.element.attr(kendo.attr("role"))||that.element.attr(kendo.attr("role"),(options.name||"").toLowerCase()),that.element.data("kendo"+options.prefix+options.name,that),that.bind(that.events,options)},events:[],options:{prefix:""},_hasBindingTarget:function(){return!!this.element[0].kendoBindingTarget},_tabindex:function(target){target=target||this.wrapper;var element=this.element,TABINDEX="tabindex",tabindex=target.attr(TABINDEX)||element.attr(TABINDEX);element.removeAttr(TABINDEX),target.attr(TABINDEX,isNaN(tabindex)?0:tabindex)},setOptions:function(options){this._setEvents(options),$.extend(this.options,options)},_setEvents:function(options){for(var e,that=this,idx=0,length=that.events.length;length>idx;idx++)e=that.events[idx],that.options[e]&&options[e]&&that.unbind(e,that.options[e]);that.bind(that.events,options)},resize:function(force){var size=this.getSize(),currentSize=this._size;(force||(size.width>0||size.height>0)&&(!currentSize||size.width!==currentSize.width||size.height!==currentSize.height))&&(this._size=size,this._resize(size,force),this.trigger("resize",size))},getSize:function(){return kendo.dimensions(this.element)},size:function(size){return size?void this.setSize(size):this.getSize()},setSize:$.noop,_resize:$.noop,destroy:function(){var that=this;that.element.removeData("kendo"+that.options.prefix+that.options.name),that.element.removeData("handler"),that.unbind()},angular:function(){}}),DataBoundWidget=Widget.extend({dataItems:function(){return this.dataSource.flatView()},_angularItems:function(cmd){var that=this;that.angular(cmd,function(){return{elements:that.items(),data:$.map(that.dataItems(),function(dataItem){return{dataItem:dataItem}})}})}});kendo.dimensions=function(element,dimensions){var domElement=element[0];return dimensions&&element.css(dimensions),{width:domElement.offsetWidth,height:domElement.offsetHeight}},kendo.notify=noop;var templateRegExp=/template$/i,jsonRegExp=/^\s*(?:\{(?:.|\r\n|\n)*\}|\[(?:.|\r\n|\n)*\])\s*$/,jsonFormatRegExp=/^\{(\d+)(:[^\}]+)?\}|^\[[A-Za-z_]*\]$/,dashRegExp=/([A-Z])/g;kendo.initWidget=function(element,options,roles){var result,option,widget,idx,length,role,value,dataSource,fullPath,widgetKeyRegExp;if(roles?roles.roles&&(roles=roles.roles):roles=kendo.ui.roles,element=element.nodeType?element:element[0],role=element.getAttribute("data-"+kendo.ns+"role")){fullPath=-1===role.indexOf("."),widget=fullPath?roles[role]:kendo.getter(role)(window);var data=$(element).data(),widgetKey=widget?"kendo"+widget.fn.options.prefix+widget.fn.options.name:"";widgetKeyRegExp=fullPath?new RegExp("^kendo.*"+role+"$","i"):new RegExp("^"+widgetKey+"$","i");for(var key in data)if(key.match(widgetKeyRegExp)){if(key!==widgetKey)return data[key];result=data[key]}if(widget){for(dataSource=parseOption(element,"dataSource"),options=$.extend({},parseOptions(element,widget.fn.options),options),dataSource&&(typeof dataSource===STRING?options.dataSource=kendo.getter(dataSource)(window):options.dataSource=dataSource),idx=0,length=widget.fn.events.length;length>idx;idx++)option=widget.fn.events[idx],value=parseOption(element,option),value!==undefined&&(options[option]=kendo.getter(value)(window));return result?$.isEmptyObject(options)||result.setOptions(options):result=new widget(element,options),result}}},kendo.rolesFromNamespaces=function(namespaces){var idx,length,roles=[];for(namespaces[0]||(namespaces=[kendo.ui,kendo.dataviz.ui]),idx=0,length=namespaces.length;length>idx;idx++)roles[idx]=namespaces[idx].roles;return extend.apply(null,[{}].concat(roles.reverse()))},kendo.init=function(element){var roles=kendo.rolesFromNamespaces(slice.call(arguments,1));$(element).find("[data-"+kendo.ns+"role]").addBack().each(function(){kendo.initWidget(this,{},roles)})},kendo.destroy=function(element){$(element).find("[data-"+kendo.ns+"role]").addBack().each(function(){var data=$(this).data();for(var key in data)0===key.indexOf("kendo")&&typeof data[key].destroy===FUNCTION&&data[key].destroy()})},kendo.resize=function(element,force){var widgets=$(element).find("[data-"+kendo.ns+"role]").addBack().filter(resizableWidget);if(widgets.length){var widgetsArray=$.makeArray(widgets);widgetsArray.sort(containmentComparer),$.each(widgetsArray,function(){var widget=kendo.widgetInstance($(this));widget&&widget.resize(force)})}},kendo.parseOptions=parseOptions,extend(kendo.ui,{Widget:Widget,DataBoundWidget:DataBoundWidget,roles:{},progress:function(container,toggle){var isRtl,leftRight,webkitCorrection,containerScrollLeft,mask=container.find(".k-loading-mask"),support=kendo.support,browser=support.browser;toggle?mask.length||(isRtl=support.isRtl(container),leftRight=isRtl?"right":"left",containerScrollLeft=container.scrollLeft(),webkitCorrection=browser.webkit&&isRtl?container[0].scrollWidth-container.width()-2*containerScrollLeft:0,mask=$("<div class='k-loading-mask'><span class='k-loading-text'>Loading...</span><div class='k-loading-image'/><div class='k-loading-color'/></div>").width("100%").height("100%").css("top",container.scrollTop()).css(leftRight,Math.abs(containerScrollLeft)+webkitCorrection).prependTo(container)):mask&&mask.remove()},plugin:function(widget,register,prefix){var getter,name=widget.fn.options.name;register=register||kendo.ui,prefix=prefix||"",register[name]=widget,register.roles[name.toLowerCase()]=widget,getter="getKendo"+prefix+name,name="kendo"+prefix+name,$.fn[name]=function(options){var args,value=this;return typeof options===STRING?(args=slice.call(arguments,1),this.each(function(){var method,result,widget=$.data(this,name);if(!widget)throw new Error(kendo.format("Cannot call method '{0}' of {1} before it is initialized",options,name));if(method=widget[options],typeof method!==FUNCTION)throw new Error(kendo.format("Cannot find method '{0}' of {1}",options,name));return result=method.apply(widget,args),result!==undefined?(value=result,!1):void 0})):this.each(function(){new widget(this,options)}),value},$.fn[name].widget=widget,$.fn[getter]=function(){return this.data(name)}}});var ContainerNullObject={bind:function(){return this},nullObject:!0,options:{}},MobileWidget=Widget.extend({init:function(element,options){Widget.fn.init.call(this,element,options),this.element.autoApplyNS(),this.wrapper=this.element,this.element.addClass("km-widget")},destroy:function(){Widget.fn.destroy.call(this),this.element.kendoDestroy()},options:{prefix:"Mobile"},events:[],view:function(){var viewElement=this.element.closest(kendo.roleSelector("view splitview modalview drawer"));return kendo.widgetInstance(viewElement,kendo.mobile.ui)||ContainerNullObject},viewHasNativeScrolling:function(){var view=this.view();return view&&view.options.useNativeScrolling},container:function(){var element=this.element.closest(kendo.roleSelector("view layout modalview drawer splitview"));return kendo.widgetInstance(element.eq(0),kendo.mobile.ui)||ContainerNullObject}});extend(kendo.mobile,{init:function(element){kendo.init(element,kendo.mobile.ui,kendo.ui,kendo.dataviz.ui)},appLevelNativeScrolling:function(){return kendo.mobile.application&&kendo.mobile.application.options&&kendo.mobile.application.options.useNativeScrolling},roles:{},ui:{Widget:MobileWidget,DataBoundWidget:DataBoundWidget.extend(MobileWidget.prototype),roles:{},plugin:function(widget){kendo.ui.plugin(widget,kendo.mobile.ui,"Mobile")}}}),deepExtend(kendo.dataviz,{init:function(element){kendo.init(element,kendo.dataviz.ui)},ui:{roles:{},themes:{},views:[],plugin:function(widget){kendo.ui.plugin(widget,kendo.dataviz.ui)}},roles:{}}),kendo.touchScroller=function(elements,options){return $(elements).map(function(idx,element){return element=$(element),support.kineticScrollNeeded&&kendo.mobile.ui.Scroller&&!element.data("kendoMobileScroller")?(element.kendoMobileScroller(options),element.data("kendoMobileScroller")):!1})[0]},kendo.preventDefault=function(e){e.preventDefault()},kendo.widgetInstance=function(element,suites){var i,length,role=element.data(kendo.ns+"role"),widgets=[];if(role){if("content"===role&&(role="scroller"),suites)if(suites[0])for(i=0,length=suites.length;length>i;i++)widgets.push(suites[i].roles[role]);else widgets.push(suites.roles[role]);else widgets=[kendo.ui.roles[role],kendo.dataviz.ui.roles[role],kendo.mobile.ui.roles[role]];for(role.indexOf(".")>=0&&(widgets=[kendo.getter(role)(window)]),i=0,length=widgets.length;length>i;i++){var widget=widgets[i];if(widget){var instance=element.data("kendo"+widget.fn.options.prefix+widget.fn.options.name);if(instance)return instance}}}},kendo.onResize=function(callback){var handler=callback;return support.mobileOS.android&&(handler=function(){setTimeout(callback,600)}),$(window).on(support.resize,handler),handler},kendo.unbindResize=function(callback){$(window).off(support.resize,callback)},kendo.attrValue=function(element,key){return element.data(kendo.ns+key)},kendo.days={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},$.extend($.expr[":"],{kendoFocusable:function(element){var idx=$.attr(element,"tabindex");return focusable(element,!isNaN(idx)&&idx>-1)}});var MOUSE_EVENTS=["mousedown","mousemove","mouseenter","mouseleave","mouseover","mouseout","mouseup","click"],EXCLUDE_BUST_CLICK_SELECTOR="label, input, [data-rel=external]",MouseEventNormalizer={setupMouseMute:function(){var idx=0,length=MOUSE_EVENTS.length,element=document.documentElement;if(!MouseEventNormalizer.mouseTrap&&support.eventCapture){MouseEventNormalizer.mouseTrap=!0,MouseEventNormalizer.bustClick=!1,MouseEventNormalizer.captureMouse=!1;for(var handler=function(e){MouseEventNormalizer.captureMouse&&("click"===e.type?MouseEventNormalizer.bustClick&&!$(e.target).is(EXCLUDE_BUST_CLICK_SELECTOR)&&(e.preventDefault(),e.stopPropagation()):e.stopPropagation())};length>idx;idx++)element.addEventListener(MOUSE_EVENTS[idx],handler,!0)}},muteMouse:function(e){MouseEventNormalizer.captureMouse=!0,e.data.bustClick&&(MouseEventNormalizer.bustClick=!0),clearTimeout(MouseEventNormalizer.mouseTrapTimeoutID)},unMuteMouse:function(){clearTimeout(MouseEventNormalizer.mouseTrapTimeoutID),MouseEventNormalizer.mouseTrapTimeoutID=setTimeout(function(){MouseEventNormalizer.captureMouse=!1,MouseEventNormalizer.bustClick=!1},400)}},eventMap={down:"touchstart mousedown",move:"mousemove touchmove",up:"mouseup touchend touchcancel",cancel:"mouseleave touchcancel"};support.touch&&(support.mobileOS.ios||support.mobileOS.android)?eventMap={down:"touchstart",move:"touchmove",up:"touchend touchcancel",cancel:"touchcancel"}:support.pointers?eventMap={down:"pointerdown",move:"pointermove",up:"pointerup",cancel:"pointercancel pointerleave"}:support.msPointers&&(eventMap={down:"MSPointerDown",move:"MSPointerMove",up:"MSPointerUp",cancel:"MSPointerCancel MSPointerLeave"}),!support.msPointers||"onmspointerenter"in window||$.each({MSPointerEnter:"MSPointerOver",MSPointerLeave:"MSPointerOut"},function(orig,fix){$.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj;return related&&(related===target||$.contains(target,related))||(event.type=handleObj.origType,ret=handleObj.handler.apply(this,arguments),event.type=fix),ret}}});var getEventMap=function(e){return eventMap[e]||e},eventRegEx=/([^ ]+)/g;kendo.applyEventMap=function(events,ns){return events=events.replace(eventRegEx,getEventMap),ns&&(events=events.replace(eventRegEx,"$1."+ns)),events};var on=$.fn.on;extend(!0,kendoJQuery,$),kendoJQuery.fn=kendoJQuery.prototype=new $,kendoJQuery.fn.constructor=kendoJQuery,kendoJQuery.fn.init=function(selector,context){return context&&context instanceof $&&!(context instanceof kendoJQuery)&&(context=kendoJQuery(context)),$.fn.init.call(this,selector,context,rootjQuery)},kendoJQuery.fn.init.prototype=kendoJQuery.fn;var rootjQuery=kendoJQuery(document);extend(kendoJQuery.fn,{handler:function(handler){return this.data("handler",handler),this},autoApplyNS:function(ns){return this.data("kendoNS",ns||kendo.guid()),this},on:function(){var that=this,ns=that.data("kendoNS");if(1===arguments.length)return on.call(that,arguments[0]);var context=that,args=slice.call(arguments);typeof args[args.length-1]===UNDEFINED&&args.pop();var callback=args[args.length-1],events=kendo.applyEventMap(args[0],ns);if(support.mouseAndTouchPresent&&events.search(/mouse|click/)>-1&&this[0]!==document.documentElement){MouseEventNormalizer.setupMouseMute();var selector=2===args.length?null:args[1],bustClick=events.indexOf("click")>-1&&events.indexOf("touchend")>-1;on.call(this,{touchstart:MouseEventNormalizer.muteMouse,touchend:MouseEventNormalizer.unMuteMouse},selector,{bustClick:bustClick})}return typeof callback===STRING&&(context=that.data("handler"),callback=context[callback],args[args.length-1]=function(e){callback.call(context,e)}),args[0]=events,on.apply(that,args),that},kendoDestroy:function(ns){return ns=ns||this.data("kendoNS"),ns&&this.off("."+ns),this}}),kendo.jQuery=kendoJQuery,kendo.eventMap=eventMap,kendo.timezone=function(){function ruleToDate(year,rule){var date,targetDay,ourDay,month=rule[3],on=rule[4],time=rule[5],cache=rule[8];return cache||(rule[8]=cache={}),cache[year]?cache[year]:(isNaN(on)?0===on.indexOf("last")?(date=new Date(Date.UTC(year,months[month]+1,1,time[0]-24,time[1],time[2],0)),targetDay=days[on.substr(4,3)],ourDay=date.getUTCDay(),date.setUTCDate(date.getUTCDate()+targetDay-ourDay-(targetDay>ourDay?7:0))):on.indexOf(">=")>=0&&(date=new Date(Date.UTC(year,months[month],on.substr(5),time[0],time[1],time[2],0)),targetDay=days[on.substr(0,3)],ourDay=date.getUTCDay(),date.setUTCDate(date.getUTCDate()+targetDay-ourDay+(ourDay>targetDay?7:0))):date=new Date(Date.UTC(year,months[month],on,time[0],time[1],time[2],0)),cache[year]=date)}function findRule(utcTime,rules,zone){if(rules=rules[zone],!rules){var time=zone.split(":"),offset=0;return time.length>1&&(offset=60*time[0]+Number(time[1])),[-1e6,"max","-","Jan",1,[0,0,0],offset,"-"]}var year=new Date(utcTime).getUTCFullYear();rules=jQuery.grep(rules,function(rule){var from=rule[0],to=rule[1];return year>=from&&(to>=year||from==year&&"only"==to||"max"==to)}),rules.push(utcTime),rules.sort(function(a,b){return"number"!=typeof a&&(a=Number(ruleToDate(year,a))),"number"!=typeof b&&(b=Number(ruleToDate(year,b))),a-b});var rule=rules[jQuery.inArray(utcTime,rules)-1]||rules[rules.length-1];return isNaN(rule)?rule:null}function findZone(utcTime,zones,timezone){var zoneRules=zones[timezone];if("string"==typeof zoneRules&&(zoneRules=zones[zoneRules]),!zoneRules)throw new Error('Timezone "'+timezone+'" is either incorrect, or kendo.timezones.min.js is not included.');for(var idx=zoneRules.length-1;idx>=0;idx--){var until=zoneRules[idx][3];if(until&&utcTime>until)break}var zone=zoneRules[idx+1];if(!zone)throw new Error('Timezone "'+timezone+'" not found on '+utcTime+".");return zone}function zoneAndRule(utcTime,zones,rules,timezone){typeof utcTime!=NUMBER&&(utcTime=Date.UTC(utcTime.getFullYear(),utcTime.getMonth(),utcTime.getDate(),utcTime.getHours(),utcTime.getMinutes(),utcTime.getSeconds(),utcTime.getMilliseconds()));var zone=findZone(utcTime,zones,timezone);return{zone:zone,rule:findRule(utcTime,rules,zone[1])}}function offset(utcTime,timezone){if("Etc/UTC"==timezone||"Etc/GMT"==timezone)return 0;var info=zoneAndRule(utcTime,this.zones,this.rules,timezone),zone=info.zone,rule=info.rule;return kendo.parseFloat(rule?zone[0]-rule[6]:zone[0])}function abbr(utcTime,timezone){var info=zoneAndRule(utcTime,this.zones,this.rules,timezone),zone=info.zone,rule=info.rule,base=zone[2];return base.indexOf("/")>=0?base.split("/")[rule&&+rule[6]?1:0]:base.indexOf("%s")>=0?base.replace("%s",rule&&"-"!=rule[7]?rule[7]:""):base}function convert(date,fromOffset,toOffset){typeof fromOffset==STRING&&(fromOffset=this.offset(date,fromOffset)),typeof toOffset==STRING&&(toOffset=this.offset(date,toOffset));var fromLocalOffset=date.getTimezoneOffset();date=new Date(date.getTime()+6e4*(fromOffset-toOffset));var toLocalOffset=date.getTimezoneOffset();return new Date(date.getTime()+6e4*(toLocalOffset-fromLocalOffset));
}function apply(date,timezone){return this.convert(date,date.getTimezoneOffset(),timezone)}function remove(date,timezone){return this.convert(date,timezone,date.getTimezoneOffset())}function toLocalDate(time){return this.apply(new Date(time),"Etc/UTC")}var months={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},days={Sun:0,Mon:1,Tue:2,Wed:3,Thu:4,Fri:5,Sat:6};return{zones:{},rules:{},offset:offset,convert:convert,apply:apply,remove:remove,abbr:abbr,toLocalDate:toLocalDate}}(),kendo.date=function(){function adjustDST(date,hours){return 0===hours&&23===date.getHours()?(date.setHours(date.getHours()+2),!0):!1}function setDayOfWeek(date,day,dir){var hours=date.getHours();dir=dir||1,day=(day-date.getDay()+7*dir)%7,date.setDate(date.getDate()+day),adjustDST(date,hours)}function dayOfWeek(date,day,dir){return date=new Date(date),setDayOfWeek(date,day,dir),date}function firstDayOfMonth(date){return new Date(date.getFullYear(),date.getMonth(),1)}function lastDayOfMonth(date){var last=new Date(date.getFullYear(),date.getMonth()+1,0),first=firstDayOfMonth(date),timeOffset=Math.abs(last.getTimezoneOffset()-first.getTimezoneOffset());return timeOffset&&last.setHours(first.getHours()+timeOffset/60),last}function getDate(date){return date=new Date(date.getFullYear(),date.getMonth(),date.getDate(),0,0,0),adjustDST(date,0),date}function toUtcTime(date){return Date.UTC(date.getFullYear(),date.getMonth(),date.getDate(),date.getHours(),date.getMinutes(),date.getSeconds(),date.getMilliseconds())}function getMilliseconds(date){return date.getTime()-getDate(date)}function isInTimeRange(value,min,max){var msValue,msMin=getMilliseconds(min),msMax=getMilliseconds(max);return value&&msMin!=msMax?(min>=max&&(max+=MS_PER_DAY),msValue=getMilliseconds(value),msMin>msValue&&(msValue+=MS_PER_DAY),msMin>msMax&&(msMax+=MS_PER_DAY),msValue>=msMin&&msMax>=msValue):!0}function isInDateRange(value,min,max){var msValue,msMin=min.getTime(),msMax=max.getTime();return msMin>=msMax&&(msMax+=MS_PER_DAY),msValue=value.getTime(),msValue>=msMin&&msMax>=msValue}function addDays(date,offset){var hours=date.getHours();return date=new Date(date),setTime(date,offset*MS_PER_DAY),adjustDST(date,hours),date}function setTime(date,milliseconds,ignoreDST){var difference,offset=date.getTimezoneOffset();date.setTime(date.getTime()+milliseconds),ignoreDST||(difference=date.getTimezoneOffset()-offset,date.setTime(date.getTime()+difference*MS_PER_MINUTE))}function today(){return getDate(new Date)}function isToday(date){return getDate(date).getTime()==today().getTime()}function toInvariantTime(date){var staticDate=new Date(1980,1,1,0,0,0);return date&&staticDate.setHours(date.getHours(),date.getMinutes(),date.getSeconds(),date.getMilliseconds()),staticDate}var MS_PER_MINUTE=6e4,MS_PER_DAY=864e5;return{adjustDST:adjustDST,dayOfWeek:dayOfWeek,setDayOfWeek:setDayOfWeek,getDate:getDate,isInDateRange:isInDateRange,isInTimeRange:isInTimeRange,isToday:isToday,nextDay:function(date){return addDays(date,1)},previousDay:function(date){return addDays(date,-1)},toUtcTime:toUtcTime,MS_PER_DAY:MS_PER_DAY,MS_PER_HOUR:60*MS_PER_MINUTE,MS_PER_MINUTE:MS_PER_MINUTE,setTime:setTime,addDays:addDays,today:today,toInvariantTime:toInvariantTime,firstDayOfMonth:firstDayOfMonth,lastDayOfMonth:lastDayOfMonth,getMilliseconds:getMilliseconds}}(),kendo.stripWhitespace=function(element){if(document.createNodeIterator)for(var iterator=document.createNodeIterator(element,NodeFilter.SHOW_TEXT,function(node){return node.parentNode==element?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT},!1);iterator.nextNode();)iterator.referenceNode&&!iterator.referenceNode.textContent.trim()&&iterator.referenceNode.parentNode.removeChild(iterator.referenceNode);else for(var i=0;i<element.childNodes.length;i++){var child=element.childNodes[i];3!=child.nodeType||/\S/.test(child.nodeValue)||(element.removeChild(child),i--),1==child.nodeType&&kendo.stripWhitespace(child)}};var animationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){setTimeout(callback,1e3/60)};kendo.animationFrame=function(callback){animationFrame.call(window,callback)};var animationQueue=[];kendo.queueAnimation=function(callback){animationQueue[animationQueue.length]=callback,1===animationQueue.length&&kendo.runNextAnimation()},kendo.runNextAnimation=function(){kendo.animationFrame(function(){animationQueue[0]&&(animationQueue.shift()(),animationQueue[0]&&kendo.runNextAnimation())})},kendo.parseQueryStringParams=function(url){for(var queryString=url.split("?")[1]||"",params={},paramParts=queryString.split(/&|=/),length=paramParts.length,idx=0;length>idx;idx+=2)""!==paramParts[idx]&&(params[decodeURIComponent(paramParts[idx])]=decodeURIComponent(paramParts[idx+1]));return params},kendo.elementUnderCursor=function(e){return"undefined"!=typeof e.x.client?document.elementFromPoint(e.x.client,e.y.client):void 0},kendo.wheelDeltaY=function(jQueryEvent){var delta,e=jQueryEvent.originalEvent,deltaY=e.wheelDeltaY;return e.wheelDelta?(deltaY===undefined||deltaY)&&(delta=e.wheelDelta):e.detail&&e.axis===e.VERTICAL_AXIS&&(delta=10*-e.detail),delta},kendo.throttle=function(fn,delay){var timeout,lastExecTime=0;if(!delay||0>=delay)return fn;var throttled=function(){function exec(){fn.apply(that,args),lastExecTime=+new Date}var that=this,elapsed=+new Date-lastExecTime,args=arguments;return lastExecTime?(timeout&&clearTimeout(timeout),void(elapsed>delay?exec():timeout=setTimeout(exec,delay-elapsed))):exec()};return throttled.cancel=function(){clearTimeout(timeout)},throttled},kendo.caret=function(element,start,end){var rangeElement,isPosition=start!==undefined;if(end===undefined&&(end=start),element[0]&&(element=element[0]),!isPosition||!element.disabled){try{if(element.selectionStart!==undefined)isPosition?(element.focus(),element.setSelectionRange(start,end)):start=[element.selectionStart,element.selectionEnd];else if(document.selection)if($(element).is(":visible")&&element.focus(),rangeElement=element.createTextRange(),isPosition)rangeElement.collapse(!0),rangeElement.moveStart("character",start),rangeElement.moveEnd("character",end-start),rangeElement.select();else{var selectionStart,selectionEnd,rangeDuplicated=rangeElement.duplicate();rangeElement.moveToBookmark(document.selection.createRange().getBookmark()),rangeDuplicated.setEndPoint("EndToStart",rangeElement),selectionStart=rangeDuplicated.text.length,selectionEnd=selectionStart+rangeElement.text.length,start=[selectionStart,selectionEnd]}}catch(e){start=[]}return start}},kendo.compileMobileDirective=function(element,scope){var angular=window.angular;return element.attr("data-"+kendo.ns+"role",element[0].tagName.toLowerCase().replace("kendo-mobile-","").replace("-","")),angular.element(element).injector().invoke(["$compile",function($compile){$compile(element)(scope),/^\$(digest|apply)$/.test(scope.$$phase)||scope.$digest()}]),kendo.widgetInstance(element,kendo.mobile.ui)},kendo.antiForgeryTokens=function(){var tokens={},csrf_token=$("meta[name=csrf-token],meta[name=_csrf]").attr("content"),csrf_param=$("meta[name=csrf-param],meta[name=_csrf_header]").attr("content");return $("input[name^='__RequestVerificationToken']").each(function(){tokens[this.name]=this.value}),csrf_param!==undefined&&csrf_token!==undefined&&(tokens[csrf_param]=csrf_token),tokens},function(){function postToProxy(dataURI,fileName,proxyURL,proxyTarget){var form=$("<form>").attr({action:proxyURL,method:"POST",target:proxyTarget}),data=kendo.antiForgeryTokens();data.fileName=fileName;var parts=dataURI.split(";base64,");data.contentType=parts[0].replace("data:",""),data.base64=parts[1];for(var name in data)data.hasOwnProperty(name)&&$("<input>").attr({value:data[name],name:name,type:"hidden"}).appendTo(form);form.appendTo("body").submit().remove()}function saveAsBlob(dataURI,fileName){var blob=dataURI;if("string"==typeof dataURI){for(var parts=dataURI.split(";base64,"),contentType=parts[0],base64=atob(parts[1]),array=new Uint8Array(base64.length),idx=0;idx<base64.length;idx++)array[idx]=base64.charCodeAt(idx);blob=new Blob([array.buffer],{type:contentType})}navigator.msSaveBlob(blob,fileName)}function saveAsDataURI(dataURI,fileName){window.Blob&&dataURI instanceof Blob&&(dataURI=URL.createObjectURL(dataURI)),fileSaver.download=fileName,fileSaver.href=dataURI;var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),fileSaver.dispatchEvent(e)}var fileSaver=document.createElement("a"),downloadAttribute="download"in fileSaver;kendo.saveAs=function(options){var save=postToProxy;options.forceProxy||(downloadAttribute?save=saveAsDataURI:navigator.msSaveBlob&&(save=saveAsBlob)),save(options.dataURI,options.fileName,options.proxyURL,options.proxyTarget)}}()}(jQuery,window),window.kendo},"function"==typeof define&&define.amd?define:function(_,f){f()}),function(f,define){define(["./kendo.core","./kendo.binder","./kendo.fx"],f)}(function(){return function($,undefined){function parseTransition(transition){if(!transition)return{};var matches=transition.match(transitionRegExp)||[];return{type:matches[1],direction:matches[3],reverse:"reverse"===matches[5]}}var kendo=window.kendo,Observable=kendo.Observable,SCRIPT="SCRIPT",INIT="init",SHOW="show",HIDE="hide",TRANSITION_START="transitionStart",TRANSITION_END="transitionEnd",ATTACH="attach",DETACH="detach",sizzleErrorRegExp=/unrecognized expression/,View=Observable.extend({init:function(content,options){var that=this;options=options||{},Observable.fn.init.call(that),that.content=content,that.id=kendo.guid(),that.tagName=options.tagName||"div",that.model=options.model,that._wrap=options.wrap!==!1,this._evalTemplate=options.evalTemplate||!1,that._fragments={},that.bind([INIT,SHOW,HIDE,TRANSITION_START,TRANSITION_END],options)},render:function(container){var that=this,notInitialized=!that.element;return notInitialized&&(that.element=that._createElement()),container&&$(container).append(that.element),notInitialized&&(kendo.bind(that.element,that.model),that.trigger(INIT)),container&&(that._eachFragment(ATTACH),that.trigger(SHOW)),that.element},clone:function(back){return new ViewClone(this)},triggerBeforeShow:function(){return!0},triggerBeforeHide:function(){return!0},showStart:function(){this.element.css("display","")},showEnd:function(){},hideEnd:function(){this.hide()},beforeTransition:function(type){this.trigger(TRANSITION_START,{type:type})},afterTransition:function(type){this.trigger(TRANSITION_END,{type:type})},hide:function(){this._eachFragment(DETACH),this.element.detach(),this.trigger(HIDE)},destroy:function(){var element=this.element;element&&(kendo.unbind(element),kendo.destroy(element),element.remove())},fragments:function(fragments){$.extend(this._fragments,fragments)},_eachFragment:function(methodName){for(var placeholder in this._fragments)this._fragments[placeholder][methodName](this,placeholder)},_createElement:function(){var element,content,that=this,wrapper="<"+that.tagName+" />";try{content=$(document.getElementById(that.content)||that.content),content[0].tagName===SCRIPT&&(content=content.html())}catch(e){sizzleErrorRegExp.test(e.message)&&(content=that.content)}if("string"==typeof content)content=content.replace(/^\s+|\s+$/g,""),that._evalTemplate&&(content=kendo.template(content)(that.model||{})),element=$(wrapper).append(content),that._wrap||(element=element.contents());else{if(element=content,that._evalTemplate){var result=$(kendo.template($("<div />").append(element.clone(!0)).html())(that.model||{}));$.contains(document,element[0])&&element.replaceWith(result),element=result}that._wrap&&(element=element.wrapAll(wrapper).parent())}return element}}),ViewClone=kendo.Class.extend({init:function(view){$.extend(this,{element:view.element.clone(!0),transition:view.transition,id:view.id}),view.element.parent().append(this.element)},hideEnd:function(){this.element.remove()},beforeTransition:$.noop,afterTransition:$.noop}),Layout=View.extend({init:function(content,options){View.fn.init.call(this,content,options),this.containers={}},container:function(selector){var container=this.containers[selector];return container||(container=this._createContainer(selector),this.containers[selector]=container),container},showIn:function(selector,view,transition){this.container(selector).show(view,transition)},_createContainer:function(selector){var container,root=this.render(),element=root.find(selector);if(!element.length&&root.is(selector)){if(!root.is(selector))throw new Error("can't find a container with the specified "+selector+" selector");element=root}return container=new ViewContainer(element),container.bind("accepted",function(e){e.view.render(element)}),container}}),Fragment=View.extend({attach:function(view,placeholder){view.element.find(placeholder).replaceWith(this.render())},detach:function(){}}),transitionRegExp=/^(\w+)(:(\w+))?( (\w+))?$/,ViewContainer=Observable.extend({init:function(container){Observable.fn.init.call(this),this.container=container,this.history=[],this.view=null,this.running=!1},after:function(){this.running=!1,this.trigger("complete",{view:this.view}),this.trigger("after")},end:function(){this.view.showEnd(),this.previous.hideEnd(),this.after()},show:function(view,transition,locationID){if(!view.triggerBeforeShow()||this.view&&!this.view.triggerBeforeHide())return this.trigger("after"),!1;locationID=locationID||view.id;var that=this,current=view===that.view?view.clone():that.view,history=that.history,previousEntry=history[history.length-2]||{},back=previousEntry.id===locationID,theTransition=transition||(back?history[history.length-1].transition:view.transition),transitionData=parseTransition(theTransition);return that.running&&that.effect.stop(),"none"===theTransition&&(theTransition=null),that.trigger("accepted",{view:view}),that.view=view,that.previous=current,that.running=!0,back?history.pop():history.push({id:locationID,transition:theTransition}),current?(theTransition&&kendo.effects.enabled?(view.element.addClass("k-fx-hidden"),view.showStart(),back&&!transition&&(transitionData.reverse=!transitionData.reverse),that.effect=kendo.fx(view.element).replace(current.element,transitionData.type).beforeTransition(function(){view.beforeTransition("show"),current.beforeTransition("hide")}).afterTransition(function(){view.afterTransition("show"),current.afterTransition("hide")}).direction(transitionData.direction).setReverse(transitionData.reverse),that.effect.run().then(function(){that.end()})):(view.showStart(),that.end()),!0):(view.showStart(),view.showEnd(),that.after(),!0)}});kendo.ViewContainer=ViewContainer,kendo.Fragment=Fragment,kendo.Layout=Layout,kendo.View=View,kendo.ViewClone=ViewClone}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(_,f){f()}),function(f,define){define(["./kendo.core"],f)}(function(){return function($,undefined){function parseInteger(value){return parseInt(value,10)}function parseCSS(element,property){return parseInteger(element.css(property))}function keys(obj){var acc=[];for(var propertyName in obj)acc.push(propertyName);return acc}function strip3DTransforms(properties){for(var key in properties)-1!=transformProps.indexOf(key)&&-1==transform2d.indexOf(key)&&delete properties[key];return properties}function normalizeCSS(element,properties){var lowerKey,key,value,isTransformed,transformation=[],cssValues={};for(key in properties)lowerKey=key.toLowerCase(),isTransformed=transforms&&-1!=transformProps.indexOf(lowerKey),!support.hasHW3D&&isTransformed&&-1==transform2d.indexOf(lowerKey)?delete properties[key]:(value=properties[key],isTransformed?transformation.push(key+"("+value+")"):cssValues[key]=value);return transformation.length&&(cssValues[TRANSFORM]=transformation.join(" ")),cssValues}function animationProperty(element,property){if(transforms){var transform=element.css(TRANSFORM);if(transform==NONE)return"scale"==property?1:0;var match=transform.match(new RegExp(property+"\\s*\\(([\\d\\w\\.]+)")),computed=0;return match?computed=parseInteger(match[1]):(match=transform.match(matrix3dRegExp)||[0,0,0,0,0],property=property.toLowerCase(),translateXRegExp.test(property)?computed=parseFloat(match[3]/match[2]):"translatey"==property?computed=parseFloat(match[4]/match[2]):"scale"==property?computed=parseFloat(match[2]):"rotate"==property&&(computed=parseFloat(Math.atan2(match[2],match[1])))),computed}return parseFloat(element.css(property))}function capitalize(word){return word.charAt(0).toUpperCase()+word.substring(1)}function createEffect(name,definition){var effectClass=Effect.extend(definition),directions=effectClass.prototype.directions;fx[capitalize(name)]=effectClass,fx.Element.prototype[name]=function(direction,opt1,opt2,opt3){return new effectClass(this.element,direction,opt1,opt2,opt3)},each(directions,function(idx,theDirection){fx.Element.prototype[name+capitalize(theDirection)]=function(opt1,opt2,opt3){return new effectClass(this.element,theDirection,opt1,opt2,opt3)}})}function createToggleEffect(name,property,defaultStart,defaultEnd){createEffect(name,{directions:IN_OUT,startValue:function(value){return this._startValue=value,this},endValue:function(value){return this._endValue=value,this},shouldHide:function(){return this._shouldHide},prepare:function(start,end){var startValue,endValue,that=this,out="out"===this._direction,startDataValue=that.element.data(property),startDataValueIsSet=!(isNaN(startDataValue)||startDataValue==defaultStart);startValue=startDataValueIsSet?startDataValue:"undefined"!=typeof this._startValue?this._startValue:out?defaultStart:defaultEnd,endValue="undefined"!=typeof this._endValue?this._endValue:out?defaultEnd:defaultStart,this._reverse?(start[property]=endValue,end[property]=startValue):(start[property]=startValue,end[property]=endValue),that._shouldHide=end[property]===defaultEnd}})}function clipInHalf(container,direction){var vertical=kendo.directions[direction].vertical,size=container[vertical?HEIGHT:WIDTH]()/2+"px";return CLIPS[direction].replace("$size",size)}var kendo=window.kendo,fx=kendo.effects,each=$.each,extend=$.extend,proxy=$.proxy,support=kendo.support,browser=support.browser,transforms=support.transforms,transitions=support.transitions,scaleProperties={scale:0,scalex:0,scaley:0,scale3d:0},translateProperties={translate:0,translatex:0,translatey:0,translate3d:0},hasZoom="undefined"!=typeof document.documentElement.style.zoom&&!transforms,matrix3dRegExp=/matrix3?d?\s*\(.*,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?/i,cssParamsRegExp=/^(-?[\d\.\-]+)?[\w\s]*,?\s*(-?[\d\.\-]+)?[\w\s]*/i,translateXRegExp=/translatex?$/i,oldEffectsRegExp=/(zoom|fade|expand)(\w+)/,singleEffectRegExp=/(zoom|fade|expand)/,unitRegExp=/[xy]$/i,transformProps=["perspective","rotate","rotatex","rotatey","rotatez","rotate3d","scale","scalex","scaley","scalez","scale3d","skew","skewx","skewy","translate","translatex","translatey","translatez","translate3d","matrix","matrix3d"],transform2d=["rotate","scale","scalex","scaley","skew","skewx","skewy","translate","translatex","translatey","matrix"],transform2units={rotate:"deg",scale:"",skew:"px",translate:"px"},cssPrefix=transforms.css,round=Math.round,BLANK="",PX="px",NONE="none",AUTO="auto",WIDTH="width",HEIGHT="height",HIDDEN="hidden",ORIGIN="origin",ABORT_ID="abortId",OVERFLOW="overflow",TRANSLATE="translate",POSITION="position",COMPLETE_CALLBACK="completeCallback",TRANSITION=cssPrefix+"transition",TRANSFORM=cssPrefix+"transform",BACKFACE=cssPrefix+"backface-visibility",PERSPECTIVE=cssPrefix+"perspective",DEFAULT_PERSPECTIVE="1500px",TRANSFORM_PERSPECTIVE="perspective("+DEFAULT_PERSPECTIVE+")",directions=(support.mobileOS&&7==support.mobileOS.majorVersion,{left:{reverse:"right",property:"left",transition:"translatex",vertical:!1,modifier:-1},right:{reverse:"left",property:"left",transition:"translatex",vertical:!1,modifier:1},down:{reverse:"up",property:"top",transition:"translatey",vertical:!0,modifier:1},up:{reverse:"down",property:"top",transition:"translatey",vertical:!0,modifier:-1},top:{reverse:"bottom"},bottom:{reverse:"top"},"in":{reverse:"out",modifier:-1},out:{reverse:"in",modifier:1},vertical:{reverse:"vertical"},horizontal:{reverse:"horizontal"}});if(kendo.directions=directions,extend($.fn,{kendoStop:function(clearQueue,gotoEnd){return transitions?fx.stopQueue(this,clearQueue||!1,gotoEnd||!1):this.stop(clearQueue,gotoEnd)}}),transforms&&!transitions){each(transform2d,function(idx,value){$.fn[value]=function(val){if("undefined"==typeof val)return animationProperty(this,value);var that=$(this)[0],transformValue=value+"("+val+transform2units[value.replace(unitRegExp,"")]+")";return-1==that.style.cssText.indexOf(TRANSFORM)?$(this).css(TRANSFORM,transformValue):that.style.cssText=that.style.cssText.replace(new RegExp(value+"\\(.*?\\)","i"),transformValue),this},$.fx.step[value]=function(fx){$(fx.elem)[value](fx.now)}});var curProxy=$.fx.prototype.cur;$.fx.prototype.cur=function(){return-1!=transform2d.indexOf(this.prop)?parseFloat($(this.elem)[this.prop]()):curProxy.apply(this,arguments)}}kendo.toggleClass=function(element,classes,options,add){return classes&&(classes=classes.split(" "),transitions&&(options=extend({exclusive:"all",duration:400,ease:"ease-out"},options),element.css(TRANSITION,options.exclusive+" "+options.duration+"ms "+options.ease),setTimeout(function(){element.css(TRANSITION,"").css(HEIGHT)},options.duration)),each(classes,function(idx,value){element.toggleClass(value,add)})),element},kendo.parseEffects=function(input,mirror){var effects={};return"string"==typeof input?each(input.split(" "),function(idx,value){var redirectedEffect=!singleEffectRegExp.test(value),resolved=value.replace(oldEffectsRegExp,function(match,$1,$2){return $1+":"+$2.toLowerCase()}),effect=resolved.split(":"),direction=effect[1],effectBody={};effect.length>1&&(effectBody.direction=mirror&&redirectedEffect?directions[direction].reverse:direction),effects[effect[0]]=effectBody}):each(input,function(idx){var direction=this.direction;direction&&mirror&&!singleEffectRegExp.test(idx)&&(this.direction=directions[direction].reverse),effects[idx]=this}),effects},transitions&&extend(fx,{transition:function(element,properties,options){var css,timeoutID,delay=0,oldKeys=element.data("keys")||[];options=extend({duration:200,ease:"ease-out",complete:null,exclusive:"all"},options);var stopTransitionCalled=!1,stopTransition=function(){stopTransitionCalled||(stopTransitionCalled=!0,timeoutID&&(clearTimeout(timeoutID),timeoutID=null),element.removeData(ABORT_ID).dequeue().css(TRANSITION,"").css(TRANSITION),options.complete.call(element))};options.duration=$.fx?$.fx.speeds[options.duration]||options.duration:options.duration,css=normalizeCSS(element,properties),$.merge(oldKeys,keys(css)),element.data("keys",$.unique(oldKeys)).height(),element.css(TRANSITION,options.exclusive+" "+options.duration+"ms "+options.ease).css(TRANSITION),element.css(css).css(TRANSFORM),transitions.event&&(element.one(transitions.event,stopTransition),0!==options.duration&&(delay=500)),timeoutID=setTimeout(stopTransition,options.duration+delay),element.data(ABORT_ID,timeoutID),element.data(COMPLETE_CALLBACK,stopTransition)},stopQueue:function(element,clearQueue,gotoEnd){var cssValues,taskKeys=element.data("keys"),retainPosition=!gotoEnd&&taskKeys,completeCallback=element.data(COMPLETE_CALLBACK);return retainPosition&&(cssValues=kendo.getComputedStyles(element[0],taskKeys)),completeCallback&&completeCallback(),retainPosition&&element.css(cssValues),element.removeData("keys").stop(clearQueue)}});var EffectSet=kendo.Class.extend({init:function(element,options){var that=this;that.element=element,that.effects=[],that.options=options,that.restore=[]},run:function(effects){var effect,idx,jdx,target,children,childrenLength,that=this,length=effects.length,element=that.element,options=that.options,deferred=$.Deferred(),start={},end={};for(that.effects=effects,deferred.then($.proxy(that,"complete")),element.data("animating",!0),idx=0;length>idx;idx++)for(effect=effects[idx],effect.setReverse(options.reverse),effect.setOptions(options),that.addRestoreProperties(effect.restore),effect.prepare(start,end),children=effect.children(),jdx=0,childrenLength=children.length;childrenLength>jdx;jdx++)children[jdx].duration(options.duration).run();for(var effectName in options.effects)extend(end,options.effects[effectName].properties);for(element.is(":visible")||extend(start,{display:element.data("olddisplay")||"block"}),transforms&&!options.reset&&(target=element.data("targetTransform"),target&&(start=extend(target,start))),start=normalizeCSS(element,start),transforms&&!transitions&&(start=strip3DTransforms(start)),element.css(start).css(TRANSFORM),idx=0;length>idx;idx++)effects[idx].setup();return options.init&&options.init(),element.data("targetTransform",end),fx.animate(element,end,extend({},options,{complete:deferred.resolve})),deferred.promise()},stop:function(){$(this.element).kendoStop(!0,!0)},addRestoreProperties:function(restore){for(var value,element=this.element,i=0,length=restore.length;length>i;i++)value=restore[i],this.restore.push(value),element.data(value)||element.data(value,element.css(value))},restoreCallback:function(){for(var element=this.element,i=0,length=this.restore.length;length>i;i++){var value=this.restore[i];element.css(value,element.data(value))}},complete:function(){var that=this,idx=0,element=that.element,options=that.options,effects=that.effects,length=effects.length;for(element.removeData("animating").dequeue(),options.hide&&element.data("olddisplay",element.css("display")).hide(),this.restoreCallback(),hasZoom&&!transforms&&setTimeout($.proxy(this,"restoreCallback"),0);length>idx;idx++)effects[idx].teardown();options.completeCallback&&options.completeCallback(element)}});fx.promise=function(element,options){var effectClass,effect,effects=[],effectSet=new EffectSet(element,options),parsedEffects=kendo.parseEffects(options.effects);options.effects=parsedEffects;for(var effectName in parsedEffects)effectClass=fx[capitalize(effectName)],effectClass&&(effect=new effectClass(element,parsedEffects[effectName].direction),effects.push(effect));effects[0]?effectSet.run(effects):(element.is(":visible")||element.css({display:element.data("olddisplay")||"block"}).css("display"),options.init&&options.init(),element.dequeue(),effectSet.complete())},extend(fx,{animate:function(elements,properties,options){var useTransition=options.transition!==!1;delete options.transition,transitions&&"transition"in fx&&useTransition?fx.transition(elements,properties,options):transforms?elements.animate(strip3DTransforms(properties),{queue:!1,show:!1,hide:!1,duration:options.duration,complete:options.complete}):elements.each(function(){var element=$(this),multiple={};each(transformProps,function(idx,value){var params,currentValue=properties?properties[value]+" ":null;if(currentValue){var single=properties;if(value in scaleProperties&&properties[value]!==undefined)params=currentValue.match(cssParamsRegExp),transforms&&extend(single,{scale:+params[0]});else if(value in translateProperties&&properties[value]!==undefined){var position=element.css(POSITION),isFixed="absolute"==position||"fixed"==position;element.data(TRANSLATE)||(isFixed?element.data(TRANSLATE,{top:parseCSS(element,"top")||0,left:parseCSS(element,"left")||0,bottom:parseCSS(element,"bottom"),right:parseCSS(element,"right")}):element.data(TRANSLATE,{top:parseCSS(element,"marginTop")||0,left:parseCSS(element,"marginLeft")||0}));var originalPosition=element.data(TRANSLATE);if(params=currentValue.match(cssParamsRegExp)){var dX=value==TRANSLATE+"y"?0:+params[1],dY=value==TRANSLATE+"y"?+params[1]:+params[2];isFixed?(isNaN(originalPosition.right)?isNaN(dX)||extend(single,{left:originalPosition.left+dX}):isNaN(dX)||extend(single,{right:originalPosition.right-dX}),isNaN(originalPosition.bottom)?isNaN(dY)||extend(single,{top:originalPosition.top+dY}):isNaN(dY)||extend(single,{bottom:originalPosition.bottom-dY})):(isNaN(dX)||extend(single,{marginLeft:originalPosition.left+dX}),isNaN(dY)||extend(single,{marginTop:originalPosition.top+dY}))}}!transforms&&"scale"!=value&&value in single&&delete single[value],single&&extend(multiple,single)}}),browser.msie&&delete multiple.scale,element.animate(multiple,{queue:!1,show:!1,hide:!1,duration:options.duration,complete:options.complete})})}}),fx.animatedPromise=fx.promise;var Effect=kendo.Class.extend({init:function(element,direction){var that=this;that.element=element,that._direction=direction,that.options={},that._additionalEffects=[],that.restore||(that.restore=[])},reverse:function(){return this._reverse=!0,this.run()},play:function(){return this._reverse=!1,this.run()},add:function(additional){return this._additionalEffects.push(additional),this},direction:function(value){return this._direction=value,this},duration:function(duration){return this._duration=duration,this},compositeRun:function(){var that=this,effectSet=new EffectSet(that.element,{reverse:that._reverse,duration:that._duration}),effects=that._additionalEffects.concat([that]);return effectSet.run(effects)},run:function(){if(this._additionalEffects&&this._additionalEffects[0])return this.compositeRun();var value,target,that=this,element=that.element,idx=0,restore=that.restore,length=restore.length,deferred=$.Deferred(),start={},end={},children=that.children(),childrenLength=children.length;for(deferred.then($.proxy(that,"_complete")),element.data("animating",!0),idx=0;length>idx;idx++)value=restore[idx],element.data(value)||element.data(value,element.css(value));for(idx=0;childrenLength>idx;idx++)children[idx].duration(that._duration).run();return that.prepare(start,end),element.is(":visible")||extend(start,{display:element.data("olddisplay")||"block"}),transforms&&(target=element.data("targetTransform"),target&&(start=extend(target,start))),start=normalizeCSS(element,start),transforms&&!transitions&&(start=strip3DTransforms(start)),element.css(start).css(TRANSFORM),that.setup(),element.data("targetTransform",end),fx.animate(element,end,{duration:that._duration,complete:deferred.resolve}),deferred.promise()},stop:function(){var idx=0,children=this.children(),childrenLength=children.length;for(idx=0;childrenLength>idx;idx++)children[idx].stop();return $(this.element).kendoStop(!0,!0),this},restoreCallback:function(){for(var element=this.element,i=0,length=this.restore.length;length>i;i++){var value=this.restore[i];element.css(value,element.data(value))}},_complete:function(){var that=this,element=that.element;element.removeData("animating").dequeue(),that.restoreCallback(),that.shouldHide()&&element.data("olddisplay",element.css("display")).hide(),hasZoom&&!transforms&&setTimeout($.proxy(that,"restoreCallback"),0),that.teardown()},setOptions:function(options){extend(!0,this.options,options)},children:function(){return[]},shouldHide:$.noop,setup:$.noop,prepare:$.noop,teardown:$.noop,directions:[],setReverse:function(reverse){return this._reverse=reverse,this}}),FOUR_DIRECTIONS=["left","right","up","down"],IN_OUT=["in","out"];createEffect("slideIn",{directions:FOUR_DIRECTIONS,divisor:function(value){return this.options.divisor=value,this},prepare:function(start,end){var tmp,that=this,element=that.element,direction=directions[that._direction],offset=-direction.modifier*(direction.vertical?element.outerHeight():element.outerWidth()),startValue=offset/(that.options&&that.options.divisor||1)+PX,endValue="0px";that._reverse&&(tmp=start,start=end,end=tmp),transforms?(start[direction.transition]=startValue,end[direction.transition]=endValue):(start[direction.property]=startValue,end[direction.property]=endValue)}}),createEffect("tile",{directions:FOUR_DIRECTIONS,init:function(element,direction,previous){Effect.prototype.init.call(this,element,direction),this.options={previous:previous}},
previousDivisor:function(value){return this.options.previousDivisor=value,this},children:function(){var that=this,reverse=that._reverse,previous=that.options.previous,divisor=that.options.previousDivisor||1,dir=that._direction,children=[kendo.fx(that.element).slideIn(dir).setReverse(reverse)];return previous&&children.push(kendo.fx(previous).slideIn(directions[dir].reverse).divisor(divisor).setReverse(!reverse)),children}}),createToggleEffect("fade","opacity",1,0),createToggleEffect("zoom","scale",1,.01),createEffect("slideMargin",{prepare:function(start,end){var margin,that=this,element=that.element,options=that.options,origin=element.data(ORIGIN),offset=options.offset,reverse=that._reverse;reverse||null!==origin||element.data(ORIGIN,parseFloat(element.css("margin-"+options.axis))),margin=element.data(ORIGIN)||0,end["margin-"+options.axis]=reverse?margin:margin+offset}}),createEffect("slideTo",{prepare:function(start,end){var that=this,element=that.element,options=that.options,offset=options.offset.split(","),reverse=that._reverse;transforms?(end.translatex=reverse?0:offset[0],end.translatey=reverse?0:offset[1]):(end.left=reverse?0:offset[0],end.top=reverse?0:offset[1]),element.css("left")}}),createEffect("expand",{directions:["horizontal","vertical"],restore:[OVERFLOW],prepare:function(start,end){var that=this,element=that.element,options=that.options,reverse=that._reverse,property="vertical"===that._direction?HEIGHT:WIDTH,setLength=element[0].style[property],oldLength=element.data(property),length=parseFloat(oldLength||setLength),realLength=round(element.css(property,AUTO)[property]());start.overflow=HIDDEN,length=options&&options.reset?realLength||length:length||realLength,end[property]=(reverse?0:length)+PX,start[property]=(reverse?length:0)+PX,oldLength===undefined&&element.data(property,setLength)},shouldHide:function(){return this._reverse},teardown:function(){var that=this,element=that.element,property="vertical"===that._direction?HEIGHT:WIDTH,length=element.data(property);length!=AUTO&&length!==BLANK||setTimeout(function(){element.css(property,AUTO).css(property)},0)}});var TRANSFER_START_STATE={position:"absolute",marginLeft:0,marginTop:0,scale:1};createEffect("transfer",{init:function(element,target){this.element=element,this.options={target:target},this.restore=[]},setup:function(){this.element.appendTo(document.body)},prepare:function(start,end){var that=this,element=that.element,outerBox=fx.box(element),innerBox=fx.box(that.options.target),currentScale=animationProperty(element,"scale"),scale=fx.fillScale(innerBox,outerBox),transformOrigin=fx.transformOrigin(innerBox,outerBox);extend(start,TRANSFER_START_STATE),end.scale=1,element.css(TRANSFORM,"scale(1)").css(TRANSFORM),element.css(TRANSFORM,"scale("+currentScale+")"),start.top=outerBox.top,start.left=outerBox.left,start.transformOrigin=transformOrigin.x+PX+" "+transformOrigin.y+PX,that._reverse?start.scale=scale:end.scale=scale}});var CLIPS={top:"rect(auto auto $size auto)",bottom:"rect($size auto auto auto)",left:"rect(auto $size auto auto)",right:"rect(auto auto auto $size)"},ROTATIONS={top:{start:"rotatex(0deg)",end:"rotatex(180deg)"},bottom:{start:"rotatex(-180deg)",end:"rotatex(0deg)"},left:{start:"rotatey(0deg)",end:"rotatey(-180deg)"},right:{start:"rotatey(180deg)",end:"rotatey(0deg)"}};createEffect("turningPage",{directions:FOUR_DIRECTIONS,init:function(element,direction,container){Effect.prototype.init.call(this,element,direction),this._container=container},prepare:function(start,end){var that=this,reverse=that._reverse,direction=reverse?directions[that._direction].reverse:that._direction,rotation=ROTATIONS[direction];start.zIndex=1,that._clipInHalf&&(start.clip=clipInHalf(that._container,kendo.directions[direction].reverse)),start[BACKFACE]=HIDDEN,end[TRANSFORM]=TRANSFORM_PERSPECTIVE+(reverse?rotation.start:rotation.end),start[TRANSFORM]=TRANSFORM_PERSPECTIVE+(reverse?rotation.end:rotation.start)},setup:function(){this._container.append(this.element)},face:function(value){return this._face=value,this},shouldHide:function(){var that=this,reverse=that._reverse,face=that._face;return reverse&&!face||!reverse&&face},clipInHalf:function(value){return this._clipInHalf=value,this},temporary:function(){return this.element.addClass("temp-page"),this}}),createEffect("staticPage",{directions:FOUR_DIRECTIONS,init:function(element,direction,container){Effect.prototype.init.call(this,element,direction),this._container=container},restore:["clip"],prepare:function(start,end){var that=this,direction=that._reverse?directions[that._direction].reverse:that._direction;start.clip=clipInHalf(that._container,direction),start.opacity=.999,end.opacity=1},shouldHide:function(){var that=this,reverse=that._reverse,face=that._face;return reverse&&!face||!reverse&&face},face:function(value){return this._face=value,this}}),createEffect("pageturn",{directions:["horizontal","vertical"],init:function(element,direction,face,back){Effect.prototype.init.call(this,element,direction),this.options={},this.options.face=face,this.options.back=back},children:function(){var temp,that=this,options=that.options,direction="horizontal"===that._direction?"left":"top",reverseDirection=kendo.directions[direction].reverse,reverse=that._reverse,faceClone=options.face.clone(!0).removeAttr("id"),backClone=options.back.clone(!0).removeAttr("id"),element=that.element;return reverse&&(temp=direction,direction=reverseDirection,reverseDirection=temp),[kendo.fx(options.face).staticPage(direction,element).face(!0).setReverse(reverse),kendo.fx(options.back).staticPage(reverseDirection,element).setReverse(reverse),kendo.fx(faceClone).turningPage(direction,element).face(!0).clipInHalf(!0).temporary().setReverse(reverse),kendo.fx(backClone).turningPage(reverseDirection,element).clipInHalf(!0).temporary().setReverse(reverse)]},prepare:function(start,end){start[PERSPECTIVE]=DEFAULT_PERSPECTIVE,start.transformStyle="preserve-3d",start.opacity=.999,end.opacity=1},teardown:function(){this.element.find(".temp-page").remove()}}),createEffect("flip",{directions:["horizontal","vertical"],init:function(element,direction,face,back){Effect.prototype.init.call(this,element,direction),this.options={},this.options.face=face,this.options.back=back},children:function(){var temp,that=this,options=that.options,direction="horizontal"===that._direction?"left":"top",reverseDirection=kendo.directions[direction].reverse,reverse=that._reverse,element=that.element;return reverse&&(temp=direction,direction=reverseDirection,reverseDirection=temp),[kendo.fx(options.face).turningPage(direction,element).face(!0).setReverse(reverse),kendo.fx(options.back).turningPage(reverseDirection,element).setReverse(reverse)]},prepare:function(start){start[PERSPECTIVE]=DEFAULT_PERSPECTIVE,start.transformStyle="preserve-3d"}});var RESTORE_OVERFLOW=!support.mobileOS.android,IGNORE_TRANSITION_EVENT_SELECTOR=".km-touch-scrollbar, .km-actionsheet-wrapper";createEffect("replace",{_before:$.noop,_after:$.noop,init:function(element,previous,transitionClass){Effect.prototype.init.call(this,element),this._previous=$(previous),this._transitionClass=transitionClass},duration:function(){throw new Error("The replace effect does not support duration setting; the effect duration may be customized through the transition class rule")},beforeTransition:function(callback){return this._before=callback,this},afterTransition:function(callback){return this._after=callback,this},_both:function(){return $().add(this._element).add(this._previous)},_containerClass:function(){var direction=this._direction,containerClass="k-fx k-fx-start k-fx-"+this._transitionClass;return direction&&(containerClass+=" k-fx-"+direction),this._reverse&&(containerClass+=" k-fx-reverse"),containerClass},complete:function(e){if(!(!this.deferred||e&&$(e.target).is(IGNORE_TRANSITION_EVENT_SELECTOR))){var container=this.container;container.removeClass("k-fx-end").removeClass(this._containerClass()).off(transitions.event,this.completeProxy),this._previous.hide().removeClass("k-fx-current"),this.element.removeClass("k-fx-next"),RESTORE_OVERFLOW&&container.css(OVERFLOW,""),this.isAbsolute||this._both().css(POSITION,""),this.deferred.resolve(),delete this.deferred}},run:function(){if(this._additionalEffects&&this._additionalEffects[0])return this.compositeRun();var originalOverflow,that=this,element=that.element,previous=that._previous,container=element.parents().filter(previous.parents()).first(),both=that._both(),deferred=$.Deferred(),originalPosition=element.css(POSITION);return container.length||(container=element.parent()),this.container=container,this.deferred=deferred,this.isAbsolute="absolute"==originalPosition,this.isAbsolute||both.css(POSITION,"absolute"),RESTORE_OVERFLOW&&(originalOverflow=container.css(OVERFLOW),container.css(OVERFLOW,"hidden")),transitions?(element.addClass("k-fx-hidden"),container.addClass(this._containerClass()),this.completeProxy=$.proxy(this,"complete"),container.on(transitions.event,this.completeProxy),kendo.animationFrame(function(){element.removeClass("k-fx-hidden").addClass("k-fx-next"),previous.css("display","").addClass("k-fx-current"),that._before(previous,element),kendo.animationFrame(function(){container.removeClass("k-fx-start").addClass("k-fx-end"),that._after(previous,element)})})):this.complete(),deferred.promise()},stop:function(){this.complete()}});var Animation=kendo.Class.extend({init:function(){var that=this;that._tickProxy=proxy(that._tick,that),that._started=!1},tick:$.noop,done:$.noop,onEnd:$.noop,onCancel:$.noop,start:function(){this.enabled()&&(this.done()?this.onEnd():(this._started=!0,kendo.animationFrame(this._tickProxy)))},enabled:function(){return!0},cancel:function(){this._started=!1,this.onCancel()},_tick:function(){var that=this;that._started&&(that.tick(),that.done()?(that._started=!1,that.onEnd()):kendo.animationFrame(that._tickProxy))}}),Transition=Animation.extend({init:function(options){var that=this;extend(that,options),Animation.fn.init.call(that)},done:function(){return this.timePassed()>=this.duration},timePassed:function(){return Math.min(this.duration,new Date-this.startDate)},moveTo:function(options){var that=this,movable=that.movable;that.initial=movable[that.axis],that.delta=options.location-that.initial,that.duration="number"==typeof options.duration?options.duration:300,that.tick=that._easeProxy(options.ease),that.startDate=new Date,that.start()},_easeProxy:function(ease){var that=this;return function(){that.movable.moveAxis(that.axis,ease(that.timePassed(),that.initial,that.delta,that.duration))}}});extend(Transition,{easeOutExpo:function(t,b,c,d){return t==d?b+c:c*(-Math.pow(2,-10*t/d)+1)+b},easeOutBack:function(t,b,c,d,s){return s=1.70158,c*((t=t/d-1)*t*((s+1)*t+s)+1)+b}}),fx.Animation=Animation,fx.Transition=Transition,fx.createEffect=createEffect,fx.box=function(element){element=$(element);var result=element.offset();return result.width=element.outerWidth(),result.height=element.outerHeight(),result},fx.transformOrigin=function(inner,outer){var x=(inner.left-outer.left)*outer.width/(outer.width-inner.width),y=(inner.top-outer.top)*outer.height/(outer.height-inner.height);return{x:isNaN(x)?0:x,y:isNaN(y)?0:y}},fx.fillScale=function(inner,outer){return Math.min(inner.width/outer.width,inner.height/outer.height)},fx.fitScale=function(inner,outer){return Math.max(inner.width/outer.width,inner.height/outer.height)}}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(_,f){f()}),function(f,define){define(["./kendo.core","./kendo.data.odata","./kendo.data.xml"],f)}(function(){return function($,undefined){function eventHandler(context,type,field,prefix){return function(e){var key,event={};for(key in e)event[key]=e[key];prefix?event.field=field+"."+e.field:event.field=field,type==CHANGE&&context._notifyChange&&context._notifyChange(event),context.trigger(type,event)}}function equal(x,y){if(x===y)return!0;var field,xtype=$.type(x),ytype=$.type(y);if(xtype!==ytype)return!1;if("date"===xtype)return x.getTime()===y.getTime();if("object"!==xtype&&"array"!==xtype)return!1;for(field in x)if(!equal(x[field],y[field]))return!1;return!0}function getFieldByName(obj,name){var field,fieldName;for(fieldName in obj){if(field=obj[fieldName],isPlainObject(field)&&field.field&&field.field===name)return field;if(field===name)return field}return null}function Query(data){this.data=data||[]}function normalizeSort(field,dir){if(field){var descriptor=typeof field===STRING?{field:field,dir:dir}:field,descriptors=isArray(descriptor)?descriptor:descriptor!==undefined?[descriptor]:[];return grep(descriptors,function(d){return!!d.dir})}}function normalizeOperator(expression){var idx,length,filter,operator,filters=expression.filters;if(filters)for(idx=0,length=filters.length;length>idx;idx++)filter=filters[idx],operator=filter.operator,operator&&typeof operator===STRING&&(filter.operator=operatorMap[operator.toLowerCase()]||operator),normalizeOperator(filter)}function normalizeFilter(expression){return expression&&!isEmptyObject(expression)?(!isArray(expression)&&expression.filters||(expression={logic:"and",filters:isArray(expression)?expression:[expression]}),normalizeOperator(expression),expression):void 0}function normalizeAggregate(expressions){return isArray(expressions)?expressions:[expressions]}function normalizeGroup(field,dir){var descriptor=typeof field===STRING?{field:field,dir:dir}:field,descriptors=isArray(descriptor)?descriptor:descriptor!==undefined?[descriptor]:[];return map(descriptors,function(d){return{field:d.field,dir:d.dir||"asc",aggregates:d.aggregates}})}function groupValueComparer(a,b){return a&&a.getTime&&b&&b.getTime?a.getTime()===b.getTime():a===b}function calculateAggregate(accumulator,aggregates,item,index,length,state){aggregates=aggregates||[];var idx,aggr,functionName,len=aggregates.length;for(idx=0;len>idx;idx++){aggr=aggregates[idx],functionName=aggr.aggregate;var field=aggr.field;accumulator[field]=accumulator[field]||{},state[field]=state[field]||{},state[field][functionName]=state[field][functionName]||{},accumulator[field][functionName]=functions[functionName.toLowerCase()](accumulator[field][functionName],item,kendo.accessor(field),index,length,state[field][functionName])}}function isNumber(val){return"number"==typeof val&&!isNaN(val)}function isDate(val){return val&&val.getTime}function toJSON(array){var idx,length=array.length,result=new Array(length);for(idx=0;length>idx;idx++)result[idx]=array[idx].toJSON();return result}function serializeRecords(data,getters,modelInstance,originalFieldNames,fieldNames){var record,getter,originalName,idx,length;for(idx=0,length=data.length;length>idx;idx++){record=data[idx];for(getter in getters)originalName=fieldNames[getter],originalName&&originalName!==getter&&(record[originalName]=getters[getter](record),delete record[getter])}}function convertRecords(data,getters,modelInstance,originalFieldNames,fieldNames){var record,getter,originalName,idx,length;for(idx=0,length=data.length;length>idx;idx++){record=data[idx];for(getter in getters)record[getter]=modelInstance._parse(getter,getters[getter](record)),originalName=fieldNames[getter],originalName&&originalName!==getter&&delete record[originalName]}}function convertGroup(data,getters,modelInstance,originalFieldNames,fieldNames){var record,idx,fieldName,length;for(idx=0,length=data.length;length>idx;idx++)record=data[idx],fieldName=originalFieldNames[record.field],fieldName&&fieldName!=record.field&&(record.field=fieldName),record.value=modelInstance._parse(record.field,record.value),record.hasSubgroups?convertGroup(record.items,getters,modelInstance,originalFieldNames,fieldNames):convertRecords(record.items,getters,modelInstance,originalFieldNames,fieldNames)}function wrapDataAccess(originalFunction,model,converter,getters,originalFieldNames,fieldNames){return function(data){return data=originalFunction(data),data&&!isEmptyObject(getters)&&("[object Array]"===toString.call(data)||data instanceof ObservableArray||(data=[data]),converter(data,getters,new model,originalFieldNames,fieldNames)),data||[]}}function mergeGroups(target,dest,skip,take){for(var group,items,idx=0;dest.length&&take;){group=dest[idx],items=group.items;var length=items.length;if(target&&target.field===group.field&&target.value===group.value?(target.hasSubgroups&&target.items.length?mergeGroups(target.items[target.items.length-1],group.items,skip,take):(items=items.slice(skip,skip+take),target.items=target.items.concat(items)),dest.splice(idx--,1)):group.hasSubgroups&&items.length?(mergeGroups(group,items,skip,take),group.items.length||dest.splice(idx--,1)):(items=items.slice(skip,skip+take),group.items=items,group.items.length||dest.splice(idx--,1)),0===items.length?skip-=length:(skip=0,take-=items.length),++idx>=dest.length)break}idx<dest.length&&dest.splice(idx,dest.length-idx)}function flattenGroups(data){var idx,length,items,itemIndex,result=[];for(idx=0,length=data.length;length>idx;idx++){var group=data.at(idx);if(group.hasSubgroups)result=result.concat(flattenGroups(group.items));else for(items=group.items,itemIndex=0;itemIndex<items.length;itemIndex++)result.push(items.at(itemIndex))}return result}function wrapGroupItems(data,model){var idx,length,group;if(model)for(idx=0,length=data.length;length>idx;idx++)group=data.at(idx),group.hasSubgroups?wrapGroupItems(group.items,model):group.items=new LazyObservableArray(group.items,model)}function eachGroupItems(data,func){for(var idx=0,length=data.length;length>idx;idx++)if(data[idx].hasSubgroups){if(eachGroupItems(data[idx].items,func))return!0}else if(func(data[idx].items,data[idx]))return!0}function replaceInRanges(ranges,data,item,observable){for(var idx=0;idx<ranges.length&&ranges[idx].data!==data&&!replaceInRange(ranges[idx].data,item,observable);idx++);}function replaceInRange(items,item,observable){for(var idx=0,length=items.length;length>idx;idx++){if(items[idx]&&items[idx].hasSubgroups)return replaceInRange(items[idx].items,item,observable);if(items[idx]===item||items[idx]===observable)return items[idx]=observable,!0}}function replaceWithObservable(view,data,ranges,type,serverGrouping){for(var viewIndex=0,length=view.length;length>viewIndex;viewIndex++){var item=view[viewIndex];if(item&&!(item instanceof type))if(item.hasSubgroups===undefined||serverGrouping){for(var idx=0;idx<data.length;idx++)if(data[idx]===item){view[viewIndex]=data.at(idx),replaceInRanges(ranges,data,item,view[viewIndex]);break}}else replaceWithObservable(item.items,data,ranges,type,serverGrouping)}}function removeModel(data,model){var idx,length;for(idx=0,length=data.length;length>idx;idx++){var dataItem=data.at(idx);if(dataItem.uid==model.uid)return data.splice(idx,1),dataItem}}function indexOfPristineModel(data,model){return model?indexOf(data,function(item){return item.uid?item.uid==model.uid:item[model.idField]===model.id}):-1}function indexOfModel(data,model){return model?indexOf(data,function(item){return item.uid==model.uid}):-1}function indexOf(data,comparer){var idx,length;for(idx=0,length=data.length;length>idx;idx++)if(comparer(data[idx]))return idx;return-1}function fieldNameFromModel(fields,name){if(fields&&!isEmptyObject(fields)){var fieldName,descriptor=fields[name];return fieldName=isPlainObject(descriptor)?descriptor.from||descriptor.field||name:fields[name]||name,isFunction(fieldName)?name:fieldName}return name}function convertFilterDescriptorsField(descriptor,model){var idx,length,target={};for(var field in descriptor)"filters"!==field&&(target[field]=descriptor[field]);if(descriptor.filters)for(target.filters=[],idx=0,length=descriptor.filters.length;length>idx;idx++)target.filters[idx]=convertFilterDescriptorsField(descriptor.filters[idx],model);else target.field=fieldNameFromModel(model.fields,target.field);return target}function convertDescriptorsField(descriptors,model){var idx,length,target,descriptor,result=[];for(idx=0,length=descriptors.length;length>idx;idx++){target={},descriptor=descriptors[idx];for(var field in descriptor)target[field]=descriptor[field];target.field=fieldNameFromModel(model.fields,target.field),target.aggregates&&isArray(target.aggregates)&&(target.aggregates=convertDescriptorsField(target.aggregates,model)),result.push(target)}return result}function inferSelect(select,fields){select=$(select)[0];var idx,length,optgroup,option,record,value,options=select.options,firstField=fields[0],secondField=fields[1],data=[];for(idx=0,length=options.length;length>idx;idx++)record={},option=options[idx],optgroup=option.parentNode,optgroup===select&&(optgroup=null),option.disabled||optgroup&&optgroup.disabled||(optgroup&&(record.optgroup=optgroup.label),record[firstField.field]=option.text,value=option.attributes.value,value=value&&value.specified?option.value:option.text,record[secondField.field]=value,data.push(record));return data}function inferTable(table,fields){var idx,length,fieldIndex,cells,record,cell,empty,tbody=$(table)[0].tBodies[0],rows=tbody?tbody.rows:[],fieldCount=fields.length,data=[];for(idx=0,length=rows.length;length>idx;idx++){for(record={},empty=!0,cells=rows[idx].cells,fieldIndex=0;fieldCount>fieldIndex;fieldIndex++)cell=cells[fieldIndex],"th"!==cell.nodeName.toLowerCase()&&(empty=!1,record[fields[fieldIndex].field]=cell.innerHTML);empty||data.push(record)}return data}function dataMethod(name){return function(){var data=this._data,result=DataSource.fn[name].apply(this,slice.call(arguments));return this._data!=data&&this._attachBubbleHandlers(),result}}function inferList(list,fields){function elements(collection,tagName){return collection.filter(tagName).add(collection.find(tagName))}var idx,length,record,item,id,textChild,className,children,items=$(list).children(),data=[],textField=fields[0].field,urlField=fields[1]&&fields[1].field,spriteCssClassField=fields[2]&&fields[2].field,imageUrlField=fields[3]&&fields[3].field;for(idx=0,length=items.length;length>idx;idx++)record={_loaded:!0},item=items.eq(idx),textChild=item[0].firstChild,children=item.children(),list=children.filter("ul"),children=children.filter(":not(ul)"),id=item.attr("data-id"),id&&(record.id=id),textChild&&(record[textField]=3==textChild.nodeType?textChild.nodeValue:children.text()),urlField&&(record[urlField]=elements(children,"a").attr("href")),imageUrlField&&(record[imageUrlField]=elements(children,"img").attr("src")),spriteCssClassField&&(className=elements(children,".k-sprite").prop("className"),record[spriteCssClassField]=className&&$.trim(className.replace("k-sprite",""))),list.length&&(record.items=inferList(list.eq(0),fields)),"true"==item.attr("data-hasChildren")&&(record.hasChildren=!0),data.push(record);return data}var map,extend=$.extend,proxy=$.proxy,isPlainObject=$.isPlainObject,isEmptyObject=$.isEmptyObject,isArray=$.isArray,grep=$.grep,ajax=$.ajax,each=$.each,noop=$.noop,kendo=window.kendo,isFunction=kendo.isFunction,Observable=kendo.Observable,Class=kendo.Class,STRING="string",FUNCTION="function",CREATE="create",READ="read",UPDATE="update",DESTROY="destroy",CHANGE="change",SYNC="sync",GET="get",ERROR="error",REQUESTSTART="requestStart",PROGRESS="progress",REQUESTEND="requestEnd",crud=[CREATE,READ,UPDATE,DESTROY],identity=function(o){return o},getter=kendo.getter,stringify=kendo.stringify,math=Math,push=[].push,join=[].join,pop=[].pop,splice=[].splice,shift=[].shift,slice=[].slice,unshift=[].unshift,toString={}.toString,stableSort=kendo.support.stableSort,dateRegExp=/^\/Date\((.*?)\)\/$/,newLineRegExp=/(\r+|\n+)/g,quoteRegExp=/(?=['\\])/g,ObservableArray=Observable.extend({init:function(array,type){var that=this;that.type=type||ObservableObject,Observable.fn.init.call(that),that.length=array.length,that.wrapAll(array,that)},at:function(index){return this[index]},toJSON:function(){var idx,value,length=this.length,json=new Array(length);for(idx=0;length>idx;idx++)value=this[idx],value instanceof ObservableObject&&(value=value.toJSON()),json[idx]=value;return json},parent:noop,wrapAll:function(source,target){var idx,length,that=this,parent=function(){return that};for(target=target||[],idx=0,length=source.length;length>idx;idx++)target[idx]=that.wrap(source[idx],parent);return target},wrap:function(object,parent){var observable,that=this;return null!==object&&"[object Object]"===toString.call(object)&&(observable=object instanceof that.type||object instanceof Model,observable||(object=object instanceof ObservableObject?object.toJSON():object,object=new that.type(object)),object.parent=parent,object.bind(CHANGE,function(e){that.trigger(CHANGE,{field:e.field,node:e.node,index:e.index,items:e.items||[this],action:e.node?e.action||"itemloaded":"itemchange"})})),object},push:function(){var result,index=this.length,items=this.wrapAll(arguments);return result=push.apply(this,items),this.trigger(CHANGE,{action:"add",index:index,items:items}),result},slice:slice,sort:[].sort,join:join,pop:function(){var length=this.length,result=pop.apply(this);return length&&this.trigger(CHANGE,{action:"remove",index:length-1,items:[result]}),result},splice:function(index,howMany,item){var result,i,len,items=this.wrapAll(slice.call(arguments,2));if(result=splice.apply(this,[index,howMany].concat(items)),result.length)for(this.trigger(CHANGE,{action:"remove",index:index,items:result}),i=0,len=result.length;len>i;i++)result[i]&&result[i].children&&result[i].unbind(CHANGE);return item&&this.trigger(CHANGE,{action:"add",index:index,items:items}),result},shift:function(){var length=this.length,result=shift.apply(this);return length&&this.trigger(CHANGE,{action:"remove",index:0,items:[result]}),result},unshift:function(){var result,items=this.wrapAll(arguments);return result=unshift.apply(this,items),this.trigger(CHANGE,{action:"add",index:0,items:items}),result},indexOf:function(item){var idx,length,that=this;for(idx=0,length=that.length;length>idx;idx++)if(that[idx]===item)return idx;return-1},forEach:function(callback){for(var idx=0,length=this.length;length>idx;idx++)callback(this[idx],idx,this)},map:function(callback){for(var idx=0,result=[],length=this.length;length>idx;idx++)result[idx]=callback(this[idx],idx,this);return result},filter:function(callback){for(var item,idx=0,result=[],length=this.length;length>idx;idx++)item=this[idx],callback(item,idx,this)&&(result[result.length]=item);return result},find:function(callback){for(var item,idx=0,length=this.length;length>idx;idx++)if(item=this[idx],callback(item,idx,this))return item},every:function(callback){for(var item,idx=0,length=this.length;length>idx;idx++)if(item=this[idx],!callback(item,idx,this))return!1;return!0},some:function(callback){for(var item,idx=0,length=this.length;length>idx;idx++)if(item=this[idx],callback(item,idx,this))return!0;return!1},remove:function(item){var idx=this.indexOf(item);-1!==idx&&this.splice(idx,1)},empty:function(){this.splice(0,this.length)}}),LazyObservableArray=ObservableArray.extend({init:function(data,type){Observable.fn.init.call(this),this.type=type||ObservableObject;for(var idx=0;idx<data.length;idx++)this[idx]=data[idx];this.length=idx,this._parent=proxy(function(){return this},this)},at:function(index){var item=this[index];return item instanceof this.type?item.parent=this._parent:item=this[index]=this.wrap(item,this._parent),item}}),ObservableObject=Observable.extend({init:function(value){var member,field,that=this,parent=function(){return that};Observable.fn.init.call(this);for(field in value)member=value[field],"object"==typeof member&&member&&!member.getTime&&"_"!=field.charAt(0)&&(member=that.wrap(member,field,parent)),that[field]=member;that.uid=kendo.guid()},shouldSerialize:function(field){return this.hasOwnProperty(field)&&"_events"!==field&&typeof this[field]!==FUNCTION&&"uid"!==field},forEach:function(f){for(var i in this)this.shouldSerialize(i)&&f(this[i],i)},toJSON:function(){var value,field,result={};for(field in this)this.shouldSerialize(field)&&(value=this[field],(value instanceof ObservableObject||value instanceof ObservableArray)&&(value=value.toJSON()),result[field]=value);return result},get:function(field){var result,that=this;return that.trigger(GET,{field:field}),result="this"===field?that:kendo.getter(field,!0)(that)},_set:function(field,value){var that=this,composite=field.indexOf(".")>=0;if(composite)for(var paths=field.split("."),path="";paths.length>1;){path+=paths.shift();var obj=kendo.getter(path,!0)(that);if(obj instanceof ObservableObject)return obj.set(paths.join("."),value),composite;path+="."}return kendo.setter(field)(that,value),composite},set:function(field,value){var that=this,composite=field.indexOf(".")>=0,current=kendo.getter(field,!0)(that);current!==value&&(that.trigger("set",{field:field,value:value})||(composite||(value=that.wrap(value,field,function(){return that})),(!that._set(field,value)||field.indexOf("(")>=0||field.indexOf("[")>=0)&&that.trigger(CHANGE,{field:field})))},parent:noop,wrap:function(object,field,parent){var that=this,type=toString.call(object);if(null!=object&&("[object Object]"===type||"[object Array]"===type)){var isObservableArray=object instanceof ObservableArray,isDataSource=object instanceof DataSource;"[object Object]"!==type||isDataSource||isObservableArray?("[object Array]"===type||isObservableArray||isDataSource)&&(isObservableArray||isDataSource||(object=new ObservableArray(object)),object.parent()!=parent()&&object.bind(CHANGE,eventHandler(that,CHANGE,field,!1))):(object instanceof ObservableObject||(object=new ObservableObject(object)),object.parent()!=parent()&&(object.bind(GET,eventHandler(that,GET,field,!0)),object.bind(CHANGE,eventHandler(that,CHANGE,field,!0)))),object.parent=parent}return object}}),parsers={number:function(value){return kendo.parseFloat(value)},date:function(value){return kendo.parseDate(value)},"boolean":function(value){return typeof value===STRING?"true"===value.toLowerCase():null!=value?!!value:value},string:function(value){return null!=value?value+"":value},"default":function(value){return value}},defaultValues={string:"",number:0,date:new Date,"boolean":!1,"default":""},Model=ObservableObject.extend({init:function(data){var that=this;if((!data||$.isEmptyObject(data))&&(data=$.extend({},that.defaults,data),that._initializers))for(var idx=0;idx<that._initializers.length;idx++){var name=that._initializers[idx];data[name]=that.defaults[name]()}ObservableObject.fn.init.call(that,data),that.dirty=!1,that.idField&&(that.id=that.get(that.idField),that.id===undefined&&(that.id=that._defaultId))},shouldSerialize:function(field){return ObservableObject.fn.shouldSerialize.call(this,field)&&"uid"!==field&&!("id"!==this.idField&&"id"===field)&&"dirty"!==field&&"_accessors"!==field},_parse:function(field,value){var parse,that=this,fieldName=field,fields=that.fields||{};return field=fields[field],field||(field=getFieldByName(fields,fieldName)),field&&(parse=field.parse,!parse&&field.type&&(parse=parsers[field.type.toLowerCase()])),parse?parse(value):value},_notifyChange:function(e){var action=e.action;"add"!=action&&"remove"!=action||(this.dirty=!0)},editable:function(field){return field=(this.fields||{})[field],field?field.editable!==!1:!0},set:function(field,value,initiator){var that=this;that.editable(field)&&(value=that._parse(field,value),equal(value,that.get(field))||(that.dirty=!0,ObservableObject.fn.set.call(that,field,value,initiator)))},accept:function(data){var field,that=this,parent=function(){return that};for(field in data){var value=data[field];"_"!=field.charAt(0)&&(value=that.wrap(data[field],field,parent)),that._set(field,value)}that.idField&&(that.id=that.get(that.idField)),that.dirty=!1},isNew:function(){return this.id===this._defaultId}});Model.define=function(base,options){options===undefined&&(options=base,base=Model);var model,name,field,type,value,idx,length,originalName,proto=extend({defaults:{}},options),fields={},id=proto.id,functionFields=[];if(id&&(proto.idField=id),proto.id&&delete proto.id,id&&(proto.defaults[id]=proto._defaultId=""),
"[object Array]"===toString.call(proto.fields)){for(idx=0,length=proto.fields.length;length>idx;idx++)field=proto.fields[idx],typeof field===STRING?fields[field]={}:field.field&&(fields[field.field]=field);proto.fields=fields}for(name in proto.fields)field=proto.fields[name],type=field.type||"default",value=null,originalName=name,name=typeof field.field===STRING?field.field:name,field.nullable||(value=proto.defaults[originalName!==name?originalName:name]=field.defaultValue!==undefined?field.defaultValue:defaultValues[type.toLowerCase()],"function"==typeof value&&functionFields.push(name)),options.id===name&&(proto._defaultId=value),proto.defaults[originalName!==name?originalName:name]=value,field.parse=field.parse||parsers[type];return functionFields.length>0&&(proto._initializers=functionFields),model=base.extend(proto),model.define=function(options){return Model.define(model,options)},proto.fields&&(model.fields=proto.fields,model.idField=proto.idField),model};var Comparer={selector:function(field){return isFunction(field)?field:getter(field)},compare:function(field){var selector=this.selector(field);return function(a,b){return a=selector(a),b=selector(b),null==a&&null==b?0:null==a?-1:null==b?1:a.localeCompare?a.localeCompare(b):a>b?1:b>a?-1:0}},create:function(sort){var compare=sort.compare||this.compare(sort.field);return"desc"==sort.dir?function(a,b){return compare(b,a,!0)}:compare},combine:function(comparers){return function(a,b){var idx,length,result=comparers[0](a,b);for(idx=1,length=comparers.length;length>idx;idx++)result=result||comparers[idx](a,b);return result}}},StableComparer=extend({},Comparer,{asc:function(field){var selector=this.selector(field);return function(a,b){var valueA=selector(a),valueB=selector(b);return valueA&&valueA.getTime&&valueB&&valueB.getTime&&(valueA=valueA.getTime(),valueB=valueB.getTime()),valueA===valueB?a.__position-b.__position:null==valueA?-1:null==valueB?1:valueA.localeCompare?valueA.localeCompare(valueB):valueA>valueB?1:-1}},desc:function(field){var selector=this.selector(field);return function(a,b){var valueA=selector(a),valueB=selector(b);return valueA&&valueA.getTime&&valueB&&valueB.getTime&&(valueA=valueA.getTime(),valueB=valueB.getTime()),valueA===valueB?a.__position-b.__position:null==valueA?1:null==valueB?-1:valueB.localeCompare?valueB.localeCompare(valueA):valueB>valueA?1:-1}},create:function(sort){return this[sort.dir](sort.field)}});map=function(array,callback){var idx,length=array.length,result=new Array(length);for(idx=0;length>idx;idx++)result[idx]=callback(array[idx],idx,array);return result};var operators=function(){function quote(value){return value.replace(quoteRegExp,"\\").replace(newLineRegExp,"")}function operator(op,a,b,ignore){var date;return null!=b&&(typeof b===STRING&&(b=quote(b),date=dateRegExp.exec(b),date?b=new Date(+date[1]):ignore?(b="'"+b.toLowerCase()+"'",a="("+a+" || '').toLowerCase()"):b="'"+b+"'"),b.getTime&&(a="("+a+"?"+a+".getTime():"+a+")",b=b.getTime())),a+" "+op+" "+b}return{quote:function(value){return value&&value.getTime?"new Date("+value.getTime()+")":"string"==typeof value?"'"+quote(value)+"'":""+value},eq:function(a,b,ignore){return operator("==",a,b,ignore)},neq:function(a,b,ignore){return operator("!=",a,b,ignore)},gt:function(a,b,ignore){return operator(">",a,b,ignore)},gte:function(a,b,ignore){return operator(">=",a,b,ignore)},lt:function(a,b,ignore){return operator("<",a,b,ignore)},lte:function(a,b,ignore){return operator("<=",a,b,ignore)},startswith:function(a,b,ignore){return ignore&&(a="("+a+" || '').toLowerCase()",b&&(b=b.toLowerCase())),b&&(b=quote(b)),a+".lastIndexOf('"+b+"', 0) == 0"},endswith:function(a,b,ignore){return ignore&&(a="("+a+" || '').toLowerCase()",b&&(b=b.toLowerCase())),b&&(b=quote(b)),a+".indexOf('"+b+"', "+a+".length - "+(b||"").length+") >= 0"},contains:function(a,b,ignore){return ignore&&(a="("+a+" || '').toLowerCase()",b&&(b=b.toLowerCase())),b&&(b=quote(b)),a+".indexOf('"+b+"') >= 0"},doesnotcontain:function(a,b,ignore){return ignore&&(a="("+a+" || '').toLowerCase()",b&&(b=b.toLowerCase())),b&&(b=quote(b)),a+".indexOf('"+b+"') == -1"}}}();Query.filterExpr=function(expression){var idx,length,filter,expr,field,operator,expressions=[],logic={and:" && ",or:" || "},fieldFunctions=[],operatorFunctions=[],filters=expression.filters;for(idx=0,length=filters.length;length>idx;idx++)filter=filters[idx],field=filter.field,operator=filter.operator,filter.filters?(expr=Query.filterExpr(filter),filter=expr.expression.replace(/__o\[(\d+)\]/g,function(match,index){return index=+index,"__o["+(operatorFunctions.length+index)+"]"}).replace(/__f\[(\d+)\]/g,function(match,index){return index=+index,"__f["+(fieldFunctions.length+index)+"]"}),operatorFunctions.push.apply(operatorFunctions,expr.operators),fieldFunctions.push.apply(fieldFunctions,expr.fields)):(typeof field===FUNCTION?(expr="__f["+fieldFunctions.length+"](d)",fieldFunctions.push(field)):expr=kendo.expr(field),typeof operator===FUNCTION?(filter="__o["+operatorFunctions.length+"]("+expr+", "+operators.quote(filter.value)+")",operatorFunctions.push(operator)):filter=operators[(operator||"eq").toLowerCase()](expr,filter.value,filter.ignoreCase!==undefined?filter.ignoreCase:!0)),expressions.push(filter);return{expression:"("+expressions.join(logic[expression.logic])+")",fields:fieldFunctions,operators:operatorFunctions}};var operatorMap={"==":"eq",equals:"eq",isequalto:"eq",equalto:"eq",equal:"eq","!=":"neq",ne:"neq",notequals:"neq",isnotequalto:"neq",notequalto:"neq",notequal:"neq","<":"lt",islessthan:"lt",lessthan:"lt",less:"lt","<=":"lte",le:"lte",islessthanorequalto:"lte",lessthanequal:"lte",">":"gt",isgreaterthan:"gt",greaterthan:"gt",greater:"gt",">=":"gte",isgreaterthanorequalto:"gte",greaterthanequal:"gte",ge:"gte",notsubstringof:"doesnotcontain"};Query.normalizeFilter=normalizeFilter,Query.prototype={toArray:function(){return this.data},range:function(index,count){return new Query(this.data.slice(index,index+count))},skip:function(count){return new Query(this.data.slice(count))},take:function(count){return new Query(this.data.slice(0,count))},select:function(selector){return new Query(map(this.data,selector))},order:function(selector,dir){var sort={dir:dir};return selector&&(selector.compare?sort.compare=selector.compare:sort.field=selector),new Query(this.data.slice(0).sort(Comparer.create(sort)))},orderBy:function(selector){return this.order(selector,"asc")},orderByDescending:function(selector){return this.order(selector,"desc")},sort:function(field,dir,comparer){var idx,length,descriptors=normalizeSort(field,dir),comparers=[];if(comparer=comparer||Comparer,descriptors.length){for(idx=0,length=descriptors.length;length>idx;idx++)comparers.push(comparer.create(descriptors[idx]));return this.orderBy({compare:comparer.combine(comparers)})}return this},filter:function(expressions){var idx,current,length,compiled,predicate,fields,operators,filter,data=this.data,result=[];if(expressions=normalizeFilter(expressions),!expressions||0===expressions.filters.length)return this;for(compiled=Query.filterExpr(expressions),fields=compiled.fields,operators=compiled.operators,predicate=filter=new Function("d, __f, __o","return "+compiled.expression),(fields.length||operators.length)&&(filter=function(d){return predicate(d,fields,operators)}),idx=0,length=data.length;length>idx;idx++)current=data[idx],filter(current)&&result.push(current);return new Query(result)},group:function(descriptors,allData){descriptors=normalizeGroup(descriptors||[]),allData=allData||this.data;var descriptor,that=this,result=new Query(that.data);return descriptors.length>0&&(descriptor=descriptors[0],result=result.groupBy(descriptor).select(function(group){var data=new Query(allData).filter([{field:group.field,operator:"eq",value:group.value,ignoreCase:!1}]);return{field:group.field,value:group.value,items:descriptors.length>1?new Query(group.items).group(descriptors.slice(1),data.toArray()).toArray():group.items,hasSubgroups:descriptors.length>1,aggregates:data.aggregate(descriptor.aggregates)}})),result},groupBy:function(descriptor){if(isEmptyObject(descriptor)||!this.data.length)return new Query([]);var item,currentValue,idx,len,field=descriptor.field,sorted=this._sortForGrouping(field,descriptor.dir||"asc"),accessor=kendo.accessor(field),groupValue=accessor.get(sorted[0],field),group={field:field,value:groupValue,items:[]},result=[group];for(idx=0,len=sorted.length;len>idx;idx++)item=sorted[idx],currentValue=accessor.get(item,field),groupValueComparer(groupValue,currentValue)||(groupValue=currentValue,group={field:field,value:groupValue,items:[]},result.push(group)),group.items.push(item);return new Query(result)},_sortForGrouping:function(field,dir){var idx,length,data=this.data;if(!stableSort){for(idx=0,length=data.length;length>idx;idx++)data[idx].__position=idx;for(data=new Query(data).sort(field,dir,StableComparer).toArray(),idx=0,length=data.length;length>idx;idx++)delete data[idx].__position;return data}return this.sort(field,dir).toArray()},aggregate:function(aggregates){var idx,len,result={},state={};if(aggregates&&aggregates.length)for(idx=0,len=this.data.length;len>idx;idx++)calculateAggregate(result,aggregates,this.data[idx],idx,len,state);return result}};var functions={sum:function(accumulator,item,accessor){var value=accessor.get(item);return isNumber(accumulator)?isNumber(value)&&(accumulator+=value):accumulator=value,accumulator},count:function(accumulator){return(accumulator||0)+1},average:function(accumulator,item,accessor,index,length,state){var value=accessor.get(item);return state.count===undefined&&(state.count=0),isNumber(accumulator)?isNumber(value)&&(accumulator+=value):accumulator=value,isNumber(value)&&state.count++,index==length-1&&isNumber(accumulator)&&(accumulator/=state.count),accumulator},max:function(accumulator,item,accessor){var value=accessor.get(item);return isNumber(accumulator)||isDate(accumulator)||(accumulator=value),value>accumulator&&(isNumber(value)||isDate(value))&&(accumulator=value),accumulator},min:function(accumulator,item,accessor){var value=accessor.get(item);return isNumber(accumulator)||isDate(accumulator)||(accumulator=value),accumulator>value&&(isNumber(value)||isDate(value))&&(accumulator=value),accumulator}};Query.process=function(data,options){options=options||{};var total,query=new Query(data),group=options.group,sort=normalizeGroup(group||[]).concat(normalizeSort(options.sort||[])),filterCallback=options.filterCallback,filter=options.filter,skip=options.skip,take=options.take;return filter&&(query=query.filter(filter),filterCallback&&(query=filterCallback(query)),total=query.toArray().length),sort&&(query=query.sort(sort),group&&(data=query.toArray())),skip!==undefined&&take!==undefined&&(query=query.range(skip,take)),group&&(query=query.group(group,data)),{total:total,data:query.toArray()}};var LocalTransport=Class.extend({init:function(options){this.data=options.data},read:function(options){options.success(this.data)},update:function(options){options.success(options.data)},create:function(options){options.success(options.data)},destroy:function(options){options.success(options.data)}}),RemoteTransport=Class.extend({init:function(options){var parameterMap,that=this;options=that.options=extend({},that.options,options),each(crud,function(index,type){typeof options[type]===STRING&&(options[type]={url:options[type]})}),that.cache=options.cache?Cache.create(options.cache):{find:noop,add:noop},parameterMap=options.parameterMap,isFunction(options.push)&&(that.push=options.push),that.push||(that.push=identity),that.parameterMap=isFunction(parameterMap)?parameterMap:function(options){var result={};return each(options,function(option,value){option in parameterMap&&(option=parameterMap[option],isPlainObject(option)&&(value=option.value(value),option=option.key)),result[option]=value}),result}},options:{parameterMap:identity},create:function(options){return ajax(this.setup(options,CREATE))},read:function(options){var success,error,result,that=this,cache=that.cache;options=that.setup(options,READ),success=options.success||noop,error=options.error||noop,result=cache.find(options.data),result!==undefined?success(result):(options.success=function(result){cache.add(options.data,result),success(result)},$.ajax(options))},update:function(options){return ajax(this.setup(options,UPDATE))},destroy:function(options){return ajax(this.setup(options,DESTROY))},setup:function(options,type){options=options||{};var parameters,that=this,operation=that.options[type],data=isFunction(operation.data)?operation.data(options.data):operation.data;return options=extend(!0,{},operation,options),parameters=extend(!0,{},data,options.data),options.data=that.parameterMap(parameters,type),isFunction(options.url)&&(options.url=options.url(parameters)),options}}),Cache=Class.extend({init:function(){this._store={}},add:function(key,data){key!==undefined&&(this._store[stringify(key)]=data)},find:function(key){return this._store[stringify(key)]},clear:function(){this._store={}},remove:function(key){delete this._store[stringify(key)]}});Cache.create=function(options){var store={inmemory:function(){return new Cache}};return isPlainObject(options)&&isFunction(options.find)?options:options===!0?new Cache:store[options]()};var DataReader=Class.extend({init:function(schema){var member,get,model,base,that=this;schema=schema||{};for(member in schema)get=schema[member],that[member]=typeof get===STRING?getter(get):get;base=schema.modelBase||Model,isPlainObject(that.model)&&(that.model=model=base.define(that.model));var dataFunction=proxy(that.data,that);if(that._dataAccessFunction=dataFunction,that.model){var fieldName,groupsFunction=proxy(that.groups,that),serializeFunction=proxy(that.serialize,that),originalFieldNames={},getters={},serializeGetters={},fieldNames={},shouldSerialize=!1;model=that.model,model.fields&&(each(model.fields,function(field,value){var fromName;fieldName=field,isPlainObject(value)&&value.field?fieldName=value.field:typeof value===STRING&&(fieldName=value),isPlainObject(value)&&value.from&&(fromName=value.from),shouldSerialize=shouldSerialize||fromName&&fromName!==field||fieldName!==field,getters[field]=getter(fromName||fieldName),serializeGetters[field]=getter(field),originalFieldNames[fromName||fieldName]=field,fieldNames[field]=fromName||fieldName}),!schema.serialize&&shouldSerialize&&(that.serialize=wrapDataAccess(serializeFunction,model,serializeRecords,serializeGetters,originalFieldNames,fieldNames))),that._dataAccessFunction=dataFunction,that.data=wrapDataAccess(dataFunction,model,convertRecords,getters,originalFieldNames,fieldNames),that.groups=wrapDataAccess(groupsFunction,model,convertGroup,getters,originalFieldNames,fieldNames)}},errors:function(data){return data?data.errors:null},parse:identity,data:identity,total:function(data){return data.length},groups:identity,aggregates:function(){return{}},serialize:function(data){return data}}),DataSource=Observable.extend({init:function(options){var model,data,that=this;if(options&&(data=options.data),options=that.options=extend({},that.options,options),that._map={},that._prefetch={},that._data=[],that._pristineData=[],that._ranges=[],that._view=[],that._pristineTotal=0,that._destroyed=[],that._pageSize=options.pageSize,that._page=options.page||(options.pageSize?1:undefined),that._sort=normalizeSort(options.sort),that._filter=normalizeFilter(options.filter),that._group=normalizeGroup(options.group),that._aggregate=options.aggregate,that._total=options.total,that._shouldDetachObservableParents=!0,Observable.fn.init.call(that),that.transport=Transport.create(options,data,that),isFunction(that.transport.push)&&that.transport.push({pushCreate:proxy(that._pushCreate,that),pushUpdate:proxy(that._pushUpdate,that),pushDestroy:proxy(that._pushDestroy,that)}),null!=options.offlineStorage)if("string"==typeof options.offlineStorage){var key=options.offlineStorage;that._storage={getItem:function(){return JSON.parse(localStorage.getItem(key))},setItem:function(item){localStorage.setItem(key,stringify(that.reader.serialize(item)))}}}else that._storage=options.offlineStorage;that.reader=new kendo.data.readers[options.schema.type||"json"](options.schema),model=that.reader.model||{},that._detachObservableParents(),that._data=that._observe(that._data),that._online=!0,that.bind(["push",ERROR,CHANGE,REQUESTSTART,SYNC,REQUESTEND,PROGRESS],options)},options:{data:null,schema:{modelBase:Model},offlineStorage:null,serverSorting:!1,serverPaging:!1,serverFiltering:!1,serverGrouping:!1,serverAggregates:!1,batch:!1},online:function(value){return value!==undefined?this._online!=value&&(this._online=value,value)?this.sync():$.Deferred().resolve().promise():this._online},offlineData:function(state){return null==this.options.offlineStorage?null:state!==undefined?this._storage.setItem(state):this._storage.getItem()||{}},_isServerGrouped:function(){var group=this.group()||[];return this.options.serverGrouping&&group.length},_pushCreate:function(result){this._push(result,"pushCreate")},_pushUpdate:function(result){this._push(result,"pushUpdate")},_pushDestroy:function(result){this._push(result,"pushDestroy")},_push:function(result,operation){var data=this._readData(result);data||(data=result),this[operation](data)},_flatData:function(data,skip){if(data){if(this._isServerGrouped())return flattenGroups(data);if(!skip)for(var idx=0;idx<data.length;idx++)data.at(idx)}return data},parent:noop,get:function(id){var idx,length,data=this._flatData(this._data);for(idx=0,length=data.length;length>idx;idx++)if(data[idx].id==id)return data[idx]},getByUid:function(id){var idx,length,data=this._flatData(this._data);if(data)for(idx=0,length=data.length;length>idx;idx++)if(data[idx].uid==id)return data[idx]},indexOf:function(model){return indexOfModel(this._data,model)},at:function(index){return this._data.at(index)},data:function(value){var that=this;if(value===undefined){if(that._data)for(var idx=0;idx<that._data.length;idx++)that._data.at(idx);return that._data}that._detachObservableParents(),that._data=this._observe(value),that._pristineData=value.slice(0),that._storeData(),that._ranges=[],that.trigger("reset"),that._addRange(that._data),that._total=that._data.length,that._pristineTotal=that._total,that._process(that._data)},view:function(value){return value===undefined?this._view:void(this._view=this._observeView(value))},_observeView:function(data){var that=this;replaceWithObservable(data,that._data,that._ranges,that.reader.model||ObservableObject,that._isServerGrouped());var view=new LazyObservableArray(data,that.reader.model);return view.parent=function(){return that.parent()},view},flatView:function(){var groups=this.group()||[];return groups.length?flattenGroups(this._view):this._view},add:function(model){return this.insert(this._data.length,model)},_createNewModel:function(model){return this.reader.model?new this.reader.model(model):model instanceof ObservableObject?model:new ObservableObject(model)},insert:function(index,model){return model||(model=index,index=0),model instanceof Model||(model=this._createNewModel(model)),this._isServerGrouped()?this._data.splice(index,0,this._wrapInEmptyGroup(model)):this._data.splice(index,0,model),model},pushCreate:function(items){isArray(items)||(items=[items]);var pushed=[],autoSync=this.options.autoSync;this.options.autoSync=!1;try{for(var idx=0;idx<items.length;idx++){var item=items[idx],result=this.add(item);pushed.push(result);var pristine=result.toJSON();this._isServerGrouped()&&(pristine=this._wrapInEmptyGroup(pristine)),this._pristineData.push(pristine)}}finally{this.options.autoSync=autoSync}pushed.length&&this.trigger("push",{type:"create",items:pushed})},pushUpdate:function(items){isArray(items)||(items=[items]);for(var pushed=[],idx=0;idx<items.length;idx++){var item=items[idx],model=this._createNewModel(item),target=this.get(model.id);target?(pushed.push(target),target.accept(item),target.trigger(CHANGE),this._updatePristineForModel(target,item)):this.pushCreate(item)}pushed.length&&this.trigger("push",{type:"update",items:pushed})},pushDestroy:function(items){var pushed=this._removeItems(items);pushed.length&&this.trigger("push",{type:"destroy",items:pushed})},_removeItems:function(items){isArray(items)||(items=[items]);var destroyed=[],autoSync=this.options.autoSync;this.options.autoSync=!1;try{for(var idx=0;idx<items.length;idx++){var item=items[idx],model=this._createNewModel(item),found=!1;this._eachItem(this._data,function(items){for(var idx=0;idx<items.length;idx++){var item=items.at(idx);if(item.id===model.id){destroyed.push(item),items.splice(idx,1),found=!0;break}}}),found&&(this._removePristineForModel(model),this._destroyed.pop())}}finally{this.options.autoSync=autoSync}return destroyed},remove:function(model){var result,that=this,hasGroups=that._isServerGrouped();return this._eachItem(that._data,function(items){return result=removeModel(items,model),result&&hasGroups?(result.isNew&&result.isNew()||that._destroyed.push(result),!0):void 0}),this._removeModelFromRanges(model),this._updateRangesLength(),model},destroyed:function(){return this._destroyed},created:function(){var idx,length,result=[],data=this._flatData(this._data);for(idx=0,length=data.length;length>idx;idx++)data[idx].isNew&&data[idx].isNew()&&result.push(data[idx]);return result},updated:function(){var idx,length,result=[],data=this._flatData(this._data);for(idx=0,length=data.length;length>idx;idx++)data[idx].isNew&&!data[idx].isNew()&&data[idx].dirty&&result.push(data[idx]);return result},sync:function(){var that=this,created=[],updated=[],destroyed=that._destroyed,promise=(that._flatData(that._data),$.Deferred().resolve().promise());if(that.online()){if(!that.reader.model)return promise;created=that.created(),updated=that.updated();var promises=[];that.options.batch&&that.transport.submit?promises=that._sendSubmit(created,updated,destroyed):(promises.push.apply(promises,that._send("create",created)),promises.push.apply(promises,that._send("update",updated)),promises.push.apply(promises,that._send("destroy",destroyed))),promise=$.when.apply(null,promises).then(function(){var idx,length;for(idx=0,length=arguments.length;length>idx;idx++)that._accept(arguments[idx]);that._storeData(!0),that._change({action:"sync"}),that.trigger(SYNC)})}else that._storeData(!0),that._change({action:"sync"});return promise},cancelChanges:function(model){var that=this;model instanceof kendo.data.Model?that._cancelModel(model):(that._destroyed=[],that._detachObservableParents(),that._data=that._observe(that._pristineData),that.options.serverPaging&&(that._total=that._pristineTotal),that._ranges=[],that._addRange(that._data),that._change())},hasChanges:function(){var idx,length,data=this._flatData(this._data);if(this._destroyed.length)return!0;for(idx=0,length=data.length;length>idx;idx++)if(data[idx].isNew&&data[idx].isNew()||data[idx].dirty)return!0;return!1},_accept:function(result){var length,that=this,models=result.models,response=result.response,idx=0,serverGroup=that._isServerGrouped(),pristine=that._pristineData,type=result.type;if(that.trigger(REQUESTEND,{response:response,type:type}),response&&!isEmptyObject(response)){if(response=that.reader.parse(response),that._handleCustomErrors(response))return;response=that.reader.data(response),isArray(response)||(response=[response])}else response=$.map(models,function(model){return model.toJSON()});for("destroy"===type&&(that._destroyed=[]),idx=0,length=models.length;length>idx;idx++)"destroy"!==type?(models[idx].accept(response[idx]),"create"===type?pristine.push(serverGroup?that._wrapInEmptyGroup(models[idx]):response[idx]):"update"===type&&that._updatePristineForModel(models[idx],response[idx])):that._removePristineForModel(models[idx])},_updatePristineForModel:function(model,values){this._executeOnPristineForModel(model,function(index,items){kendo.deepExtend(items[index],values)})},_executeOnPristineForModel:function(model,callback){this._eachPristineItem(function(items){var index=indexOfPristineModel(items,model);return index>-1?(callback(index,items),!0):void 0})},_removePristineForModel:function(model){this._executeOnPristineForModel(model,function(index,items){items.splice(index,1)})},_readData:function(data){var read=this._isServerGrouped()?this.reader.groups:this.reader.data;return read.call(this.reader,data)},_eachPristineItem:function(callback){this._eachItem(this._pristineData,callback)},_eachItem:function(data,callback){data&&data.length&&(this._isServerGrouped()?eachGroupItems(data,callback):callback(data))},_pristineForModel:function(model){var pristine,idx,callback=function(items){return idx=indexOfPristineModel(items,model),idx>-1?(pristine=items[idx],!0):void 0};return this._eachPristineItem(callback),pristine},_cancelModel:function(model){var pristine=this._pristineForModel(model);this._eachItem(this._data,function(items){var idx=indexOfModel(items,model);idx>=0&&(!pristine||model.isNew()&&!pristine.__state__?items.splice(idx,1):items[idx].accept(pristine))})},_submit:function(promises,data){var that=this;that.trigger(REQUESTSTART,{type:"submit"}),that.transport.submit(extend({success:function(response,type){var promise=$.grep(promises,function(x){return x.type==type})[0];promise&&promise.resolve({response:response,models:promise.models,type:type})},error:function(response,status,error){for(var idx=0;idx<promises.length;idx++)promises[idx].reject(response);that.error(response,status,error)}},data))},_sendSubmit:function(created,updated,destroyed){var that=this,promises=[];return that.options.batch&&(created.length&&promises.push($.Deferred(function(deferred){deferred.type="create",deferred.models=created})),updated.length&&promises.push($.Deferred(function(deferred){deferred.type="update",deferred.models=updated})),destroyed.length&&promises.push($.Deferred(function(deferred){deferred.type="destroy",deferred.models=destroyed})),that._submit(promises,{data:{created:that.reader.serialize(toJSON(created)),updated:that.reader.serialize(toJSON(updated)),destroyed:that.reader.serialize(toJSON(destroyed))}})),promises},_promise:function(data,models,type){var that=this;return $.Deferred(function(deferred){that.trigger(REQUESTSTART,{type:type}),that.transport[type].call(that.transport,extend({success:function(response){deferred.resolve({response:response,models:models,type:type})},error:function(response,status,error){deferred.reject(response),that.error(response,status,error)}},data))}).promise()},_send:function(method,data){var idx,length,that=this,promises=[],converted=that.reader.serialize(toJSON(data));if(that.options.batch)data.length&&promises.push(that._promise({data:{models:converted}},data,method));else for(idx=0,length=data.length;length>idx;idx++)promises.push(that._promise({data:converted[idx]},[data[idx]],method));return promises},read:function(data){var that=this,params=that._params(data),deferred=$.Deferred();return that._queueRequest(params,function(){var isPrevented=that.trigger(REQUESTSTART,{type:"read"});isPrevented?(that._dequeueRequest(),deferred.resolve(isPrevented)):(that.trigger(PROGRESS),that._ranges=[],that.trigger("reset"),that.online()?that.transport.read({data:params,success:function(data){that.success(data),deferred.resolve()},error:function(){var args=slice.call(arguments);that.error.apply(that,args),deferred.reject.apply(deferred,args)}}):null!=that.options.offlineStorage&&(that.success(that.offlineData()),deferred.resolve()))}),deferred.promise()},_readAggregates:function(data){return this.reader.aggregates(data)},success:function(data){var that=this,options=that.options;if(that.trigger(REQUESTEND,{response:data,type:"read"}),that.online()){if(data=that.reader.parse(data),that._handleCustomErrors(data))return void that._dequeueRequest();that._total=that.reader.total(data),that._aggregate&&options.serverAggregates&&(that._aggregateResult=that._readAggregates(data)),data=that._readData(data)}else{data=that._readData(data);for(var items=[],idx=0;idx<data.length;idx++){var item=data[idx],state=item.__state__;"destroy"==state?this._destroyed.push(this._createNewModel(item)):items.push(item)}data=items,that._total=data.length}that._pristineTotal=that._total,that._pristineData=data.slice(0),that._detachObservableParents(),that._data=that._observe(data),null!=that.options.offlineStorage&&that._eachItem(that._data,function(items){for(var idx=0;idx<items.length;idx++){var item=items.at(idx);"update"==item.__state__&&(item.dirty=!0)}}),that._storeData(),that._addRange(that._data),that._process(that._data),that._dequeueRequest()},_detachObservableParents:function(){if(this._data&&this._shouldDetachObservableParents)for(var idx=0;idx<this._data.length;idx++)this._data[idx].parent&&(this._data[idx].parent=noop)},_storeData:function(updatePristine){function items(data){for(var state=[],idx=0;idx<data.length;idx++){var dataItem=data.at(idx),item=dataItem.toJSON();serverGrouping&&dataItem.items?item.items=items(dataItem.items):(item.uid=dataItem.uid,model&&(dataItem.isNew()?item.__state__="create":dataItem.dirty&&(item.__state__="update"))),state.push(item)}return state}var serverGrouping=this._isServerGrouped(),model=this.reader.model;if(null!=this.options.offlineStorage){for(var state=items(this._data),idx=0;idx<this._destroyed.length;idx++){var item=this._destroyed[idx].toJSON();item.__state__="destroy",state.push(item)}this.offlineData(state),updatePristine&&(this._pristineData=state)}},_addRange:function(data){var that=this,start=that._skip||0,end=start+that._flatData(data,!0).length;that._ranges.push({start:start,end:end,data:data}),that._ranges.sort(function(x,y){return x.start-y.start})},error:function(xhr,status,errorThrown){this._dequeueRequest(),this.trigger(REQUESTEND,{}),this.trigger(ERROR,{xhr:xhr,status:status,errorThrown:errorThrown})},_params:function(data){var that=this,options=extend({take:that.take(),skip:that.skip(),page:that.page(),pageSize:that.pageSize(),sort:that._sort,filter:that._filter,group:that._group,aggregate:that._aggregate},data);return that.options.serverPaging||(delete options.take,delete options.skip,delete options.page,delete options.pageSize),that.options.serverGrouping?that.reader.model&&options.group&&(options.group=convertDescriptorsField(options.group,that.reader.model)):delete options.group,that.options.serverFiltering?that.reader.model&&options.filter&&(options.filter=convertFilterDescriptorsField(options.filter,that.reader.model)):delete options.filter,that.options.serverSorting?that.reader.model&&options.sort&&(options.sort=convertDescriptorsField(options.sort,that.reader.model)):delete options.sort,that.options.serverAggregates?that.reader.model&&options.aggregate&&(options.aggregate=convertDescriptorsField(options.aggregate,that.reader.model)):delete options.aggregate,options},_queueRequest:function(options,callback){var that=this;that._requestInProgress?that._pending={callback:proxy(callback,that),options:options}:(that._requestInProgress=!0,that._pending=undefined,callback())},_dequeueRequest:function(){var that=this;that._requestInProgress=!1,that._pending&&that._queueRequest(that._pending.options,that._pending.callback)},_handleCustomErrors:function(response){if(this.reader.errors){var errors=this.reader.errors(response);if(errors)return this.trigger(ERROR,{xhr:null,status:"customerror",errorThrown:"custom error",errors:errors}),!0}return!1},_shouldWrap:function(data){var model=this.reader.model;return model&&data.length?!(data[0]instanceof model):!1},_observe:function(data){var that=this,model=that.reader.model;if(that._shouldDetachObservableParents=!0,data instanceof ObservableArray)that._shouldDetachObservableParents=!1,that._shouldWrap(data)&&(data.type=that.reader.model,data.wrapAll(data,data));else{var arrayType=that.pageSize()&&!that.options.serverPaging?LazyObservableArray:ObservableArray;data=new arrayType(data,that.reader.model),data.parent=function(){return that.parent();
}}return that._isServerGrouped()&&wrapGroupItems(data,model),that._changeHandler&&that._data&&that._data instanceof ObservableArray?that._data.unbind(CHANGE,that._changeHandler):that._changeHandler=proxy(that._change,that),data.bind(CHANGE,that._changeHandler)},_change:function(e){var idx,length,that=this,action=e?e.action:"";if("remove"===action)for(idx=0,length=e.items.length;length>idx;idx++)e.items[idx].isNew&&e.items[idx].isNew()||that._destroyed.push(e.items[idx]);if(!that.options.autoSync||"add"!==action&&"remove"!==action&&"itemchange"!==action){var total=parseInt(that._total,10);isNumber(that._total)||(total=parseInt(that._pristineTotal,10)),"add"===action?total+=e.items.length:"remove"===action?total-=e.items.length:"itemchange"===action||"sync"===action||that.options.serverPaging?"sync"===action&&(total=that._pristineTotal=parseInt(that._total,10)):total=that._pristineTotal,that._total=total,that._process(that._data,e)}else that.sync()},_calculateAggregates:function(data,options){options=options||{};var query=new Query(data),aggregates=options.aggregate,filter=options.filter;return filter&&(query=query.filter(filter)),query.aggregate(aggregates)},_process:function(data,e){var result,that=this,options={};that.options.serverPaging!==!0&&(options.skip=that._skip,options.take=that._take||that._pageSize,options.skip===undefined&&that._page!==undefined&&that._pageSize!==undefined&&(options.skip=(that._page-1)*that._pageSize)),that.options.serverSorting!==!0&&(options.sort=that._sort),that.options.serverFiltering!==!0&&(options.filter=that._filter),that.options.serverGrouping!==!0&&(options.group=that._group),that.options.serverAggregates!==!0&&(options.aggregate=that._aggregate,that._aggregateResult=that._calculateAggregates(data,options)),result=that._queryProcess(data,options),that.view(result.data),result.total===undefined||that.options.serverFiltering||(that._total=result.total),e=e||{},e.items=e.items||that._view,that.trigger(CHANGE,e)},_queryProcess:function(data,options){return Query.process(data,options)},_mergeState:function(options){var that=this;return options!==undefined&&(that._pageSize=options.pageSize,that._page=options.page,that._sort=options.sort,that._filter=options.filter,that._group=options.group,that._aggregate=options.aggregate,that._skip=options.skip,that._take=options.take,that._skip===undefined&&(that._skip=that.skip(),options.skip=that.skip()),that._take===undefined&&that._pageSize!==undefined&&(that._take=that._pageSize,options.take=that._take),options.sort&&(that._sort=options.sort=normalizeSort(options.sort)),options.filter&&(that._filter=options.filter=normalizeFilter(options.filter)),options.group&&(that._group=options.group=normalizeGroup(options.group)),options.aggregate&&(that._aggregate=options.aggregate=normalizeAggregate(options.aggregate))),options},query:function(options){var result,remote=this.options.serverSorting||this.options.serverPaging||this.options.serverFiltering||this.options.serverGrouping||this.options.serverAggregates;if(remote||(this._data===undefined||0===this._data.length)&&!this._destroyed.length)return this.read(this._mergeState(options));var isPrevented=this.trigger(REQUESTSTART,{type:"read"});return isPrevented||(this.trigger(PROGRESS),result=this._queryProcess(this._data,this._mergeState(options)),this.options.serverFiltering||(result.total!==undefined?this._total=result.total:this._total=this._data.length),this._aggregateResult=this._calculateAggregates(this._data,options),this.view(result.data),this.trigger(REQUESTEND,{type:"read"}),this.trigger(CHANGE,{items:result.data})),$.Deferred().resolve(isPrevented).promise()},fetch:function(callback){var that=this,fn=function(isPrevented){isPrevented!==!0&&isFunction(callback)&&callback.call(that)};return this._query().then(fn)},_query:function(options){var that=this;return that.query(extend({},{page:that.page(),pageSize:that.pageSize(),sort:that.sort(),filter:that.filter(),group:that.group(),aggregate:that.aggregate()},options))},next:function(options){var that=this,page=that.page(),total=that.total();return options=options||{},!page||total&&page+1>that.totalPages()?void 0:(that._skip=page*that.take(),page+=1,options.page=page,that._query(options),page)},prev:function(options){var that=this,page=that.page();return options=options||{},page&&1!==page?(that._skip=that._skip-that.take(),page-=1,options.page=page,that._query(options),page):void 0},page:function(val){var skip,that=this;return val!==undefined?(val=math.max(math.min(math.max(val,1),that.totalPages()),1),void that._query({page:val})):(skip=that.skip(),skip!==undefined?math.round((skip||0)/(that.take()||1))+1:undefined)},pageSize:function(val){var that=this;return val!==undefined?void that._query({pageSize:val,page:1}):that.take()},sort:function(val){var that=this;return val!==undefined?void that._query({sort:val}):that._sort},filter:function(val){var that=this;return val===undefined?that._filter:(that._query({filter:val,page:1}),void that.trigger("reset"))},group:function(val){var that=this;return val!==undefined?void that._query({group:val}):that._group},total:function(){return parseInt(this._total||0,10)},aggregate:function(val){var that=this;return val!==undefined?void that._query({aggregate:val}):that._aggregate},aggregates:function(){var result=this._aggregateResult;return isEmptyObject(result)&&(result=this._emptyAggregates(this.aggregate())),result},_emptyAggregates:function(aggregates){var result={};if(!isEmptyObject(aggregates)){var aggregate={};isArray(aggregates)||(aggregates=[aggregates]);for(var idx=0;idx<aggregates.length;idx++)aggregate[aggregates[idx].aggregate]=0,result[aggregates[idx].field]=aggregate}return result},_wrapInEmptyGroup:function(model){var parent,group,idx,length,groups=this.group();for(idx=groups.length-1,length=0;idx>=length;idx--)group=groups[idx],parent={value:model.get(group.field),field:group.field,items:parent?[parent]:[model],hasSubgroups:!!parent,aggregates:this._emptyAggregates(group.aggregates)};return parent},totalPages:function(){var that=this,pageSize=that.pageSize()||that.total();return math.ceil((that.total()||0)/pageSize)},inRange:function(skip,take){var that=this,end=math.min(skip+take,that.total());return!that.options.serverPaging&&that._data.length>0?!0:that._findRange(skip,end).length>0},lastRange:function(){var ranges=this._ranges;return ranges[ranges.length-1]||{start:0,end:0,data:[]}},firstItemUid:function(){var ranges=this._ranges;return ranges.length&&ranges[0].data.length&&ranges[0].data[0].uid},enableRequestsInProgress:function(){this._skipRequestsInProgress=!1},range:function(skip,take){skip=math.min(skip||0,this.total());var data,that=this,pageSkip=math.max(math.floor(skip/take),0)*take,size=math.min(pageSkip+take,that.total());if(that._skipRequestsInProgress=!1,data=that._findRange(skip,math.min(skip+take,that.total())),data.length){that._skipRequestsInProgress=!0,that._pending=undefined,that._skip=skip>that.skip()?math.min(size,(that.totalPages()-1)*that.take()):pageSkip,that._take=take;var paging=that.options.serverPaging,sorting=that.options.serverSorting,filtering=that.options.serverFiltering,aggregates=that.options.serverAggregates;try{that.options.serverPaging=!0,that._isServerGrouped()||that.group()&&that.group().length||(that.options.serverSorting=!0),that.options.serverFiltering=!0,that.options.serverPaging=!0,that.options.serverAggregates=!0,paging&&(that._detachObservableParents(),that._data=data=that._observe(data)),that._process(data)}finally{that.options.serverPaging=paging,that.options.serverSorting=sorting,that.options.serverFiltering=filtering,that.options.serverAggregates=aggregates}}else take!==undefined&&(that._rangeExists(pageSkip,size)?skip>pageSkip&&that.prefetch(size,take,function(){that.range(skip,take)}):that.prefetch(pageSkip,take,function(){skip>pageSkip&&size<that.total()&&!that._rangeExists(size,math.min(size+take,that.total()))?that.prefetch(size,take,function(){that.range(skip,take)}):that.range(skip,take)}))},_findRange:function(start,end){var range,skipIdx,takeIdx,startIndex,endIndex,rangeData,rangeEnd,processed,flatData,count,length,that=this,ranges=that._ranges,data=[],options=that.options,remote=options.serverSorting||options.serverPaging||options.serverFiltering||options.serverGrouping||options.serverAggregates;for(skipIdx=0,length=ranges.length;length>skipIdx;skipIdx++)if(range=ranges[skipIdx],start>=range.start&&start<=range.end){for(count=0,takeIdx=skipIdx;length>takeIdx;takeIdx++)if(range=ranges[takeIdx],flatData=that._flatData(range.data,!0),flatData.length&&start+count>=range.start){if(rangeData=range.data,rangeEnd=range.end,!remote){var sort=normalizeGroup(that.group()||[]).concat(normalizeSort(that.sort()||[]));processed=that._queryProcess(range.data,{sort:sort,filter:that.filter()}),flatData=rangeData=processed.data,processed.total!==undefined&&(rangeEnd=processed.total)}if(startIndex=0,start+count>range.start&&(startIndex=start+count-range.start),endIndex=flatData.length,rangeEnd>end&&(endIndex-=rangeEnd-end),count+=endIndex-startIndex,data=that._mergeGroups(data,rangeData,startIndex,endIndex),end<=range.end&&count==end-start)return data}break}return[]},_mergeGroups:function(data,range,skip,take){if(this._isServerGrouped()){var prevGroup,temp=range.toJSON();return data.length&&(prevGroup=data[data.length-1]),mergeGroups(prevGroup,temp,skip,take),data.concat(temp)}return data.concat(range.slice(skip,take))},skip:function(){var that=this;return that._skip===undefined?that._page!==undefined?(that._page-1)*(that.take()||1):undefined:that._skip},take:function(){return this._take||this._pageSize},_prefetchSuccessHandler:function(skip,size,callback,force){var that=this;return function(data){var idx,length,temp,found=!1,range={start:skip,end:size,data:[]};if(that._dequeueRequest(),that.trigger(REQUESTEND,{response:data,type:"read"}),data=that.reader.parse(data),temp=that._readData(data),temp.length){for(idx=0,length=that._ranges.length;length>idx;idx++)if(that._ranges[idx].start===skip){found=!0,range=that._ranges[idx];break}found||that._ranges.push(range)}range.data=that._observe(temp),range.end=range.start+that._flatData(range.data,!0).length,that._ranges.sort(function(x,y){return x.start-y.start}),that._total=that.reader.total(data),!force&&that._skipRequestsInProgress||(callback&&temp.length?callback():that.trigger(CHANGE,{}))}},prefetch:function(skip,take,callback){var that=this,size=math.min(skip+take,that.total()),options={take:take,skip:skip,page:skip/take+1,pageSize:take,sort:that._sort,filter:that._filter,group:that._group,aggregate:that._aggregate};that._rangeExists(skip,size)?callback&&callback():(clearTimeout(that._timeout),that._timeout=setTimeout(function(){that._queueRequest(options,function(){that.trigger(REQUESTSTART,{type:"read"})?that._dequeueRequest():that.transport.read({data:that._params(options),success:that._prefetchSuccessHandler(skip,size,callback),error:function(){var args=slice.call(arguments);that.error.apply(that,args)}})})},100))},_multiplePrefetch:function(skip,take,callback){var that=this,size=math.min(skip+take,that.total()),options={take:take,skip:skip,page:skip/take+1,pageSize:take,sort:that._sort,filter:that._filter,group:that._group,aggregate:that._aggregate};that._rangeExists(skip,size)?callback&&callback():that.trigger(REQUESTSTART,{type:"read"})||that.transport.read({data:that._params(options),success:that._prefetchSuccessHandler(skip,size,callback,!0)})},_rangeExists:function(start,end){var idx,length,that=this,ranges=that._ranges;for(idx=0,length=ranges.length;length>idx;idx++)if(ranges[idx].start<=start&&ranges[idx].end>=end)return!0;return!1},_removeModelFromRanges:function(model){for(var result,found,range,idx=0,length=this._ranges.length;length>idx&&(range=this._ranges[idx],this._eachItem(range.data,function(items){result=removeModel(items,model),result&&(found=!0)}),!found);idx++);},_updateRangesLength:function(){for(var range,rangeLength,startOffset=0,idx=0,length=this._ranges.length;length>idx;idx++)range=this._ranges[idx],range.start=range.start-startOffset,rangeLength=this._flatData(range.data,!0).length,startOffset=range.end-rangeLength,range.end=range.start+rangeLength}}),Transport={};Transport.create=function(options,data,dataSource){var transport,transportOptions=options.transport;return transportOptions?(transportOptions.read=typeof transportOptions.read===STRING?{url:transportOptions.read}:transportOptions.read,dataSource&&(transportOptions.dataSource=dataSource),options.type&&(kendo.data.transports=kendo.data.transports||{},kendo.data.schemas=kendo.data.schemas||{},kendo.data.transports[options.type]&&!isPlainObject(kendo.data.transports[options.type])?transport=new kendo.data.transports[options.type](extend(transportOptions,{data:data})):transportOptions=extend(!0,{},kendo.data.transports[options.type],transportOptions),options.schema=extend(!0,{},kendo.data.schemas[options.type],options.schema)),transport||(transport=isFunction(transportOptions.read)?transportOptions:new RemoteTransport(transportOptions))):transport=new LocalTransport({data:options.data||[]}),transport},DataSource.create=function(options){(isArray(options)||options instanceof ObservableArray)&&(options={data:options});var idx,length,field,dataSource=options||{},data=dataSource.data,fields=dataSource.fields,table=dataSource.table,select=dataSource.select,model={};if(data||!fields||dataSource.transport||(table?data=inferTable(table,fields):select&&(data=inferSelect(select,fields),dataSource.group===undefined&&data[0]&&data[0].optgroup!==undefined&&(dataSource.group="optgroup"))),kendo.data.Model&&fields&&(!dataSource.schema||!dataSource.schema.model)){for(idx=0,length=fields.length;length>idx;idx++)field=fields[idx],field.type&&(model[field.field]=field);isEmptyObject(model)||(dataSource.schema=extend(!0,dataSource.schema,{model:{fields:model}}))}return dataSource.data=data,select=null,dataSource.select=null,table=null,dataSource.table=null,dataSource instanceof DataSource?dataSource:new DataSource(dataSource)};var Node=Model.define({idField:"id",init:function(value){var that=this,hasChildren=that.hasChildren||value&&value.hasChildren,childrenField="items",childrenOptions={};kendo.data.Model.fn.init.call(that,value),typeof that.children===STRING&&(childrenField=that.children),childrenOptions={schema:{data:childrenField,model:{hasChildren:hasChildren,id:that.idField,fields:that.fields}}},typeof that.children!==STRING&&extend(childrenOptions,that.children),childrenOptions.data=value,hasChildren||(hasChildren=childrenOptions.schema.data),typeof hasChildren===STRING&&(hasChildren=kendo.getter(hasChildren)),isFunction(hasChildren)&&(that.hasChildren=!!hasChildren.call(that,that)),that._childrenOptions=childrenOptions,that.hasChildren&&that._initChildren(),that._loaded=!(!value||!value[childrenField]&&!value._loaded)},_initChildren:function(){var children,transport,parameterMap,that=this;that.children instanceof HierarchicalDataSource||(children=that.children=new HierarchicalDataSource(that._childrenOptions),transport=children.transport,parameterMap=transport.parameterMap,transport.parameterMap=function(data,type){return data[that.idField||"id"]=that.id,parameterMap&&(data=parameterMap(data,type)),data},children.parent=function(){return that},children.bind(CHANGE,function(e){e.node=e.node||that,that.trigger(CHANGE,e)}),children.bind(ERROR,function(e){var collection=that.parent();collection&&(e.node=e.node||that,collection.trigger(ERROR,e))}),that._updateChildrenField())},append:function(model){this._initChildren(),this.loaded(!0),this.children.add(model)},hasChildren:!1,level:function(){for(var parentNode=this.parentNode(),level=0;parentNode&&parentNode.parentNode;)level++,parentNode=parentNode.parentNode?parentNode.parentNode():null;return level},_updateChildrenField:function(){var fieldName=this._childrenOptions.schema.data;this[fieldName||"items"]=this.children.data()},_childrenLoaded:function(){this._loaded=!0,this._updateChildrenField()},load:function(){var children,promise,options={},method="_query";return this.hasChildren?(this._initChildren(),children=this.children,options[this.idField||"id"]=this.id,this._loaded||(children._data=undefined,method="read"),children.one(CHANGE,proxy(this._childrenLoaded,this)),promise=children[method](options)):this.loaded(!0),promise||$.Deferred().resolve().promise()},parentNode:function(){var array=this.parent();return array.parent()},loaded:function(value){return value===undefined?this._loaded:void(this._loaded=value)},shouldSerialize:function(field){return Model.fn.shouldSerialize.call(this,field)&&"children"!==field&&"_loaded"!==field&&"hasChildren"!==field&&"_childrenOptions"!==field}}),HierarchicalDataSource=DataSource.extend({init:function(options){var node=Node.define({children:options});DataSource.fn.init.call(this,extend(!0,{},{schema:{modelBase:node,model:node}},options)),this._attachBubbleHandlers()},_attachBubbleHandlers:function(){var that=this;that._data.bind(ERROR,function(e){that.trigger(ERROR,e)})},remove:function(node){var result,parentNode=node.parentNode(),dataSource=this;return parentNode&&parentNode._initChildren&&(dataSource=parentNode.children),result=DataSource.fn.remove.call(dataSource,node),parentNode&&!dataSource.data().length&&(parentNode.hasChildren=!1),result},success:dataMethod("success"),data:dataMethod("data"),insert:function(index,model){var parentNode=this.parent();return parentNode&&parentNode._initChildren&&(parentNode.hasChildren=!0,parentNode._initChildren()),DataSource.fn.insert.call(this,index,model)},_find:function(method,value){var idx,length,node,data,children;if(node=DataSource.fn[method].call(this,value))return node;if(data=this._flatData(this._data))for(idx=0,length=data.length;length>idx;idx++)if(children=data[idx].children,children instanceof HierarchicalDataSource&&(node=children[method](value)))return node},get:function(id){return this._find("get",id)},getByUid:function(uid){return this._find("getByUid",uid)}});HierarchicalDataSource.create=function(options){options=options&&options.push?{data:options}:options;var dataSource=options||{},data=dataSource.data,fields=dataSource.fields,list=dataSource.list;return data&&data._dataSource?data._dataSource:(data||!fields||dataSource.transport||list&&(data=inferList(list,fields)),dataSource.data=data,dataSource instanceof HierarchicalDataSource?dataSource:new HierarchicalDataSource(dataSource))};var Buffer=kendo.Observable.extend({init:function(dataSource,viewSize,disablePrefetch){kendo.Observable.fn.init.call(this),this._prefetching=!1,this.dataSource=dataSource,this.prefetch=!disablePrefetch;var buffer=this;dataSource.bind("change",function(){buffer._change()}),dataSource.bind("reset",function(){buffer._reset()}),this._syncWithDataSource(),this.setViewSize(viewSize)},setViewSize:function(viewSize){this.viewSize=viewSize,this._recalculate()},at:function(index){var pageSize=this.pageSize,itemPresent=!0;return index>=this.total()?(this.trigger("endreached",{index:index}),null):this.useRanges?this.useRanges?((index<this.dataOffset||index>=this.skip+pageSize)&&(itemPresent=this.range(Math.floor(index/pageSize)*pageSize)),index===this.prefetchThreshold&&this._prefetch(),index===this.midPageThreshold?this.range(this.nextMidRange,!0):index===this.nextPageThreshold?this.range(this.nextFullRange):index===this.pullBackThreshold&&(this.offset===this.skip?this.range(this.previousMidRange):this.range(this.previousFullRange)),itemPresent?this.dataSource.at(index-this.dataOffset):(this.trigger("endreached",{index:index}),null)):void 0:this.dataSource.view()[index]},indexOf:function(item){return this.dataSource.data().indexOf(item)+this.dataOffset},total:function(){return parseInt(this.dataSource.total(),10)},next:function(){var buffer=this,pageSize=buffer.pageSize,offset=buffer.skip-buffer.viewSize+pageSize,pageSkip=math.max(math.floor(offset/pageSize),0)*pageSize;this.offset=offset,this.dataSource.prefetch(pageSkip,pageSize,function(){buffer._goToRange(offset,!0)})},range:function(offset,nextRange){if(this.offset===offset)return!0;var buffer=this,pageSize=this.pageSize,pageSkip=math.max(math.floor(offset/pageSize),0)*pageSize,dataSource=this.dataSource;return nextRange&&(pageSkip+=pageSize),dataSource.inRange(offset,pageSize)?(this.offset=offset,this._recalculate(),this._goToRange(offset),!0):this.prefetch?(dataSource.prefetch(pageSkip,pageSize,function(){buffer.offset=offset,buffer._recalculate(),buffer._goToRange(offset,!0)}),!1):!0},syncDataSource:function(){var offset=this.offset;this.offset=null,this.range(offset)},destroy:function(){this.unbind()},_prefetch:function(){var buffer=this,pageSize=this.pageSize,prefetchOffset=this.skip+pageSize,dataSource=this.dataSource;dataSource.inRange(prefetchOffset,pageSize)||this._prefetching||!this.prefetch||(this._prefetching=!0,this.trigger("prefetching",{skip:prefetchOffset,take:pageSize}),dataSource.prefetch(prefetchOffset,pageSize,function(){buffer._prefetching=!1,buffer.trigger("prefetched",{skip:prefetchOffset,take:pageSize})}))},_goToRange:function(offset,expanding){this.offset===offset&&(this.dataOffset=offset,this._expanding=expanding,this.dataSource.range(offset,this.pageSize),this.dataSource.enableRequestsInProgress())},_reset:function(){this._syncPending=!0},_change:function(){var dataSource=this.dataSource;this.length=this.useRanges?dataSource.lastRange().end:dataSource.view().length,this._syncPending&&(this._syncWithDataSource(),this._recalculate(),this._syncPending=!1,this.trigger("reset",{offset:this.offset})),this.trigger("resize"),this._expanding&&this.trigger("expand"),delete this._expanding},_syncWithDataSource:function(){var dataSource=this.dataSource;this._firstItemUid=dataSource.firstItemUid(),this.dataOffset=this.offset=dataSource.skip()||0,this.pageSize=dataSource.pageSize(),this.useRanges=dataSource.options.serverPaging},_recalculate:function(){var pageSize=this.pageSize,offset=this.offset,viewSize=this.viewSize,skip=Math.ceil(offset/pageSize)*pageSize;this.skip=skip,this.midPageThreshold=skip+pageSize-1,this.nextPageThreshold=skip+viewSize-1,this.prefetchThreshold=skip+Math.floor(pageSize/3*2),this.pullBackThreshold=this.offset-1,this.nextMidRange=skip+pageSize-viewSize,this.nextFullRange=skip,this.previousMidRange=offset-viewSize,this.previousFullRange=skip-pageSize}}),BatchBuffer=kendo.Observable.extend({init:function(dataSource,batchSize){var batchBuffer=this;kendo.Observable.fn.init.call(batchBuffer),this.dataSource=dataSource,this.batchSize=batchSize,this._total=0,this.buffer=new Buffer(dataSource,3*batchSize),this.buffer.bind({endreached:function(e){batchBuffer.trigger("endreached",{index:e.index})},prefetching:function(e){batchBuffer.trigger("prefetching",{skip:e.skip,take:e.take})},prefetched:function(e){batchBuffer.trigger("prefetched",{skip:e.skip,take:e.take})},reset:function(){batchBuffer._total=0,batchBuffer.trigger("reset")},resize:function(){batchBuffer._total=Math.ceil(this.length/batchBuffer.batchSize),batchBuffer.trigger("resize",{total:batchBuffer.total(),offset:this.offset})}})},syncDataSource:function(){this.buffer.syncDataSource()},at:function(index){var item,buffer=this.buffer,skip=index*this.batchSize,take=this.batchSize,view=[];buffer.offset>skip&&buffer.at(buffer.offset-1);for(var i=0;take>i&&(item=buffer.at(skip+i),null!==item);i++)view.push(item);return view},total:function(){return this._total},destroy:function(){this.buffer.destroy(),this.unbind()}});extend(!0,kendo.data,{readers:{json:DataReader},Query:Query,DataSource:DataSource,HierarchicalDataSource:HierarchicalDataSource,Node:Node,ObservableObject:ObservableObject,ObservableArray:ObservableArray,LazyObservableArray:LazyObservableArray,LocalTransport:LocalTransport,RemoteTransport:RemoteTransport,Cache:Cache,DataReader:DataReader,Model:Model,Buffer:Buffer,BatchBuffer:BatchBuffer})}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(_,f){f()}),function(f,define){define(["./kendo.core"],f)}(function(){return function($,undefined){function touchDelta(touch1,touch2){var x1=touch1.x.location,y1=touch1.y.location,x2=touch2.x.location,y2=touch2.y.location,dx=x1-x2,dy=y1-y2;return{center:{x:(x1+x2)/2,y:(y1+y2)/2},distance:Math.sqrt(dx*dx+dy*dy)}}function getTouches(e){var length,changedTouches,touch,touches=[],originalEvent=e.originalEvent,currentTarget=e.currentTarget,idx=0;if(e.api)touches.push({id:2,event:e,target:e.target,currentTarget:e.target,location:e,type:"api"});else if(e.type.match(/touch/))for(changedTouches=originalEvent?originalEvent.changedTouches:[],length=changedTouches.length;length>idx;idx++)touch=changedTouches[idx],touches.push({location:touch,event:e,target:touch.target,currentTarget:currentTarget,id:touch.identifier,type:"touch"});else support.pointers||support.msPointers?touches.push({location:originalEvent,event:e,target:e.target,currentTarget:currentTarget,id:originalEvent.pointerId,type:"pointer"}):touches.push({id:1,event:e,target:e.target,currentTarget:currentTarget,location:e,type:"mouse"});return touches}function withEachUpEvent(callback){for(var downEvents=kendo.eventMap.up.split(" "),idx=0,length=downEvents.length;length>idx;idx++)callback(downEvents[idx])}var kendo=window.kendo,support=kendo.support,document=window.document,Class=kendo.Class,Observable=kendo.Observable,now=$.now,extend=$.extend,OS=support.mobileOS,invalidZeroEvents=OS&&OS.android,DEFAULT_MIN_HOLD=800,DEFAULT_THRESHOLD=support.browser.msie?5:0,PRESS="press",HOLD="hold",SELECT="select",START="start",MOVE="move",END="end",CANCEL="cancel",TAP="tap",RELEASE="release",GESTURESTART="gesturestart",GESTURECHANGE="gesturechange",GESTUREEND="gestureend",GESTURETAP="gesturetap",THRESHOLD={api:0,touch:0,mouse:9,pointer:9},ENABLE_GLOBAL_SURFACE=!support.touch||support.mouseAndTouchPresent,TouchAxis=Class.extend({init:function(axis,location){var that=this;that.axis=axis,that._updateLocationData(location),that.startLocation=that.location,that.velocity=that.delta=0,that.timeStamp=now()},move:function(location){var that=this,offset=location["page"+that.axis],timeStamp=now(),timeDelta=timeStamp-that.timeStamp||1;!offset&&invalidZeroEvents||(that.delta=offset-that.location,that._updateLocationData(location),that.initialDelta=offset-that.startLocation,that.velocity=that.delta/timeDelta,that.timeStamp=timeStamp)},_updateLocationData:function(location){var that=this,axis=that.axis;that.location=location["page"+axis],that.client=location["client"+axis],that.screen=location["screen"+axis]}}),Touch=Class.extend({init:function(userEvents,target,touchInfo){extend(this,{x:new TouchAxis("X",touchInfo.location),y:new TouchAxis("Y",touchInfo.location),type:touchInfo.type,threshold:userEvents.threshold||THRESHOLD[touchInfo.type],userEvents:userEvents,target:target,currentTarget:touchInfo.currentTarget,initialTouch:touchInfo.target,id:touchInfo.id,pressEvent:touchInfo,_moved:!1,_finished:!1})},press:function(){this._holdTimeout=setTimeout($.proxy(this,"_hold"),this.userEvents.minHold),this._trigger(PRESS,this.pressEvent)},_hold:function(){this._trigger(HOLD,this.pressEvent)},move:function(touchInfo){var that=this;if(!that._finished){if(that.x.move(touchInfo.location),that.y.move(touchInfo.location),!that._moved){if(that._withinIgnoreThreshold())return;if(UserEvents.current&&UserEvents.current!==that.userEvents)return that.dispose();that._start(touchInfo)}that._finished||that._trigger(MOVE,touchInfo)}},end:function(touchInfo){var that=this;that.endTime=now(),that._finished||(that._finished=!0,that._trigger(RELEASE,touchInfo),that._moved?that._trigger(END,touchInfo):that._trigger(TAP,touchInfo),clearTimeout(that._holdTimeout),that.dispose())},dispose:function(){var userEvents=this.userEvents,activeTouches=userEvents.touches;this._finished=!0,this.pressEvent=null,clearTimeout(this._holdTimeout),activeTouches.splice($.inArray(this,activeTouches),1)},skip:function(){this.dispose()},cancel:function(){this.dispose()},isMoved:function(){return this._moved},_start:function(touchInfo){clearTimeout(this._holdTimeout),this.startTime=now(),this._moved=!0,this._trigger(START,touchInfo)},_trigger:function(name,touchInfo){var that=this,jQueryEvent=touchInfo.event,data={touch:that,x:that.x,y:that.y,target:that.target,event:jQueryEvent};that.userEvents.notify(name,data)&&jQueryEvent.preventDefault()},_withinIgnoreThreshold:function(){var xDelta=this.x.initialDelta,yDelta=this.y.initialDelta;return Math.sqrt(xDelta*xDelta+yDelta*yDelta)<=this.threshold}}),UserEvents=Observable.extend({init:function(element,options){var filter,that=this,ns=kendo.guid();if(options=options||{},filter=that.filter=options.filter,that.threshold=options.threshold||DEFAULT_THRESHOLD,that.minHold=options.minHold||DEFAULT_MIN_HOLD,that.touches=[],that._maxTouches=options.multiTouch?2:1,that.allowSelection=options.allowSelection,that.captureUpIfMoved=options.captureUpIfMoved,that.eventNS=ns,element=$(element).handler(that),Observable.fn.init.call(that),extend(that,{element:element,surface:$(options.global&&ENABLE_GLOBAL_SURFACE?document.documentElement:options.surface||element),stopPropagation:options.stopPropagation,pressed:!1}),that.surface.handler(that).on(kendo.applyEventMap("move",ns),"_move").on(kendo.applyEventMap("up cancel",ns),"_end"),element.on(kendo.applyEventMap("down",ns),filter,"_start"),(support.pointers||support.msPointers)&&element.css("-ms-touch-action","pinch-zoom double-tap-zoom"),options.preventDragEvent&&element.on(kendo.applyEventMap("dragstart",ns),kendo.preventDefault),element.on(kendo.applyEventMap("mousedown",ns),filter,{root:element},"_select"),that.captureUpIfMoved&&support.eventCapture){var surfaceElement=that.surface[0],preventIfMovingProxy=$.proxy(that.preventIfMoving,that);withEachUpEvent(function(eventName){surfaceElement.addEventListener(eventName,preventIfMovingProxy,!0)})}that.bind([PRESS,HOLD,TAP,START,MOVE,END,RELEASE,CANCEL,GESTURESTART,GESTURECHANGE,GESTUREEND,GESTURETAP,SELECT],options)},preventIfMoving:function(e){this._isMoved()&&e.preventDefault()},destroy:function(){var that=this;if(!that._destroyed){if(that._destroyed=!0,that.captureUpIfMoved&&support.eventCapture){var surfaceElement=that.surface[0];withEachUpEvent(function(eventName){surfaceElement.removeEventListener(eventName,that.preventIfMoving)})}that.element.kendoDestroy(that.eventNS),that.surface.kendoDestroy(that.eventNS),that.element.removeData("handler"),that.surface.removeData("handler"),that._disposeAll(),that.unbind(),delete that.surface,delete that.element,delete that.currentTarget}},capture:function(){UserEvents.current=this},cancel:function(){this._disposeAll(),this.trigger(CANCEL)},notify:function(eventName,data){var that=this,touches=that.touches;if(this._isMultiTouch()){switch(eventName){case MOVE:eventName=GESTURECHANGE;break;case END:eventName=GESTUREEND;break;case TAP:eventName=GESTURETAP}extend(data,{touches:touches},touchDelta(touches[0],touches[1]))}return this.trigger(eventName,extend(data,{type:eventName}))},press:function(x,y,target){this._apiCall("_start",x,y,target)},move:function(x,y){this._apiCall("_move",x,y)},end:function(x,y){this._apiCall("_end",x,y)},_isMultiTouch:function(){return this.touches.length>1},_maxTouchesReached:function(){return this.touches.length>=this._maxTouches},_disposeAll:function(){for(var touches=this.touches;touches.length>0;)touches.pop().dispose()},_isMoved:function(){return $.grep(this.touches,function(touch){return touch.isMoved()}).length},_select:function(e){this.allowSelection&&!this.trigger(SELECT,{event:e})||e.preventDefault()},_start:function(e){var target,touch,that=this,idx=0,filter=that.filter,touches=getTouches(e),length=touches.length,which=e.which;if(!(which&&which>1||that._maxTouchesReached()))for(UserEvents.current=null,that.currentTarget=e.currentTarget,that.stopPropagation&&e.stopPropagation();length>idx&&!that._maxTouchesReached();idx++)touch=touches[idx],target=filter?$(touch.currentTarget):that.element,
target.length&&(touch=new Touch(that,target,touch),that.touches.push(touch),touch.press(),that._isMultiTouch()&&that.notify("gesturestart",{}))},_move:function(e){this._eachTouch("move",e)},_end:function(e){this._eachTouch("end",e)},_eachTouch:function(methodName,e){var idx,touch,touchInfo,matchingTouch,that=this,dict={},touches=getTouches(e),activeTouches=that.touches;for(idx=0;idx<activeTouches.length;idx++)touch=activeTouches[idx],dict[touch.id]=touch;for(idx=0;idx<touches.length;idx++)touchInfo=touches[idx],matchingTouch=dict[touchInfo.id],matchingTouch&&matchingTouch[methodName](touchInfo)},_apiCall:function(type,x,y,target){this[type]({api:!0,pageX:x,pageY:y,clientX:x,clientY:y,target:$(target||this.element)[0],stopPropagation:$.noop,preventDefault:$.noop})}});UserEvents.defaultThreshold=function(value){DEFAULT_THRESHOLD=value},UserEvents.minHold=function(value){DEFAULT_MIN_HOLD=value},kendo.getTouches=getTouches,kendo.touchDelta=touchDelta,kendo.UserEvents=UserEvents}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(_,f){f()}),function(f,define){define(["./kendo.core","./kendo.userevents"],f)}(function(){return function($,undefined){function collision(element,position){if(!element.is(":visible"))return!1;var elementPosition=kendo.getOffset(element),right=position.left+position.width,bottom=position.top+position.height;return elementPosition.right=elementPosition.left+element.outerWidth(),elementPosition.bottom=elementPosition.top+element.outerHeight(),!(elementPosition.left>right||elementPosition.right<position.left||elementPosition.top>bottom||elementPosition.bottom<position.top)}var kendo=window.kendo,Widget=kendo.ui.Widget,proxy=$.proxy,abs=Math.abs,ARIASELECTED=(Array.prototype.shift,"aria-selected"),SELECTED="k-state-selected",ACTIVE="k-state-selecting",SELECTABLE="k-selectable",CHANGE="change",NS=".kendoSelectable",UNSELECTING="k-state-unselecting",INPUTSELECTOR="input,a,textarea,.k-multiselect-wrap,select,button,a.k-button>.k-icon,button.k-button>.k-icon,span.k-icon.k-i-expand,span.k-icon.k-i-collapse",msie=kendo.support.browser.msie,supportEventDelegation=!1;!function($){!function(){$('<div class="parent"><span /></div>').on("click",">*",function(){supportEventDelegation=!0}).find("span").click().end().off()}()}($);var Selectable=Widget.extend({init:function(element,options){var multiple,that=this;Widget.fn.init.call(that,element,options),that._marquee=$("<div class='k-marquee'><div class='k-marquee-color'></div></div>"),that._lastActive=null,that.element.addClass(SELECTABLE),that.relatedTarget=that.options.relatedTarget,multiple=that.options.multiple,this.options.aria&&multiple&&that.element.attr("aria-multiselectable",!0),that.userEvents=new kendo.UserEvents(that.element,{global:!0,allowSelection:!0,filter:(supportEventDelegation?"":"."+SELECTABLE+" ")+that.options.filter,tap:proxy(that._tap,that)}),multiple&&that.userEvents.bind("start",proxy(that._start,that)).bind("move",proxy(that._move,that)).bind("end",proxy(that._end,that)).bind("select",proxy(that._select,that))},events:[CHANGE],options:{name:"Selectable",filter:">*",multiple:!1,relatedTarget:$.noop},_isElement:function(target){var idx,elements=this.element,length=elements.length,result=!1;for(target=target[0],idx=0;length>idx;idx++)if(elements[idx]===target){result=!0;break}return result},_tap:function(e){var selected,target=$(e.target),that=this,ctrlKey=e.event.ctrlKey||e.event.metaKey,multiple=that.options.multiple,shiftKey=multiple&&e.event.shiftKey,whichCode=e.event.which,buttonCode=e.event.button;!that._isElement(target.closest("."+SELECTABLE))||whichCode&&3==whichCode||buttonCode&&2==buttonCode||this._allowSelection(e.event.target)&&(selected=target.hasClass(SELECTED),multiple&&ctrlKey||that.clear(),target=target.add(that.relatedTarget(target)),shiftKey?that.selectRange(that._firstSelectee(),target):(selected&&ctrlKey?(that._unselect(target),that._notify(CHANGE)):that.value(target),that._lastActive=that._downTarget=target))},_start:function(e){var currentElement,that=this,target=$(e.target),selected=target.hasClass(SELECTED),ctrlKey=e.event.ctrlKey||e.event.metaKey;if(this._allowSelection(e.event.target)){if(that._downTarget=target,!that._isElement(target.closest("."+SELECTABLE)))return void that.userEvents.cancel();that.options.useAllItems?that._items=that.element.find(that.options.filter):(currentElement=target.closest(that.element),that._items=currentElement.find(that.options.filter)),e.sender.capture(),that._marquee.appendTo(document.body).css({left:e.x.client+1,top:e.y.client+1,width:0,height:0}),ctrlKey||that.clear(),target=target.add(that.relatedTarget(target)),selected&&(that._selectElement(target,!0),ctrlKey&&target.addClass(UNSELECTING))}},_move:function(e){var that=this,position={left:e.x.startLocation>e.x.location?e.x.location:e.x.startLocation,top:e.y.startLocation>e.y.location?e.y.location:e.y.startLocation,width:abs(e.x.initialDelta),height:abs(e.y.initialDelta)};that._marquee.css(position),that._invalidateSelectables(position,e.event.ctrlKey||e.event.metaKey),e.preventDefault()},_end:function(){var that=this;that._marquee.remove(),that._unselect(that.element.find(that.options.filter+"."+UNSELECTING)).removeClass(UNSELECTING);var target=that.element.find(that.options.filter+"."+ACTIVE);target=target.add(that.relatedTarget(target)),that.value(target),that._lastActive=that._downTarget,that._items=null},_invalidateSelectables:function(position,ctrlKey){var idx,length,related,toSelect,target=this._downTarget[0],items=this._items;for(idx=0,length=items.length;length>idx;idx++)toSelect=items.eq(idx),related=toSelect.add(this.relatedTarget(toSelect)),collision(toSelect,position)?toSelect.hasClass(SELECTED)?ctrlKey&&target!==toSelect[0]&&related.removeClass(SELECTED).addClass(UNSELECTING):toSelect.hasClass(ACTIVE)||toSelect.hasClass(UNSELECTING)||related.addClass(ACTIVE):toSelect.hasClass(ACTIVE)?related.removeClass(ACTIVE):ctrlKey&&toSelect.hasClass(UNSELECTING)&&related.removeClass(UNSELECTING).addClass(SELECTED)},value:function(val){var that=this,selectElement=proxy(that._selectElement,that);return val?(val.each(function(){selectElement(this)}),void that._notify(CHANGE)):that.element.find(that.options.filter+"."+SELECTED)},_firstSelectee:function(){var selected,that=this;return null!==that._lastActive?that._lastActive:(selected=that.value(),selected.length>0?selected[0]:that.element.find(that.options.filter)[0])},_selectElement:function(element,preventNotify){var toSelect=$(element),isPrevented=!preventNotify&&this._notify("select",{element:element});toSelect.removeClass(ACTIVE),isPrevented||(toSelect.addClass(SELECTED),this.options.aria&&toSelect.attr(ARIASELECTED,!0))},_notify:function(name,args){return args=args||{},this.trigger(name,args)},_unselect:function(element){return element.removeClass(SELECTED),this.options.aria&&element.attr(ARIASELECTED,!1),element},_select:function(e){this._allowSelection(e.event.target)&&(!msie||msie&&!$(kendo._activeElement()).is(INPUTSELECTOR))&&e.preventDefault()},_allowSelection:function(target){return $(target).is(INPUTSELECTOR)?(this.userEvents.cancel(),this._downTarget=null,!1):!0},resetTouchEvents:function(){this.userEvents.cancel()},clear:function(){var items=this.element.find(this.options.filter+"."+SELECTED);this._unselect(items)},selectRange:function(start,end){var idx,tmp,items,that=this;for(that.clear(),that.element.length>1&&(items=that.options.continuousItems()),items&&items.length||(items=that.element.find(that.options.filter)),start=$.inArray($(start)[0],items),end=$.inArray($(end)[0],items),start>end&&(tmp=start,start=end,end=tmp),that.options.useAllItems||(end+=that.element.length-1),idx=start;end>=idx;idx++)that._selectElement(items[idx]);that._notify(CHANGE)},destroy:function(){var that=this;Widget.fn.destroy.call(that),that.element.off(NS),that.userEvents.destroy(),that._marquee=that._lastActive=that.element=that.userEvents=null}});Selectable.parseOptions=function(selectable){var asLowerString="string"==typeof selectable&&selectable.toLowerCase();return{multiple:asLowerString&&asLowerString.indexOf("multiple")>-1,cell:asLowerString&&asLowerString.indexOf("cell")>-1}},kendo.ui.plugin(Selectable)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(_,f){f()}),function(f,define){define(["./kendo.core"],f)}(function(){return function($,undefined){var kendo=window.kendo,Widget=kendo.ui.Widget,proxy=$.proxy,keys=kendo.keys,CLICK="click",KBUTTON="k-button",KBUTTONICON="k-button-icon",KBUTTONICONTEXT="k-button-icontext",NS=".kendoButton",DISABLED="disabled",DISABLEDSTATE="k-state-disabled",FOCUSEDSTATE="k-state-focused",SELECTEDSTATE="k-state-selected",Button=Widget.extend({init:function(element,options){var that=this;Widget.fn.init.call(that,element,options),element=that.wrapper=that.element,options=that.options,element.addClass(KBUTTON).attr("role","button"),options.enable=options.enable&&!element.attr(DISABLED),that.enable(options.enable),that._tabindex(),that._graphics(),element.on(CLICK+NS,proxy(that._click,that)).on("focus"+NS,proxy(that._focus,that)).on("blur"+NS,proxy(that._blur,that)).on("keydown"+NS,proxy(that._keydown,that)).on("keyup"+NS,proxy(that._keyup,that)),kendo.notify(that)},destroy:function(){var that=this;that.wrapper.off(NS),Widget.fn.destroy.call(that)},events:[CLICK],options:{name:"Button",icon:"",spriteCssClass:"",imageUrl:"",enable:!0},_isNativeButton:function(){return"button"==this.element.prop("tagName").toLowerCase()},_click:function(e){this.options.enable&&this.trigger(CLICK,{event:e})&&e.preventDefault()},_focus:function(){this.options.enable&&this.element.addClass(FOCUSEDSTATE)},_blur:function(){this.element.removeClass(FOCUSEDSTATE)},_keydown:function(e){var that=this;that._isNativeButton()||e.keyCode!=keys.ENTER&&e.keyCode!=keys.SPACEBAR||(e.keyCode==keys.SPACEBAR&&(e.preventDefault(),that.options.enable&&that.element.addClass(SELECTEDSTATE)),that._click(e))},_keyup:function(){this.element.removeClass(SELECTEDSTATE)},_graphics:function(){var span,img,isEmpty,that=this,element=that.element,options=that.options,icon=options.icon,spriteCssClass=options.spriteCssClass,imageUrl=options.imageUrl;(spriteCssClass||imageUrl||icon)&&(isEmpty=!0,element.contents().not("span.k-sprite").not("span.k-icon").not("img.k-image").each(function(idx,el){(1==el.nodeType||3==el.nodeType&&$.trim(el.nodeValue).length>0)&&(isEmpty=!1)}),isEmpty?element.addClass(KBUTTONICON):element.addClass(KBUTTONICONTEXT)),icon?(span=element.children("span.k-icon").first(),span[0]||(span=$('<span class="k-icon"></span>').prependTo(element)),span.addClass("k-i-"+icon)):spriteCssClass?(span=element.children("span.k-sprite").first(),span[0]||(span=$('<span class="k-sprite"></span>').prependTo(element)),span.addClass(spriteCssClass)):imageUrl&&(img=element.children("img.k-image").first(),img[0]||(img=$('<img alt="icon" class="k-image" />').prependTo(element)),img.attr("src",imageUrl))},enable:function(enable){var that=this,element=that.element;enable===undefined&&(enable=!0),enable=!!enable,that.options.enable=enable,element.toggleClass(DISABLEDSTATE,!enable).attr("aria-disabled",!enable).attr(DISABLED,!enable);try{element.blur()}catch(err){}}});kendo.ui.plugin(Button)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(_,f){f()}),function(f,define){define(["./kendo.data"],f)}(function(){return function($,undefined){function button(template,idx,text,numeric,title){return template({idx:idx,text:text,ns:kendo.ns,numeric:numeric,title:title||""})}function icon(className,text,wrapClassName){return iconTemplate({className:className.substring(1),text:text,wrapClassName:wrapClassName||""})}function update(element,selector,page,disabled){element.find(selector).parent().attr(kendo.attr("page"),page).attr("tabindex",-1).toggleClass("k-state-disabled",disabled)}function first(element,page){update(element,FIRST,1,1>=page)}function prev(element,page){update(element,PREV,Math.max(1,page-1),1>=page)}function next(element,page,totalPages){update(element,NEXT,Math.min(totalPages,page+1),page>=totalPages)}function last(element,page,totalPages){update(element,LAST,totalPages,page>=totalPages)}var kendo=window.kendo,ui=kendo.ui,Widget=ui.Widget,proxy=$.proxy,FIRST=".k-i-seek-w",LAST=".k-i-seek-e",PREV=".k-i-arrow-w",NEXT=".k-i-arrow-e",CHANGE="change",NS=".kendoPager",CLICK="click",KEYDOWN="keydown",DISABLED="disabled",iconTemplate=kendo.template('<a href="\\#" title="#=text#" class="k-link k-pager-nav #= wrapClassName #"><span class="k-icon #= className #">#=text#</span></a>'),Pager=Widget.extend({init:function(element,options){var page,totalPages,that=this;Widget.fn.init.call(that,element,options),options=that.options,that.dataSource=kendo.data.DataSource.create(options.dataSource),that.linkTemplate=kendo.template(that.options.linkTemplate),that.selectTemplate=kendo.template(that.options.selectTemplate),that.currentPageTemplate=kendo.template(that.options.currentPageTemplate),page=that.page(),totalPages=that.totalPages(),that._refreshHandler=proxy(that.refresh,that),that.dataSource.bind(CHANGE,that._refreshHandler),options.previousNext&&(that.element.find(FIRST).length||(that.element.append(icon(FIRST,options.messages.first,"k-pager-first")),first(that.element,page,totalPages)),that.element.find(PREV).length||(that.element.append(icon(PREV,options.messages.previous)),prev(that.element,page,totalPages))),options.numeric&&(that.list=that.element.find(".k-pager-numbers"),that.list.length||(that.list=$('<ul class="k-pager-numbers k-reset" />').appendTo(that.element))),options.input&&(that.element.find(".k-pager-input").length||that.element.append('<span class="k-pager-input k-label">'+options.messages.page+'<input class="k-textbox">'+kendo.format(options.messages.of,totalPages)+"</span>"),that.element.on(KEYDOWN+NS,".k-pager-input input",proxy(that._keydown,that))),options.previousNext&&(that.element.find(NEXT).length||(that.element.append(icon(NEXT,options.messages.next)),next(that.element,page,totalPages)),that.element.find(LAST).length||(that.element.append(icon(LAST,options.messages.last,"k-pager-last")),last(that.element,page,totalPages))),options.pageSizes&&(that.element.find(".k-pager-sizes").length||$('<span class="k-pager-sizes k-label"><select/>'+options.messages.itemsPerPage+"</span>").appendTo(that.element).find("select").html($.map($.isArray(options.pageSizes)?options.pageSizes:[5,10,20],function(page){return"<option>"+page+"</option>"}).join("")).end().appendTo(that.element),that.element.find(".k-pager-sizes select").val(that.pageSize()),kendo.ui.DropDownList&&that.element.find(".k-pager-sizes select").show().kendoDropDownList(),that.element.on(CHANGE+NS,".k-pager-sizes select",proxy(that._change,that))),options.refresh&&(that.element.find(".k-pager-refresh").length||that.element.append('<a href="#" class="k-pager-refresh k-link" title="'+options.messages.refresh+'"><span class="k-icon k-i-refresh">'+options.messages.refresh+"</span></a>"),that.element.on(CLICK+NS,".k-pager-refresh",proxy(that._refreshClick,that))),options.info&&(that.element.find(".k-pager-info").length||that.element.append('<span class="k-pager-info k-label" />')),that.element.on(CLICK+NS,"a",proxy(that._click,that)).addClass("k-pager-wrap k-widget"),that.element.on(CLICK+NS,".k-current-page",proxy(that._toggleActive,that)),options.autoBind&&that.refresh(),kendo.notify(that)},destroy:function(){var that=this;Widget.fn.destroy.call(that),that.element.off(NS),that.dataSource.unbind(CHANGE,that._refreshHandler),that._refreshHandler=null,kendo.destroy(that.element),that.element=that.list=null},events:[CHANGE],options:{name:"Pager",selectTemplate:'<li><span class="k-state-selected">#=text#</span></li>',currentPageTemplate:'<li class="k-current-page"><span class="k-link k-pager-nav">#=text#</span></li>',linkTemplate:'<li><a tabindex="-1" href="\\#" class="k-link" data-#=ns#page="#=idx#" #if (title !== "") {# title="#=title#" #}#>#=text#</a></li>',buttonCount:10,autoBind:!0,numeric:!0,info:!0,input:!1,previousNext:!0,pageSizes:!1,refresh:!1,messages:{display:"{0} - {1} of {2} items",empty:"No items to display",page:"Page",of:"of {0}",itemsPerPage:"items per page",first:"Go to the first page",previous:"Go to the previous page",next:"Go to the next page",last:"Go to the last page",refresh:"Refresh",morePages:"More pages"}},setDataSource:function(dataSource){var that=this;that.dataSource.unbind(CHANGE,that._refreshHandler),that.dataSource=that.options.dataSource=dataSource,dataSource.bind(CHANGE,that._refreshHandler),that.options.autoBind&&dataSource.fetch()},refresh:function(e){var idx,end,reminder,that=this,start=1,page=that.page(),html="",options=that.options,pageSize=that.pageSize(),total=that.dataSource.total(),totalPages=that.totalPages(),linkTemplate=that.linkTemplate,buttonCount=options.buttonCount;if(!e||"itemchange"!=e.action){if(options.numeric){for(page>buttonCount&&(reminder=page%buttonCount,start=0===reminder?page-buttonCount+1:page-reminder+1),end=Math.min(start+buttonCount-1,totalPages),start>1&&(html+=button(linkTemplate,start-1,"...",!1,options.messages.morePages)),idx=start;end>=idx;idx++)html+=button(idx==page?that.selectTemplate:linkTemplate,idx,idx,!0);totalPages>end&&(html+=button(linkTemplate,idx,"...",!1,options.messages.morePages)),""===html&&(html=that.selectTemplate({text:0})),html=this.currentPageTemplate({text:page})+html,that.list.removeClass("k-state-expanded").html(html)}options.info&&(html=total>0?kendo.format(options.messages.display,(page-1)*pageSize+1,Math.min(page*pageSize,total),total):options.messages.empty,that.element.find(".k-pager-info").html(html)),options.input&&that.element.find(".k-pager-input").html(that.options.messages.page+'<input class="k-textbox">'+kendo.format(options.messages.of,totalPages)).find("input").val(page).attr(DISABLED,1>total).toggleClass("k-state-disabled",1>total),options.previousNext&&(first(that.element,page,totalPages),prev(that.element,page,totalPages),next(that.element,page,totalPages),last(that.element,page,totalPages)),options.pageSizes&&that.element.find(".k-pager-sizes select").val(pageSize).filter("["+kendo.attr("role")+"=dropdownlist]").kendoDropDownList("value",pageSize).kendoDropDownList("text",pageSize)}},_keydown:function(e){if(e.keyCode===kendo.keys.ENTER){var input=this.element.find(".k-pager-input").find("input"),page=parseInt(input.val(),10);(isNaN(page)||1>page||page>this.totalPages())&&(page=this.page()),input.val(page),this.page(page)}},_refreshClick:function(e){e.preventDefault(),this.dataSource.read()},_change:function(e){var pageSize=parseInt(e.currentTarget.value,10);isNaN(pageSize)||this.dataSource.pageSize(pageSize)},_toggleActive:function(e){this.list.toggleClass("k-state-expanded")},_click:function(e){var target=$(e.currentTarget);e.preventDefault(),target.is(".k-state-disabled")||this.page(target.attr(kendo.attr("page")))},totalPages:function(){return Math.ceil((this.dataSource.total()||0)/this.pageSize())},pageSize:function(){return this.dataSource.pageSize()||this.dataSource.total()},page:function(page){return page===undefined?this.dataSource.total()>0?this.dataSource.page():0:(this.dataSource.page(page),void this.trigger(CHANGE,{index:page}))}});ui.plugin(Pager)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(_,f){f()}),function(f,define){define(["./kendo.core"],f)}(function(){return function($,undefined){function contains(container,target){return container===target||$.contains(container,target)}var kendo=window.kendo,ui=kendo.ui,Widget=ui.Widget,support=kendo.support,getOffset=kendo.getOffset,OPEN=(kendo._activeElement,"open"),CLOSE="close",DEACTIVATE="deactivate",ACTIVATE="activate",CENTER="center",LEFT="left",RIGHT="right",TOP="top",BOTTOM="bottom",ABSOLUTE="absolute",HIDDEN="hidden",BODY="body",LOCATION="location",POSITION="position",VISIBLE="visible",EFFECTS="effects",ACTIVE="k-state-active",ACTIVEBORDER="k-state-border",ACTIVEBORDERREGEXP=/k-state-border-(\w+)/,ACTIVECHILDREN=".k-picker-wrap, .k-dropdown-wrap, .k-link",MOUSEDOWN="down",DOCUMENT_ELEMENT=$(document.documentElement),WINDOW=$(window),SCROLL="scroll",RESIZE_SCROLL="resize scroll",cssPrefix=support.transitions.css,TRANSFORM=cssPrefix+"transform",extend=$.extend,NS=".kendoPopup",styles=["font-size","font-family","font-stretch","font-style","font-weight","line-height"],Popup=Widget.extend({init:function(element,options){var parentPopup,that=this;options=options||{},options.isRtl&&(options.origin=options.origin||BOTTOM+" "+RIGHT,options.position=options.position||TOP+" "+RIGHT),Widget.fn.init.call(that,element,options),element=that.element,options=that.options,that.collisions=options.collision?options.collision.split(" "):[],that.downEvent=kendo.applyEventMap(MOUSEDOWN,kendo.guid()),1===that.collisions.length&&that.collisions.push(that.collisions[0]),parentPopup=$(that.options.anchor).closest(".k-popup,.k-group").filter(":not([class^=km-])"),options.appendTo=$($(options.appendTo)[0]||parentPopup[0]||BODY),that.element.hide().addClass("k-popup k-group k-reset").toggleClass("k-rtl",!!options.isRtl).css({position:ABSOLUTE}).appendTo(options.appendTo).on("mouseenter"+NS,function(){that._hovered=!0}).on("mouseleave"+NS,function(){that._hovered=!1}),that.wrapper=$(),options.animation===!1&&(options.animation={open:{effects:{}},close:{hide:!0,effects:{}}}),extend(options.animation.open,{complete:function(){that.wrapper.css({overflow:VISIBLE}),that._activated=!0,that._trigger(ACTIVATE)}}),extend(options.animation.close,{complete:function(){that._animationClose()}}),that._mousedownProxy=function(e){that._mousedown(e)},that._resizeProxy=function(e){that._resize(e)},options.toggleTarget&&$(options.toggleTarget).on(options.toggleEvent+NS,$.proxy(that.toggle,that))},events:[OPEN,ACTIVATE,CLOSE,DEACTIVATE],options:{name:"Popup",toggleEvent:"click",origin:BOTTOM+" "+LEFT,position:TOP+" "+LEFT,anchor:BODY,appendTo:null,collision:"flip fit",viewport:window,copyAnchorStyles:!0,autosize:!1,modal:!1,adjustSize:{width:0,height:0},animation:{open:{effects:"slideIn:down",transition:!0,duration:200},close:{duration:100,hide:!0}}},_animationClose:function(){var that=this,options=that.options;that.wrapper.hide();var direction,dirClass,location=that.wrapper.data(LOCATION),anchor=$(options.anchor);location&&that.wrapper.css(location),options.anchor!=BODY&&(direction=((anchor.attr("class")||"").match(ACTIVEBORDERREGEXP)||["","down"])[1],dirClass=ACTIVEBORDER+"-"+direction,anchor.removeClass(dirClass).children(ACTIVECHILDREN).removeClass(ACTIVE).removeClass(dirClass),that.element.removeClass(ACTIVEBORDER+"-"+kendo.directions[direction].reverse)),that._closing=!1,that._trigger(DEACTIVATE)},destroy:function(){var parent,that=this,options=that.options,element=that.element.off(NS);Widget.fn.destroy.call(that),options.toggleTarget&&$(options.toggleTarget).off(NS),options.modal||(DOCUMENT_ELEMENT.unbind(that.downEvent,that._mousedownProxy),that._scrollableParents().unbind(SCROLL,that._resizeProxy),WINDOW.unbind(RESIZE_SCROLL,that._resizeProxy)),kendo.destroy(that.element.children()),element.removeData(),options.appendTo[0]===document.body&&(parent=element.parent(".k-animation-container"),parent[0]?parent.remove():element.remove())},open:function(x,y){var animation,wrapper,that=this,fixed={isFixed:!isNaN(parseInt(y,10)),x:x,y:y},element=that.element,options=that.options,direction="down",anchor=$(options.anchor),mobile=element[0]&&element.hasClass("km-widget");if(!that.visible()){if(options.copyAnchorStyles&&(mobile&&"font-size"==styles[0]&&styles.shift(),element.css(kendo.getComputedStyles(anchor[0],styles))),element.data("animating")||that._trigger(OPEN))return;if(that._activated=!1,options.modal||(DOCUMENT_ELEMENT.unbind(that.downEvent,that._mousedownProxy).bind(that.downEvent,that._mousedownProxy),support.mobileOS.ios||support.mobileOS.android||(that._scrollableParents().unbind(SCROLL,that._resizeProxy).bind(SCROLL,that._resizeProxy),WINDOW.unbind(RESIZE_SCROLL,that._resizeProxy).bind(RESIZE_SCROLL,that._resizeProxy))),that.wrapper=wrapper=kendo.wrap(element,options.autosize).css({overflow:HIDDEN,display:"block",position:ABSOLUTE}),support.mobileOS.android&&wrapper.css(TRANSFORM,"translatez(0)"),wrapper.css(POSITION),$(options.appendTo)[0]==document.body&&wrapper.css(TOP,"-10000px"),animation=extend(!0,{},options.animation.open),that.flipped=that._position(fixed),animation.effects=kendo.parseEffects(animation.effects,that.flipped),direction=animation.effects.slideIn?animation.effects.slideIn.direction:direction,options.anchor!=BODY){var dirClass=ACTIVEBORDER+"-"+direction;element.addClass(ACTIVEBORDER+"-"+kendo.directions[direction].reverse),anchor.addClass(dirClass).children(ACTIVECHILDREN).addClass(ACTIVE).addClass(dirClass)}element.data(EFFECTS,animation.effects).kendoStop(!0).kendoAnimate(animation)}},position:function(){this.visible()&&this._position()},toggle:function(){var that=this;that[that.visible()?CLOSE:OPEN]()},visible:function(){return this.element.is(":"+VISIBLE)},close:function(skipEffects){var wrap,animation,openEffects,closeEffects,that=this,options=that.options;if(that.visible()){if(wrap=that.wrapper[0]?that.wrapper:kendo.wrap(that.element).hide(),that._closing||that._trigger(CLOSE))return;that.element.find(".k-popup").each(function(){var that=$(this),popup=that.data("kendoPopup");popup&&popup.close(skipEffects)}),DOCUMENT_ELEMENT.unbind(that.downEvent,that._mousedownProxy),that._scrollableParents().unbind(SCROLL,that._resizeProxy),WINDOW.unbind(RESIZE_SCROLL,that._resizeProxy),skipEffects?animation={hide:!0,effects:{}}:(animation=extend(!0,{},options.animation.close),openEffects=that.element.data(EFFECTS),closeEffects=animation.effects,!closeEffects&&!kendo.size(closeEffects)&&openEffects&&kendo.size(openEffects)&&(animation.effects=openEffects,animation.reverse=!0),that._closing=!0),that.element.kendoStop(!0),wrap.css({overflow:HIDDEN}),that.element.kendoAnimate(animation)}},_trigger:function(ev){return this.trigger(ev,{type:ev})},_resize:function(e){var that=this;"resize"===e.type?(clearTimeout(that._resizeTimeout),that._resizeTimeout=setTimeout(function(){that._position(),that._resizeTimeout=null},50)):(!that._hovered||that._activated&&that.element.hasClass("k-list-container"))&&that.close()},_mousedown:function(e){var that=this,container=that.element[0],options=that.options,anchor=$(options.anchor)[0],toggleTarget=options.toggleTarget,target=kendo.eventTarget(e),popup=$(target).closest(".k-popup"),mobile=popup.parent().parent(".km-shim").length;popup=popup[0],!mobile&&popup&&popup!==that.element[0]||"popover"!==$(e.target).closest("a").data("rel")&&(contains(container,target)||contains(anchor,target)||toggleTarget&&contains($(toggleTarget)[0],target)||that.close())},_fit:function(position,size,viewPortSize){var output=0;return position+size>viewPortSize&&(output=viewPortSize-(position+size)),0>position&&(output=-position),output},_flip:function(offset,size,anchorSize,viewPortSize,origin,position,boxSize){var output=0;return boxSize=boxSize||size,position!==origin&&position!==CENTER&&origin!==CENTER&&(offset+boxSize>viewPortSize&&(output+=-(anchorSize+size)),0>offset+output&&(output+=anchorSize+size)),output},_scrollableParents:function(){return $(this.options.anchor).parentsUntil("body").filter(function(index,element){var computedStyle=kendo.getComputedStyles(element,["overflow"]);return"visible"!=computedStyle.overflow})},_position:function(fixed){var siblingContainer,parents,parentZIndex,length,viewportWidth,viewportHeight,that=this,element=that.element,wrapper=that.wrapper,options=that.options,viewport=$(options.viewport),viewportOffset=viewport.offset(),anchor=$(options.anchor),origins=options.origin.toLowerCase().split(" "),positions=options.position.toLowerCase().split(" "),collisions=that.collisions,zoomLevel=support.zoomLevel(),zIndex=10002,isWindow=!!(viewport[0]==window&&window.innerWidth&&1.02>=zoomLevel),idx=0,docEl=document.documentElement;if(viewportWidth=isWindow?window.innerWidth:viewport.width(),viewportHeight=isWindow?window.innerHeight:viewport.height(),isWindow&&docEl.scrollHeight-docEl.clientHeight>0&&(viewportWidth-=kendo.support.scrollbar()),siblingContainer=anchor.parents().filter(wrapper.siblings()),siblingContainer[0])if(parentZIndex=Math.max(Number(siblingContainer.css("zIndex")),0))zIndex=parentZIndex+10;else for(parents=anchor.parentsUntil(siblingContainer),length=parents.length;length>idx;idx++)parentZIndex=Number($(parents[idx]).css("zIndex")),parentZIndex&&parentZIndex>zIndex&&(zIndex=parentZIndex+10);wrapper.css("zIndex",zIndex),fixed&&fixed.isFixed?wrapper.css({left:fixed.x,top:fixed.y}):wrapper.css(that._align(origins,positions));var pos=getOffset(wrapper,POSITION,anchor[0]===wrapper.offsetParent()[0]),offset=getOffset(wrapper),anchorParent=anchor.offsetParent().parent(".k-animation-container,.k-popup,.k-group");anchorParent.length&&(pos=getOffset(wrapper,POSITION,!0),offset=getOffset(wrapper)),viewport[0]===window?(offset.top-=window.pageYOffset||document.documentElement.scrollTop||0,offset.left-=window.pageXOffset||document.documentElement.scrollLeft||0):(offset.top-=viewportOffset.top,offset.left-=viewportOffset.left),that.wrapper.data(LOCATION)||wrapper.data(LOCATION,extend({},pos));var offsets=extend({},offset),location=extend({},pos),adjustSize=options.adjustSize;"fit"===collisions[0]&&(location.top+=that._fit(offsets.top,wrapper.outerHeight()+adjustSize.height,viewportHeight/zoomLevel)),"fit"===collisions[1]&&(location.left+=that._fit(offsets.left,wrapper.outerWidth()+adjustSize.width,viewportWidth/zoomLevel));var flipPos=extend({},location);return"flip"===collisions[0]&&(location.top+=that._flip(offsets.top,element.outerHeight(),anchor.outerHeight(),viewportHeight/zoomLevel,origins[0],positions[0],wrapper.outerHeight())),"flip"===collisions[1]&&(location.left+=that._flip(offsets.left,element.outerWidth(),anchor.outerWidth(),viewportWidth/zoomLevel,origins[1],positions[1],wrapper.outerWidth())),element.css(POSITION,ABSOLUTE),wrapper.css(location),location.left!=flipPos.left||location.top!=flipPos.top},_align:function(origin,position){var appendToOffset,that=this,element=that.wrapper,anchor=$(that.options.anchor),verticalOrigin=origin[0],horizontalOrigin=origin[1],verticalPosition=position[0],horizontalPosition=position[1],anchorOffset=getOffset(anchor),appendTo=$(that.options.appendTo),width=element.outerWidth(),height=element.outerHeight(),anchorWidth=anchor.outerWidth(),anchorHeight=anchor.outerHeight(),top=anchorOffset.top,left=anchorOffset.left,round=Math.round;return appendTo[0]!=document.body&&(appendToOffset=getOffset(appendTo),top-=appendToOffset.top,left-=appendToOffset.left),verticalOrigin===BOTTOM&&(top+=anchorHeight),verticalOrigin===CENTER&&(top+=round(anchorHeight/2)),verticalPosition===BOTTOM&&(top-=height),verticalPosition===CENTER&&(top-=round(height/2)),horizontalOrigin===RIGHT&&(left+=anchorWidth),horizontalOrigin===CENTER&&(left+=round(anchorWidth/2)),horizontalPosition===RIGHT&&(left-=width),horizontalPosition===CENTER&&(left-=round(width/2)),{top:top,left:left}}});ui.plugin(Popup)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(_,f){f()}),function(f,define){define(["./kendo.core","./kendo.popup"],f)}(function(){return function($,undefined){var kendo=window.kendo,Widget=kendo.ui.Widget,proxy=$.proxy,extend=$.extend,setTimeout=window.setTimeout,CLICK="click",SHOW="show",HIDE="hide",KNOTIFICATION="k-notification",KICLOSE=".k-notification-wrap .k-i-close",INFO="info",SUCCESS="success",WARNING="warning",ERROR="error",TOP="top",LEFT="left",BOTTOM="bottom",RIGHT="right",UP="up",NS=".kendoNotification",WRAPPER='<div class="k-widget k-notification"></div>',TEMPLATE='<div class="k-notification-wrap"><span class="k-icon k-i-note">#=typeIcon#</span>#=content#<span class="k-icon k-i-close">Hide</span></div>',Notification=Widget.extend({
init:function(element,options){var that=this;Widget.fn.init.call(that,element,options),options=that.options,options.appendTo&&$(options.appendTo).is(element)||that.element.hide(),that._compileTemplates(options.templates),that._guid="_"+kendo.guid(),that._isRtl=kendo.support.isRtl(element),that._compileStacking(options.stacking,options.position.top),kendo.notify(that)},events:[SHOW,HIDE],options:{name:"Notification",position:{pinned:!0,top:null,left:null,bottom:20,right:20},stacking:"default",hideOnClick:!0,button:!1,allowHideAfter:0,autoHideAfter:5e3,appendTo:null,width:null,height:null,templates:[],animation:{open:{effects:"fade:in",duration:300},close:{effects:"fade:out",duration:600,hide:!0}}},_compileTemplates:function(templates){var that=this,kendoTemplate=kendo.template;that._compiled={},$.each(templates,function(key,value){that._compiled[value.type]=kendoTemplate(value.template||$("#"+value.templateId).html())}),that._defaultCompiled=kendoTemplate(TEMPLATE)},_getCompiled:function(type){var that=this,defaultCompiled=that._defaultCompiled;return type?that._compiled[type]||defaultCompiled:defaultCompiled},_compileStacking:function(stacking,top){var origin,position,that=this,paddings={paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0};switch(stacking){case"down":origin=BOTTOM+" "+LEFT,position=TOP+" "+LEFT,delete paddings.paddingBottom;break;case RIGHT:origin=TOP+" "+RIGHT,position=TOP+" "+LEFT,delete paddings.paddingRight;break;case LEFT:origin=TOP+" "+LEFT,position=TOP+" "+RIGHT,delete paddings.paddingLeft;break;case UP:origin=TOP+" "+LEFT,position=BOTTOM+" "+LEFT,delete paddings.paddingTop;break;default:null!==top?(origin=BOTTOM+" "+LEFT,position=TOP+" "+LEFT,delete paddings.paddingBottom):(origin=TOP+" "+LEFT,position=BOTTOM+" "+LEFT,delete paddings.paddingTop)}that._popupOrigin=origin,that._popupPosition=position,that._popupPaddings=paddings},_attachPopupEvents:function(options,popup){function attachClick(target){target.on(CLICK+NS,function(){popup.close()})}var closeIcon,allowHideAfter=options.allowHideAfter,attachDelay=!isNaN(allowHideAfter)&&allowHideAfter>0;options.hideOnClick?popup.bind("activate",function(e){attachDelay?setTimeout(function(){attachClick(popup.element)},allowHideAfter):attachClick(popup.element)}):options.button&&(closeIcon=popup.element.find(KICLOSE),attachDelay?setTimeout(function(){attachClick(closeIcon)},allowHideAfter):attachClick(closeIcon))},_showPopup:function(wrapper,options){var popup,openPopup,that=this,autoHideAfter=options.autoHideAfter,x=options.position.left,y=options.position.top;options.allowHideAfter;openPopup=$("."+that._guid).last(),popup=new kendo.ui.Popup(wrapper,{anchor:openPopup[0]?openPopup:document.body,origin:that._popupOrigin,position:that._popupPosition,animation:options.animation,modal:!0,collision:"",isRtl:that._isRtl,close:function(e){that._triggerHide(this.element)},deactivate:function(e){e.sender.element.off(NS),e.sender.element.find(KICLOSE).off(NS),e.sender.destroy()}}),that._attachPopupEvents(options,popup),openPopup[0]?popup.open():(null===x&&(x=$(window).width()-wrapper.width()-options.position.right),null===y&&(y=$(window).height()-wrapper.height()-options.position.bottom),popup.open(x,y)),popup.wrapper.addClass(that._guid).css(extend({margin:0},that._popupPaddings)),options.position.pinned?(popup.wrapper.css("position","fixed"),openPopup[0]&&that._togglePin(popup.wrapper,!0)):openPopup[0]||that._togglePin(popup.wrapper,!1),autoHideAfter>0&&setTimeout(function(){popup.close()},autoHideAfter)},_togglePin:function(wrapper,pin){var win=$(window),sign=pin?-1:1;wrapper.css({top:parseInt(wrapper.css(TOP),10)+sign*win.scrollTop(),left:parseInt(wrapper.css(LEFT),10)+sign*win.scrollLeft()})},_attachStaticEvents:function(options,wrapper){function attachClick(target){target.on(CLICK+NS,proxy(that._hideStatic,that,wrapper))}var that=this,allowHideAfter=options.allowHideAfter,attachDelay=!isNaN(allowHideAfter)&&allowHideAfter>0;options.hideOnClick?attachDelay?setTimeout(function(){attachClick(wrapper)},allowHideAfter):attachClick(wrapper):options.button&&(attachDelay?setTimeout(function(){attachClick(wrapper.find(KICLOSE))},allowHideAfter):attachClick(wrapper.find(KICLOSE)))},_showStatic:function(wrapper,options){var that=this,autoHideAfter=options.autoHideAfter,animation=options.animation,insertionMethod=options.stacking==UP||options.stacking==LEFT?"prependTo":"appendTo";wrapper.addClass(that._guid)[insertionMethod](options.appendTo).hide().kendoAnimate(animation.open||!1),that._attachStaticEvents(options,wrapper),autoHideAfter>0&&setTimeout(function(){that._hideStatic(wrapper)},autoHideAfter)},_hideStatic:function(wrapper){wrapper.kendoAnimate(extend(this.options.animation.close||!1,{complete:function(){wrapper.off(NS).find(KICLOSE).off(NS),wrapper.remove()}})),this._triggerHide(wrapper)},_triggerHide:function(element){this.trigger(HIDE,{element:element}),this.angular("cleanup",function(){return{elements:element}})},show:function(content,type){var args,defaultArgs,that=this,options=that.options,wrapper=$(WRAPPER);return type||(type=INFO),null!==content&&content!==undefined&&""!==content&&(kendo.isFunction(content)&&(content=content()),defaultArgs={typeIcon:type,content:""},args=$.isPlainObject(content)?extend(defaultArgs,content):extend(defaultArgs,{content:content}),wrapper.addClass(KNOTIFICATION+"-"+type).toggleClass(KNOTIFICATION+"-button",options.button).attr("data-role","alert").css({width:options.width,height:options.height}).append(that._getCompiled(type)(args)),that.angular("compile",function(){return{elements:wrapper,data:[{dataItem:args}]}}),$(options.appendTo)[0]?that._showStatic(wrapper,options):that._showPopup(wrapper,options),that.trigger(SHOW,{element:wrapper})),that},info:function(content){return this.show(content,INFO)},success:function(content){return this.show(content,SUCCESS)},warning:function(content){return this.show(content,WARNING)},error:function(content){return this.show(content,ERROR)},hide:function(){var that=this,openedNotifications=that.getNotifications();return that.options.appendTo?openedNotifications.each(function(idx,element){that._hideStatic($(element))}):openedNotifications.each(function(idx,element){var popup=$(element).data("kendoPopup");popup&&popup.close()}),that},getNotifications:function(){var that=this,guidElements=$("."+that._guid);return that.options.appendTo?guidElements:guidElements.children("."+KNOTIFICATION)},setOptions:function(newOptions){var options,that=this;Widget.fn.setOptions.call(that,newOptions),options=that.options,newOptions.templates!==undefined&&that._compileTemplates(options.templates),newOptions.stacking===undefined&&newOptions.position===undefined||that._compileStacking(options.stacking,options.position.top)},destroy:function(){Widget.fn.destroy.call(this),this.getNotifications().off(NS).find(KICLOSE).off(NS)}});kendo.ui.plugin(Notification)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(_,f){f()}),function(f,define){define(["./kendo.data","./kendo.popup"],f)}(function(){return function($,undefined){function findChangedItems(selected,changed){var dataItem,i,j,changedLength=changed.length,result=[];for(i=0;i<selected.length;i++)for(dataItem=selected[i],j=0;changedLength>j;j++)dataItem===changed[j]&&result.push({index:i,item:dataItem});return result}function removeFiltersForField(expression,field){var filters,found=!1;return expression.filters&&(filters=$.grep(expression.filters,function(filter){return found=removeFiltersForField(filter,field),filter.filters?filter.filters.length:filter.field!=field}),found||expression.filters.length===filters.length||(found=!0),expression.filters=filters),found}var kendo=window.kendo,ui=kendo.ui,Widget=ui.Widget,keys=kendo.keys,support=kendo.support,htmlEncode=kendo.htmlEncode,activeElement=kendo._activeElement,ObservableArray=kendo.data.ObservableArray,ID="id",CHANGE="change",FOCUSED="k-state-focused",HOVER="k-state-hover",LOADING="k-loading",OPEN="open",CLOSE="close",SELECT="select",SELECTED="selected",PROGRESS="progress",REQUESTEND="requestEnd",WIDTH="width",extend=$.extend,proxy=$.proxy,isArray=$.isArray,browser=support.browser,isIE8=browser.msie&&browser.version<9,quotRegExp=/"/g,alternativeNames={ComboBox:"DropDownList",DropDownList:"ComboBox"},List=kendo.ui.DataBoundWidget.extend({init:function(element,options){var id,that=this,ns=that.ns;Widget.fn.init.call(that,element,options),element=that.element,options=that.options,that._isSelect=element.is(SELECT),that._isSelect&&that.element[0].length&&(options.dataSource||(options.dataTextField=options.dataTextField||"text",options.dataValueField=options.dataValueField||"value")),that.ul=$('<ul unselectable="on" class="k-list k-reset"/>').attr({tabIndex:-1,"aria-hidden":!0}),that.list=$("<div class='k-list-container'/>").append(that.ul).on("mousedown"+ns,proxy(that._listMousedown,that)),id=element.attr(ID),id&&(that.list.attr(ID,id+"-list"),that.ul.attr(ID,id+"_listbox")),that._header(),that._accessors(),that._initValue()},options:{valuePrimitive:!1,headerTemplate:""},setOptions:function(options){Widget.fn.setOptions.call(this,options),options&&options.enable!==undefined&&(options.enabled=options.enable)},focus:function(){this._focused.focus()},readonly:function(readonly){this._editable({readonly:readonly===undefined?!0:readonly,disable:!1})},enable:function(enable){this._editable({readonly:!1,disable:!(enable=enable===undefined?!0:enable)})},_listOptions:function(options){var currentOptions=this.options;return options=options||{},options={height:options.height||currentOptions.height,dataValueField:options.dataValueField||currentOptions.dataValueField,dataTextField:options.dataTextField||currentOptions.dataTextField,groupTemplate:options.groupTemplate||currentOptions.groupTemplate,fixedGroupTemplate:options.fixedGroupTemplate||currentOptions.fixedGroupTemplate,template:options.template||currentOptions.template},options.template||(options.template="#:"+kendo.expr(options.dataTextField,"data")+"#"),options},_initList:function(){var that=this,options=that.options,virtual=options.virtual,hasVirtual=!!virtual,value=options.value,listBoundHandler=proxy(that._listBound,that),listOptions={autoBind:!1,selectable:!0,dataSource:that.dataSource,click:proxy(that._click,that),change:proxy(that._listChange,that),activate:proxy(that._activateItem,that),deactivate:proxy(that._deactivateItem,that),dataBinding:function(){that.trigger("dataBinding"),that._angularItems("cleanup")},dataBound:listBoundHandler,listBound:listBoundHandler,selectedItemChange:proxy(that._listChange,that)};listOptions=$.extend(that._listOptions(),listOptions,"object"==typeof virtual?virtual:{}),hasVirtual?that.listView=new kendo.ui.VirtualList(that.ul,listOptions):(that.listView=new kendo.ui.StaticList(that.ul,listOptions),that.listView.setTouchScroller(that._touchScroller)),value!==undefined&&that.listView.value(value).done(function(){var text=options.text;!that.listView.filter()&&that.input&&(-1===that.selectedIndex?(text!==undefined&&null!==text||(text=value),that._accessor(value),that.input.val(text)):-1===that._oldIndex&&(that._oldIndex=that.selectedIndex))})},_listMousedown:function(e){this.filterInput&&this.filterInput[0]===e.target||e.preventDefault()},_filterSource:function(filter,force){var that=this,options=that.options,dataSource=that.dataSource,expression=extend({},dataSource.filter()||{}),removed=removeFiltersForField(expression,options.dataTextField);(filter||removed)&&that.trigger("filtering",{filter:filter})||(filter&&(expression=expression.filters||[],expression.push(filter)),force?dataSource.read(expression):dataSource.filter(expression))},_header:function(){var header,that=this,template=that.options.headerTemplate;$.isFunction(template)&&(template=template({})),template&&(that.list.prepend(template),header=that.ul.prev(),that.header=header[0]?header:null,that.header&&that.angular("compile",function(){return{elements:that.header}}))},_initValue:function(){var that=this,value=that.options.value;null!==value?that.element.val(value):(value=that._accessor(),that.options.value=value),that._old=value},_ignoreCase:function(){var field,that=this,model=that.dataSource.reader.model;model&&model.fields&&(field=model.fields[that.options.dataTextField],field&&field.type&&"string"!==field.type&&(that.options.ignoreCase=!1))},_focus:function(candidate){return this.listView.focus(candidate)},current:function(candidate){return this._focus(candidate)},items:function(){return this.ul[0].children},destroy:function(){var that=this,ns=that.ns;Widget.fn.destroy.call(that),that._unbindDataSource(),that.listView.destroy(),that.list.off(ns),that._touchScroller&&that._touchScroller.destroy(),that.popup.destroy(),that._form&&that._form.off("reset",that._resetHandler)},dataItem:function(index){var that=this;return index===undefined?that.listView.selectedDataItems()[0]:("number"!=typeof index&&(index=$(that.items()).index(index)),that.dataSource.flatView()[index])},_activateItem:function(){var current=this.listView.focus();current&&this._focused.add(this.filterInput).attr("aria-activedescendant",current.attr("id"))},_deactivateItem:function(){this._focused.add(this.filterInput).removeAttr("aria-activedescendant")},_accessors:function(){var that=this,element=that.element,options=that.options,getter=kendo.getter,textField=element.attr(kendo.attr("text-field")),valueField=element.attr(kendo.attr("value-field"));!options.dataTextField&&textField&&(options.dataTextField=textField),!options.dataValueField&&valueField&&(options.dataValueField=valueField),that._text=getter(options.dataTextField),that._value=getter(options.dataValueField)},_aria:function(id){var that=this,options=that.options,element=that._focused.add(that.filterInput);options.suggest!==undefined&&element.attr("aria-autocomplete",options.suggest?"both":"list"),id=id?id+" "+that.ul[0].id:that.ul[0].id,element.attr("aria-owns",id),that.ul.attr("aria-live",options.filter&&"none"!==options.filter?"polite":"off")},_blur:function(){var that=this;that._change(),that.close()},_change:function(){var trigger,that=this,index=that.selectedIndex,optionValue=that.options.value,value=that.value();that._isSelect&&!that.listView.isBound()&&optionValue&&(value=optionValue),value!==that._old?trigger=!0:index!==undefined&&index!==that._oldIndex&&(trigger=!0),trigger&&(that._old=value,that._oldIndex=index,that._typing||that.element.trigger(CHANGE),that.trigger(CHANGE)),that.typing=!1},_data:function(){return this.dataSource.view()},_enable:function(){var that=this,options=that.options,disabled=that.element.is("[disabled]");options.enable!==undefined&&(options.enabled=options.enable),!options.enabled||disabled?that.enable(!1):that.readonly(that.element.is("[readonly]"))},_dataValue:function(dataItem){var value=this._value(dataItem);return value===undefined&&(value=this._text(dataItem)),value},_height:function(length){var offsetTop,popups,that=this,list=that.list,height=that.options.height,visible=that.popup.visible();return length&&(popups=list.add(list.parent(".k-animation-container")).show(),height=that.ul[0].scrollHeight>height?height:"auto",popups.height(height),"auto"!==height&&(offsetTop=that.ul[0].offsetTop,offsetTop&&(height=list.height()-offsetTop)),that.ul.height(height),visible||popups.hide()),height},_adjustListWidth:function(){var computedStyle,computedWidth,list=this.list,width=list[0].style.width,wrapper=this.wrapper;if(list.data(WIDTH)||!width)return computedStyle=window.getComputedStyle?window.getComputedStyle(wrapper[0],null):0,computedWidth=computedStyle?parseFloat(computedStyle.width):wrapper.outerWidth(),computedStyle&&browser.msie&&(computedWidth+=parseFloat(computedStyle.paddingLeft)+parseFloat(computedStyle.paddingRight)+parseFloat(computedStyle.borderLeftWidth)+parseFloat(computedStyle.borderRightWidth)),width="border-box"!==list.css("box-sizing")?computedWidth-(list.outerWidth()-list.width()):computedWidth,list.css({fontFamily:wrapper.css("font-family"),width:width}).data(WIDTH,width),!0},_openHandler:function(e){this._adjustListWidth(),this.trigger(OPEN)?e.preventDefault():(this._focused.attr("aria-expanded",!0),this.ul.attr("aria-hidden",!1))},_closeHandler:function(e){this.trigger(CLOSE)?e.preventDefault():(this._focused.attr("aria-expanded",!1),this.ul.attr("aria-hidden",!0))},_focusItem:function(){var listView=this.listView,focusedItem=listView.focus(),index=listView.select();index=index[index.length-1],index===undefined&&this.options.highlightFirst&&!focusedItem&&(index=0),index!==undefined?listView.focus(index):listView.scrollToIndex(0)},_calculateGroupPadding:function(height){var ul=this.ul,li=ul.children(".k-first:first"),groupHeader=ul.prev(".k-group-header"),padding=0;groupHeader[0]&&"none"!==groupHeader[0].style.display&&("auto"!==height&&(padding=kendo.support.scrollbar()),padding+=parseFloat(li.css("border-right-width"),10)+parseFloat(li.children(".k-group").css("padding-right"),10),groupHeader.css("padding-right",padding))},_firstOpen:function(){var height=this._height(this.dataSource.flatView().length);this._calculateGroupPadding(height)},_popup:function(){var that=this;that.popup=new ui.Popup(that.list,extend({},that.options.popup,{anchor:that.wrapper,open:proxy(that._openHandler,that),close:proxy(that._closeHandler,that),animation:that.options.animation,isRtl:support.isRtl(that.wrapper)})),that.options.virtual||that.popup.one(OPEN,proxy(that._firstOpen,that)),that._touchScroller=kendo.touchScroller(that.popup.element)},_makeUnselectable:function(){isIE8&&this.list.find("*").not(".k-textbox").attr("unselectable","on")},_toggleHover:function(e){$(e.currentTarget).toggleClass(HOVER,"mouseenter"===e.type)},_toggle:function(open,preventFocus){var that=this,touchEnabled=support.mobileOS&&(support.touch||support.MSPointers||support.pointers);open=open!==undefined?open:!that.popup.visible(),preventFocus||touchEnabled||that._focused[0]===activeElement()||(that._prevent=!0,that._focused.focus(),that._prevent=!1),that[open?OPEN:CLOSE]()},_triggerCascade:function(){var that=this;that._cascadeTriggered&&that._old===that.value()&&that._oldIndex===that.selectedIndex||(that._cascadeTriggered=!0,that.trigger("cascade",{userTriggered:that._userTriggered}))},_unbindDataSource:function(){var that=this;that.dataSource.unbind(PROGRESS,that._progressHandler).unbind(REQUESTEND,that._requestEndHandler).unbind("error",that._errorHandler)}});extend(List,{inArray:function(node,parentNode){var idx,length,siblings=parentNode.children;if(!node||node.parentNode!==parentNode)return-1;for(idx=0,length=siblings.length;length>idx;idx++)if(node===siblings[idx])return idx;return-1}}),kendo.ui.List=List,ui.Select=List.extend({init:function(element,options){List.fn.init.call(this,element,options),this._initial=this.element.val()},setDataSource:function(dataSource){var parent,that=this;that.options.dataSource=dataSource,that._dataSource(),that.listView.setDataSource(that.dataSource),that.options.autoBind&&that.dataSource.fetch(),parent=that._parentWidget(),parent&&parent.trigger("cascade")},close:function(){this.popup.close()},select:function(candidate){var that=this;return candidate===undefined?that.selectedIndex:(that._select(candidate),that._old=that._accessor(),that._oldIndex=that.selectedIndex,void 0)},search:function(word){word="string"==typeof word?word:this.text();var that=this,length=word.length,options=that.options,ignoreCase=options.ignoreCase,filter=options.filter,field=options.dataTextField;clearTimeout(that._typingTimeout),(!length||length>=options.minLength)&&(that._state="filter",that.listView.filter(!0),"none"===filter?that._filter(word):(that._open=!0,that._filterSource({value:ignoreCase?word.toLowerCase():word,field:field,operator:filter,ignoreCase:ignoreCase})))},_accessor:function(value,idx){return this[this._isSelect?"_accessorSelect":"_accessorInput"](value,idx)},_accessorInput:function(value){var element=this.element[0];return value===undefined?element.value:(null===value&&(value=""),void(element.value=value))},_accessorSelect:function(value,idx){var option,element=this.element[0],selectedIndex=element.selectedIndex;return value===undefined?(selectedIndex>-1&&(option=element.options[selectedIndex]),option&&(value=option.value),value||""):(selectedIndex>-1&&element.options[selectedIndex].removeAttribute(SELECTED),idx===undefined&&(idx=-1),""!==value&&-1==idx?this._custom(value):(value?element.value=value:element.selectedIndex=idx,element.selectedIndex>-1&&(option=element.options[element.selectedIndex]),option&&option.setAttribute(SELECTED,SELECTED)),void 0)},_custom:function(value){var that=this,element=that.element,custom=that._customOption;custom||(custom=$("<option/>"),that._customOption=custom,element.append(custom)),custom.text(value),custom[0].setAttribute(SELECTED,SELECTED),custom[0].selected=!0},_hideBusy:function(){var that=this;clearTimeout(that._busy),that._arrow.removeClass(LOADING),that._focused.attr("aria-busy",!1),that._busy=null},_showBusy:function(){var that=this;that._request=!0,that._busy||(that._busy=setTimeout(function(){that._arrow&&(that._focused.attr("aria-busy",!0),that._arrow.addClass(LOADING))},100))},_requestEnd:function(){this._request=!1},_dataSource:function(){var idx,that=this,element=that.element,options=that.options,dataSource=options.dataSource||{};dataSource=$.isArray(dataSource)?{data:dataSource}:dataSource,that._isSelect&&(idx=element[0].selectedIndex,idx>-1&&(options.index=idx),dataSource.select=element,dataSource.fields=[{field:options.dataTextField},{field:options.dataValueField}]),that.dataSource?that._unbindDataSource():(that._progressHandler=proxy(that._showBusy,that),that._requestEndHandler=proxy(that._requestEnd,that),that._errorHandler=proxy(that._hideBusy,that)),that.dataSource=kendo.data.DataSource.create(dataSource).bind(PROGRESS,that._progressHandler).bind(REQUESTEND,that._requestEndHandler).bind("error",that._errorHandler)},_firstItem:function(){this.listView.first()},_lastItem:function(){this.listView.last()},_nextItem:function(){this.listView.next()},_prevItem:function(){this.listView.prev()},_move:function(e){var dataItem,pressed,current,that=this,key=e.keyCode,down=(that.ul[0],key===keys.DOWN);if(key===keys.UP||down){if(e.altKey)that.toggle(down);else{if(!that.listView.isBound())return that._fetch||(that.dataSource.one(CHANGE,function(){that._fetch=!1,that._move(e)}),that._fetch=!0,that._filterSource()),e.preventDefault(),!0;if(current=that._focus(),that._fetch||current&&!current.hasClass("k-state-selected")||(down?(that._nextItem(),that._focus()||that._lastItem()):(that._prevItem(),that._focus()||that._firstItem())),that.trigger(SELECT,{item:that.listView.focus()}))return void that._focus(current);that._select(that._focus(),!0),that.popup.visible()||that._blur()}e.preventDefault(),pressed=!0}else if(key===keys.ENTER||key===keys.TAB){that.popup.visible()&&e.preventDefault(),current=that._focus(),dataItem=that.dataItem(),that.popup.visible()||dataItem&&that.text()===that._text(dataItem)||(current=null);var activeFilter=that.filterInput&&that.filterInput[0]===activeElement();if(current){if(that.trigger(SELECT,{item:current}))return;that._select(current)}else that.input&&(that._accessor(that.input.val()),that.listView.value(that.input.val()));that._focusElement&&that._focusElement(that.wrapper),activeFilter&&key===keys.TAB?that.wrapper.focusout():that._blur(),that.close(),pressed=!0}else key===keys.ESC&&(that.popup.visible()&&e.preventDefault(),that.close(),pressed=!0);return pressed},_fetchData:function(){var that=this,hasItems=!!that.dataSource.view().length;that._request||that.options.cascadeFrom||that.listView.isBound()||that._fetch||hasItems||(that._fetch=!0,that.dataSource.fetch().done(function(){that._fetch=!1}))},_options:function(data,optionLabel,value){var option,dataItem,dataText,dataValue,that=this,element=that.element,length=data.length,options="",idx=0;for(optionLabel&&(options=optionLabel);length>idx;idx++)option="<option",dataItem=data[idx],dataText=that._text(dataItem),dataValue=that._value(dataItem),dataValue!==undefined&&(dataValue+="",-1!==dataValue.indexOf('"')&&(dataValue=dataValue.replace(quotRegExp,"&quot;")),option+=' value="'+dataValue+'"'),option+=">",dataText!==undefined&&(option+=htmlEncode(dataText)),option+="</option>",options+=option;element.html(options),value!==undefined&&(element[0].value=value)},_reset:function(){var that=this,element=that.element,formId=element.attr("form"),form=formId?$("#"+formId):element.closest("form");form[0]&&(that._resetHandler=function(){setTimeout(function(){that.value(that._initial)})},that._form=form.on("reset",that._resetHandler))},_parentWidget:function(){var name=this.options.name,parentElement=$("#"+this.options.cascadeFrom),parent=parentElement.data("kendo"+name);return parent||(parent=parentElement.data("kendo"+alternativeNames[name])),parent},_cascade:function(){var select,valueField,parent,change,that=this,options=that.options,cascade=options.cascadeFrom;if(cascade){if(parent=that._parentWidget(),!parent)return;options.autoBind=!1,valueField=options.cascadeFromField||parent.options.dataValueField,change=function(){that.dataSource.unbind(CHANGE,change);var value=that._accessor();that._userTriggered?that._clearSelection(parent,!0):value?(value!==that.listView.value()[0]&&that.value(value),that.dataSource.view()[0]&&-1!==that.selectedIndex||that._clearSelection(parent,!0)):that.dataSource.flatView().length&&that.select(options.index),that.enable(),that._triggerCascade(),that._userTriggered=!1},select=function(){var expressions,filters,dataItem=parent.dataItem(),filterValue=dataItem?parent._value(dataItem):null;if(filterValue||0===filterValue){expressions=that.dataSource.filter()||{},removeFiltersForField(expressions,valueField),filters=expressions.filters||[],filters.push({field:valueField,operator:"eq",value:filterValue});var handler=function(){that.unbind("dataBound",handler),change.apply(that,arguments)};that.first("dataBound",handler),that.dataSource.filter(filters)}else that.enable(!1),that._clearSelection(parent),that._triggerCascade(),that._userTriggered=!1},parent.first("cascade",function(e){that._userTriggered=e.userTriggered,select()}),parent.listView.isBound()?select():parent.value()||that.enable(!1)}}});var STATIC_LIST_NS=".StaticList",StaticList=kendo.ui.DataBoundWidget.extend({init:function(element,options){Widget.fn.init.call(this,element,options),this.element.attr("role","listbox").css({overflow:support.kineticScrollNeeded?"":"auto"}).on("click"+STATIC_LIST_NS,"li",proxy(this._click,this)).on("mouseenter"+STATIC_LIST_NS,"li",function(){$(this).addClass(HOVER)}).on("mouseleave"+STATIC_LIST_NS,"li",function(){$(this).removeClass(HOVER)}),this.header=this.element.before('<div class="k-group-header" style="display:none"></div>').prev(),this._bound=!1,this._optionID=kendo.guid(),this._selectedIndices=[],this._view=[],this._dataItems=[],this._values=[];var value=this.options.value;value&&(this._values=$.isArray(value)?value.slice(0):[value]),this._getter(),this._templates(),this.setDataSource(this.options.dataSource),this._onScroll=proxy(function(){var that=this;clearTimeout(that._scrollId),that._scrollId=setTimeout(function(){that._renderHeader()},50)},this)},options:{name:"StaticList",dataValueField:null,selectable:!0,template:null,groupTemplate:null,fixedGroupTemplate:null},events:["click","change","activate","deactivate","dataBinding","dataBound","selectedItemChange"],setDataSource:function(source){var value,that=this,dataSource=source||{};dataSource=$.isArray(dataSource)?{data:dataSource}:dataSource,dataSource=kendo.data.DataSource.create(dataSource),that.dataSource?(that.dataSource.unbind(CHANGE,that._refreshHandler),value=that.value(),that.value([]),that._bound=!1,that.value(value)):that._refreshHandler=proxy(that.refresh,that),that.dataSource=dataSource.bind(CHANGE,that._refreshHandler),that._fixedHeader()},setOptions:function(options){Widget.fn.setOptions.call(this,options),this._getter(),this._templates(),this._render()},destroy:function(){this.element.off(STATIC_LIST_NS),this._refreshHandler&&this.dataSource.unbind(CHANGE,this._refreshHandler),Widget.fn.destroy.call(this)},scrollToIndex:function(index){var item=this.element[0].children[index];item&&this.scroll(item)},_offsetHeight:function(){var offsetHeight=0,siblings=this.element.prevAll();return siblings.each(function(){var element=$(this);element.is(":visible")&&(offsetHeight+=element.hasClass("k-list-filter")?element.children().height():element.outerHeight())}),offsetHeight},setTouchScroller:function(touchScroller){this._touchScroller=touchScroller},scroll:function(item){if(item){item[0]&&(item=item[0]);var yDimension,offsetHeight,ul=this.element[0],itemOffsetTop=item.offsetTop,itemOffsetHeight=item.offsetHeight,ulScrollTop=ul.scrollTop,ulOffsetHeight=ul.clientHeight,bottomDistance=itemOffsetTop+itemOffsetHeight,touchScroller=this._touchScroller;touchScroller?(yDimension=touchScroller.dimensions.y,yDimension.update(!0),yDimension.enabled&&itemOffsetTop>yDimension.size&&(itemOffsetTop=itemOffsetTop-yDimension.size+itemOffsetHeight+4,touchScroller.scrollTo(0,-itemOffsetTop))):(offsetHeight=this._offsetHeight(),ulScrollTop>itemOffsetTop-offsetHeight?ulScrollTop=itemOffsetTop-offsetHeight:bottomDistance>ulScrollTop+ulOffsetHeight+offsetHeight&&(ulScrollTop=bottomDistance-ulOffsetHeight-offsetHeight),ul.scrollTop=ulScrollTop)}},selectedDataItems:function(dataItems){var getter=this._valueGetter;return dataItems===undefined?this._dataItems.slice():(this._dataItems=dataItems,void(this._values=$.map(dataItems,function(dataItem){return getter(dataItem)})))},next:function(){var current=this.focus();current=current?current.next():0,this.focus(current)},prev:function(){var current=this.focus();current=current?current.prev():this.element[0].children.length-1,this.focus(current)},first:function(){this.focus(this.element[0].children[0])},last:function(){this.focus(this.element[0].children[this.element[0].children.length-1])},focus:function(candidate){var hasCandidate,that=this,id=that._optionID;return candidate===undefined?that._current:(candidate=that._get(candidate),candidate=candidate[candidate.length-1],candidate=$(this.element[0].children[candidate]),that._current&&(that._current.removeClass(FOCUSED).removeAttr("aria-selected").removeAttr(ID),that.trigger("deactivate")),hasCandidate=!!candidate[0],hasCandidate&&(candidate.addClass(FOCUSED),that.scroll(candidate),candidate.attr("id",id)),that._current=hasCandidate?candidate:null,void that.trigger("activate"))},focusIndex:function(){return this.focus()?this.focus().index():undefined},filter:function(filter,skipValueUpdate){return filter===undefined?this._filtered:void(this._filtered=filter)},skipUpdate:function(skipUpdate){this._skipUpdate=skipUpdate},select:function(indices){var result,that=this,selectable=that.options.selectable,singleSelection="multiple"!==selectable&&selectable!==!1,selectedIndices=that._selectedIndices,added=[],removed=[];if(indices===undefined)return selectedIndices.slice();if(indices=that._get(indices),1===indices.length&&-1===indices[0]&&(indices=[]),!that._filtered||singleSelection||!that._deselectFiltered(indices)){if(singleSelection&&!that._filtered&&-1!==$.inArray(indices[indices.length-1],selectedIndices))return void(that._dataItems.length&&that._view.length&&(that._dataItems=[that._view[selectedIndices[0]].item]));result=that._deselect(indices),removed=result.removed,indices=result.indices,indices.length&&(singleSelection&&(indices=[indices[indices.length-1]]),added=that._select(indices)),(added.length||removed.length)&&(that._valueComparer=null,that.trigger("change",{added:added,removed:removed}))}},removeAt:function(position){return this._selectedIndices.splice(position,1),this._values.splice(position,1),{position:position,dataItem:this._dataItems.splice(position,1)[0]}},setValue:function(value){value=$.isArray(value)||value instanceof ObservableArray?value.slice(0):[value],
this._values=value,this._valueComparer=null},value:function(value){var indices,that=this,deferred=that._valueDeferred;return value===undefined?that._values.slice():(that.setValue(value),deferred&&"resolved"!==deferred.state()||(that._valueDeferred=deferred=$.Deferred()),that.isBound()&&(indices=that._valueIndices(that._values),"multiple"===that.options.selectable&&that.select(-1),that.select(indices),deferred.resolve()),that._skipUpdate=!1,deferred)},_click:function(e){e.isDefaultPrevented()||this.trigger("click",{item:$(e.currentTarget)})},_valueExpr:function(type,values){var value,body,comparer,that=this,idx=0,normalized=[];if(!that._valueComparer||that._valueType!==type){for(that._valueType=type;idx<values.length;idx++)value=values[idx],value!==undefined&&""!==value&&null!==value&&("boolean"===type?value=Boolean(value):"number"===type?value=Number(value):"string"===type&&(value=value.toString())),normalized.push(value);body="for (var idx = 0; idx < "+normalized.length+"; idx++) { if (current === values[idx]) {   return idx; }} return -1;",comparer=new Function(["current","values"],body),that._valueComparer=function(current){return comparer(current,normalized)}}return that._valueComparer},_dataItemPosition:function(dataItem,values){var value=this._valueGetter(dataItem),valueExpr=this._valueExpr(typeof value,values);return valueExpr(value)},_getter:function(){this._valueGetter=kendo.getter(this.options.dataValueField)},_deselect:function(indices){var j,index,selectedIndex,that=this,children=that.element[0].children,selectable=that.options.selectable,selectedIndices=that._selectedIndices,dataItems=that._dataItems,values=that._values,removed=[],i=0,removedIndices=0;if(indices=indices.slice(),selectable!==!0&&indices.length){if("multiple"===selectable)for(;i<indices.length;i++)if(index=indices[i],$(children[index]).hasClass("k-state-selected"))for(j=0;j<selectedIndices.length;j++)if(selectedIndex=selectedIndices[j],selectedIndex===index){$(children[selectedIndex]).removeClass("k-state-selected"),removed.push({position:j+removedIndices,dataItem:dataItems.splice(j,1)[0]}),selectedIndices.splice(j,1),indices.splice(i,1),values.splice(j,1),removedIndices+=1,i-=1,j-=1;break}}else{for(;i<selectedIndices.length;i++)$(children[selectedIndices[i]]).removeClass("k-state-selected"),removed.push({position:i,dataItem:dataItems[i]});that._values=[],that._dataItems=[],that._selectedIndices=[]}return{indices:indices,removed:removed}},_deselectFiltered:function(indices){for(var dataItem,index,position,children=this.element[0].children,removed=[],idx=0;idx<indices.length;idx++)index=indices[idx],dataItem=this._view[index].item,position=this._dataItemPosition(dataItem,this._values),position>-1&&(removed.push(this.removeAt(position)),$(children[index]).removeClass("k-state-selected"));return removed.length?(this.trigger("change",{added:[],removed:removed}),!0):!1},_select:function(indices){var dataItem,index,that=this,children=that.element[0].children,data=that._view,added=[],idx=0;for(-1!==indices[indices.length-1]&&that.focus(indices);idx<indices.length;idx++)index=indices[idx],dataItem=data[index],-1!==index&&dataItem&&(dataItem=dataItem.item,that._selectedIndices.push(index),that._dataItems.push(dataItem),that._values.push(that._valueGetter(dataItem)),$(children[index]).addClass("k-state-selected").attr("aria-selected",!0),added.push({dataItem:dataItem}));return added},_get:function(candidate){return"number"==typeof candidate?candidate=[candidate]:isArray(candidate)||(candidate=$(candidate).data("offset-index"),candidate===undefined&&(candidate=-1),candidate=[candidate]),candidate},_template:function(){var that=this,options=that.options,template=options.template;return template?(template=kendo.template(template),template=function(data){return'<li tabindex="-1" role="option" unselectable="on" class="k-item">'+template(data)+"</li>"}):template=kendo.template('<li tabindex="-1" role="option" unselectable="on" class="k-item">${'+kendo.expr(options.dataTextField,"data")+"}</li>",{useWithBlock:!1}),template},_templates:function(){var template,templates={template:this.options.template,groupTemplate:this.options.groupTemplate,fixedGroupTemplate:this.options.fixedGroupTemplate};for(var key in templates)template=templates[key],template&&"function"!=typeof template&&(templates[key]=kendo.template(template));this.templates=templates},_normalizeIndices:function(indices){for(var newIndices=[],idx=0;idx<indices.length;idx++)indices[idx]!==undefined&&newIndices.push(indices[idx]);return newIndices},_valueIndices:function(values,indices){var index,data=this._view,idx=0;if(indices=indices?indices.slice():[],!values.length)return[];for(;idx<data.length;idx++)index=this._dataItemPosition(data[idx].item,values),-1!==index&&(indices[index]=idx);return this._normalizeIndices(indices)},_firstVisibleItem:function(){for(var element=this.element[0],scrollTop=element.scrollTop,itemHeight=$(element.children[0]).height(),itemIndex=Math.floor(scrollTop/itemHeight)||0,item=element.children[itemIndex]||element.lastChild,offsetHeight=this._offsetHeight(),forward=item.offsetTop-offsetHeight<scrollTop;item;)if(forward){if(item.offsetTop+itemHeight-offsetHeight>scrollTop||!item.nextSibling)break;item=item.nextSibling}else{if(item.offsetTop-offsetHeight<=scrollTop||!item.previousSibling)break;item=item.previousSibling}return this._view[$(item).data("offset-index")]},_fixedHeader:function(){this.isGrouped()&&this.templates.fixedGroupTemplate?(this.header.show(),this.element.scroll(this._onScroll)):(this.header.hide(),this.element.off("scroll",this._onScroll))},_renderHeader:function(){var template=this.templates.fixedGroupTemplate;if(template){var visibleItem=this._firstVisibleItem();visibleItem&&this.header.html(template(visibleItem.group))}},_renderItem:function(context){var item='<li tabindex="-1" role="option" unselectable="on" class="k-item',dataItem=context.item,notFirstItem=0!==context.index,selected=context.selected;return notFirstItem&&context.newGroup&&(item+=" k-first"),selected&&(item+=" k-state-selected"),item+='"'+(selected?' aria-selected="true"':"")+' data-offset-index="'+context.index+'">',item+=this.templates.template(dataItem),notFirstItem&&context.newGroup&&(item+='<div class="k-group">'+this.templates.groupTemplate(context.group)+"</div>"),item+"</li>"},_render:function(){var context,group,newGroup,j,html="",i=0,idx=0,dataContext=[],view=this.dataSource.view(),values=this.value(),isGrouped=this.isGrouped();if(isGrouped)for(i=0;i<view.length;i++)for(group=view[i],newGroup=!0,j=0;j<group.items.length;j++)context={selected:this._selected(group.items[j],values),item:group.items[j],group:group.value,newGroup:newGroup,index:idx},dataContext[idx]=context,idx+=1,html+=this._renderItem(context),newGroup=!1;else for(i=0;i<view.length;i++)context={selected:this._selected(view[i],values),item:view[i],index:i},dataContext[i]=context,html+=this._renderItem(context);this._view=dataContext,this.element[0].innerHTML=html,isGrouped&&dataContext.length&&this._renderHeader()},_selected:function(dataItem,values){var select=!this._filtered||"multiple"===this.options.selectable;return select&&-1!==this._dataItemPosition(dataItem,values)},refresh:function(e){var changedItems,that=this,action=e&&e.action;that.trigger("dataBinding"),that._fixedHeader(),that._render(),that._bound=!0,"itemchange"===action?(changedItems=findChangedItems(that._dataItems,e.items),changedItems.length&&that.trigger("selectedItemChange",{items:changedItems})):that._filtered||that._skipUpdate?(that.focus(0),that._skipUpdate&&(that._skipUpdate=!1,that._selectedIndices=that._valueIndices(that._values,that._selectedIndices))):action&&"add"!==action||that.value(that._values),that._valueDeferred&&that._valueDeferred.resolve(),that.trigger("dataBound")},isBound:function(){return this._bound},isGrouped:function(){return(this.dataSource.group()||[]).length}});ui.plugin(StaticList)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(_,f){f()}),function(f,define){define(["./kendo.core"],f)}(function(){return function($,undefined){function title(date,min,max,modular){var end,start=date.getFullYear(),minYear=min.getFullYear(),maxYear=max.getFullYear();return start-=start%modular,end=start+(modular-1),minYear>start&&(start=minYear),end>maxYear&&(end=maxYear),start+"-"+end}function view(options){for(var data,idx=0,min=options.min,max=options.max,start=options.start,setter=options.setter,build=options.build,length=options.cells||12,cellsPerRow=options.perRow||4,content=options.content||cellTemplate,empty=options.empty||emptyCellTemplate,html=options.html||'<table tabindex="0" role="grid" class="k-content k-meta-view" cellspacing="0"><tbody><tr role="row">';length>idx;idx++)idx>0&&idx%cellsPerRow===0&&(html+='</tr><tr role="row">'),data=build(start,idx),html+=isInRange(start,min,max)?content(data):empty(data),setter(start,1);return html+"</tr></tbody></table>"}function compare(date1,date2,modifier){var year1=date1.getFullYear(),start=date2.getFullYear(),end=start,result=0;return modifier&&(start-=start%modifier,end=start-start%modifier+modifier-1),year1>end?result=1:start>year1&&(result=-1),result}function getToday(){var today=new DATE;return new DATE(today.getFullYear(),today.getMonth(),today.getDate())}function restrictValue(value,min,max){var today=getToday();return value&&(today=new DATE(+value)),min>today?today=new DATE(+min):today>max&&(today=new DATE(+max)),today}function isInRange(date,min,max){return+date>=+min&&+max>=+date}function shiftArray(array,idx){return array.slice(idx).concat(array.slice(0,idx))}function setDate(date,value,multiplier){value=value instanceof DATE?value.getFullYear():date.getFullYear()+multiplier*value,date.setFullYear(value)}function mousetoggle(e){$(this).toggleClass(HOVER,MOUSEENTER.indexOf(e.type)>-1||e.type==FOCUS)}function prevent(e){e.preventDefault()}function getCalendarInfo(culture){return getCulture(culture).calendars.standard}function normalize(options){var start=views[options.start],depth=views[options.depth],culture=getCulture(options.culture);options.format=extractFormat(options.format||culture.calendars.standard.patterns.d),isNaN(start)&&(start=0,options.start=MONTH),(depth===undefined||depth>start)&&(options.depth=MONTH),options.dates||(options.dates=[])}function makeUnselectable(element){isIE8&&element.find("*").attr("unselectable","on")}function inArray(date,dates){for(var i=0,length=dates.length;length>i;i++)if(date===+dates[i])return!0;return!1}function isEqualDatePart(value1,value2){return value1?value1.getFullYear()===value2.getFullYear()&&value1.getMonth()===value2.getMonth()&&value1.getDate()===value2.getDate():!1}function isEqualMonth(value1,value2){return value1?value1.getFullYear()===value2.getFullYear()&&value1.getMonth()===value2.getMonth():!1}var kendo=window.kendo,support=kendo.support,ui=kendo.ui,Widget=ui.Widget,keys=kendo.keys,parse=kendo.parseDate,adjustDST=kendo.date.adjustDST,extractFormat=kendo._extractFormat,template=kendo.template,getCulture=kendo.getCulture,transitions=kendo.support.transitions,transitionOrigin=transitions?transitions.css+"transform-origin":"",cellTemplate=template('<td#=data.cssClass# role="gridcell"><a tabindex="-1" class="k-link" href="\\#" data-#=data.ns#value="#=data.dateString#">#=data.value#</a></td>',{useWithBlock:!1}),emptyCellTemplate=template('<td role="gridcell">&nbsp;</td>',{useWithBlock:!1}),browser=kendo.support.browser,isIE8=browser.msie&&browser.version<9,ns=".kendoCalendar",CLICK="click"+ns,KEYDOWN_NS="keydown"+ns,ID="id",MIN="min",LEFT="left",SLIDE="slideIn",MONTH="month",CENTURY="century",CHANGE="change",NAVIGATE="navigate",VALUE="value",HOVER="k-state-hover",DISABLED="k-state-disabled",FOCUSED="k-state-focused",OTHERMONTH="k-other-month",OTHERMONTHCLASS=' class="'+OTHERMONTH+'"',TODAY="k-nav-today",CELLSELECTOR="td:has(.k-link)",BLUR="blur"+ns,FOCUS="focus",FOCUS_WITH_NS=FOCUS+ns,MOUSEENTER=support.touch?"touchstart":"mouseenter",MOUSEENTER_WITH_NS=support.touch?"touchstart"+ns:"mouseenter"+ns,MOUSELEAVE=support.touch?"touchend"+ns+" touchmove"+ns:"mouseleave"+ns,MS_PER_MINUTE=6e4,MS_PER_DAY=864e5,PREVARROW="_prevArrow",NEXTARROW="_nextArrow",ARIA_DISABLED="aria-disabled",ARIA_SELECTED="aria-selected",proxy=$.proxy,extend=$.extend,DATE=Date,views={month:0,year:1,decade:2,century:3},Calendar=Widget.extend({init:function(element,options){var value,id,that=this;Widget.fn.init.call(that,element,options),element=that.wrapper=that.element,options=that.options,options.url=window.unescape(options.url),that._templates(),that._header(),that._footer(that.footer),id=element.addClass("k-widget k-calendar").on(MOUSEENTER_WITH_NS+" "+MOUSELEAVE,CELLSELECTOR,mousetoggle).on(KEYDOWN_NS,"table.k-content",proxy(that._move,that)).on(CLICK,CELLSELECTOR,function(e){var link=e.currentTarget.firstChild;-1!=link.href.indexOf("#")&&e.preventDefault(),that._click($(link))}).on("mouseup"+ns,"table.k-content, .k-footer",function(){that._focusView(that.options.focusOnNav!==!1)}).attr(ID),id&&(that._cellID=id+"_cell_selected"),normalize(options),value=parse(options.value,options.format,options.culture),that._index=views[options.start],that._current=new DATE(+restrictValue(value,options.min,options.max)),that._addClassProxy=function(){that._active=!0,that._cell.addClass(FOCUSED)},that._removeClassProxy=function(){that._active=!1,that._cell.removeClass(FOCUSED)},that.value(value),kendo.notify(that)},options:{name:"Calendar",value:null,min:new DATE(1900,0,1),max:new DATE(2099,11,31),dates:[],url:"",culture:"",footer:"",format:"",month:{},start:MONTH,depth:MONTH,animation:{horizontal:{effects:SLIDE,reverse:!0,duration:500,divisor:2},vertical:{effects:"zoomIn",duration:400}}},events:[CHANGE,NAVIGATE],setOptions:function(options){var that=this;normalize(options),options.dates[0]||(options.dates=that.options.dates),Widget.fn.setOptions.call(that,options),that._templates(),that._footer(that.footer),that._index=views[that.options.start],that.navigate()},destroy:function(){var that=this,today=that._today;that.element.off(ns),that._title.off(ns),that[PREVARROW].off(ns),that[NEXTARROW].off(ns),kendo.destroy(that._table),today&&kendo.destroy(today.off(ns)),Widget.fn.destroy.call(that)},current:function(){return this._current},view:function(){return this._view},focus:function(table){table=table||this._table,this._bindTable(table),table.focus()},min:function(value){return this._option(MIN,value)},max:function(value){return this._option("max",value)},navigateToPast:function(){this._navigate(PREVARROW,-1)},navigateToFuture:function(){this._navigate(NEXTARROW,1)},navigateUp:function(){var that=this,index=that._index;that._title.hasClass(DISABLED)||that.navigate(that._current,++index)},navigateDown:function(value){var that=this,index=that._index,depth=that.options.depth;if(value)return index===views[depth]?void(+that._value!=+value&&(that.value(value),that.trigger(CHANGE))):void that.navigate(value,--index)},navigate:function(value,view){view=isNaN(view)?views[view]:view;var to,currentView,compare,disabled,that=this,options=that.options,culture=options.culture,min=options.min,max=options.max,title=that._title,from=that._table,old=that._oldTable,selectedValue=that._value,currentValue=that._current,future=value&&+value>+currentValue,vertical=view!==undefined&&view!==that._index;value||(value=currentValue),that._current=value=new DATE(+restrictValue(value,min,max)),view===undefined?view=that._index:that._index=view,that._view=currentView=calendar.views[view],compare=currentView.compare,disabled=view===views[CENTURY],title.toggleClass(DISABLED,disabled).attr(ARIA_DISABLED,disabled),disabled=compare(value,min)<1,that[PREVARROW].toggleClass(DISABLED,disabled).attr(ARIA_DISABLED,disabled),disabled=compare(value,max)>-1,that[NEXTARROW].toggleClass(DISABLED,disabled).attr(ARIA_DISABLED,disabled),from&&old&&old.data("animating")&&(old.kendoStop(!0,!0),from.kendoStop(!0,!0)),that._oldTable=from,from&&!that._changeView||(title.html(currentView.title(value,min,max,culture)),that._table=to=$(currentView.content(extend({min:min,max:max,date:value,url:options.url,dates:options.dates,format:options.format,culture:culture},that[currentView.name]))),makeUnselectable(to),that._animate({from:from,to:to,vertical:vertical,future:future}),that._focus(value),that.trigger(NAVIGATE)),view===views[options.depth]&&selectedValue&&that._class("k-state-selected",currentView.toDateString(selectedValue)),that._class(FOCUSED,currentView.toDateString(value)),!from&&that._cell&&that._cell.removeClass(FOCUSED),that._changeView=!0},value:function(value){var that=this,view=that._view,options=that.options,old=that._view,min=options.min,max=options.max;return value===undefined?that._value:(value=parse(value,options.format,options.culture),null!==value&&(value=new DATE(+value),isInRange(value,min,max)||(value=null)),that._value=value,void(old&&null===value&&that._cell?that._cell.removeClass("k-state-selected"):(that._changeView=!value||view&&0!==view.compare(value,that._current),that.navigate(value))))},_move:function(e){var value,prevent,method,temp,that=this,options=that.options,key=e.keyCode,view=that._view,index=that._index,currentValue=new DATE(+that._current),isRtl=kendo.support.isRtl(that.wrapper);return e.target===that._table[0]&&(that._active=!0),e.ctrlKey?key==keys.RIGHT&&!isRtl||key==keys.LEFT&&isRtl?(that.navigateToFuture(),prevent=!0):key==keys.LEFT&&!isRtl||key==keys.RIGHT&&isRtl?(that.navigateToPast(),prevent=!0):key==keys.UP?(that.navigateUp(),prevent=!0):key==keys.DOWN&&(that._click($(that._cell[0].firstChild)),prevent=!0):(key==keys.RIGHT&&!isRtl||key==keys.LEFT&&isRtl?(value=1,prevent=!0):key==keys.LEFT&&!isRtl||key==keys.RIGHT&&isRtl?(value=-1,prevent=!0):key==keys.UP?(value=0===index?-7:-4,prevent=!0):key==keys.DOWN?(value=0===index?7:4,prevent=!0):key==keys.ENTER?(that._click($(that._cell[0].firstChild)),prevent=!0):key==keys.HOME||key==keys.END?(method=key==keys.HOME?"first":"last",temp=view[method](currentValue),currentValue=new DATE(temp.getFullYear(),temp.getMonth(),temp.getDate(),currentValue.getHours(),currentValue.getMinutes(),currentValue.getSeconds(),currentValue.getMilliseconds()),prevent=!0):key==keys.PAGEUP?(prevent=!0,that.navigateToPast()):key==keys.PAGEDOWN&&(prevent=!0,that.navigateToFuture()),(value||method)&&(method||view.setDate(currentValue,value),that._focus(restrictValue(currentValue,options.min,options.max)))),prevent&&e.preventDefault(),that._current},_animate:function(options){var that=this,from=options.from,to=options.to,active=that._active;from?from.parent().data("animating")?(from.off(ns),from.parent().kendoStop(!0,!0).remove(),from.remove(),to.insertAfter(that.element[0].firstChild),that._focusView(active)):from.is(":visible")&&that.options.animation!==!1?that[options.vertical?"_vertical":"_horizontal"](from,to,options.future):(to.insertAfter(from),from.off(ns).remove(),that._focusView(active)):(to.insertAfter(that.element[0].firstChild),that._bindTable(to))},_horizontal:function(from,to,future){var that=this,active=that._active,horizontal=that.options.animation.horizontal,effects=horizontal.effects,viewWidth=from.outerWidth();effects&&-1!=effects.indexOf(SLIDE)&&(from.add(to).css({width:viewWidth}),from.wrap("<div/>"),that._focusView(active,from),from.parent().css({position:"relative",width:2*viewWidth,"float":LEFT,"margin-left":future?0:-viewWidth}),to[future?"insertAfter":"insertBefore"](from),extend(horizontal,{effects:SLIDE+":"+(future?"right":LEFT),complete:function(){from.off(ns).remove(),that._oldTable=null,to.unwrap(),that._focusView(active)}}),from.parent().kendoStop(!0,!0).kendoAnimate(horizontal))},_vertical:function(from,to){var cell,position,that=this,vertical=that.options.animation.vertical,effects=vertical.effects,active=that._active;effects&&-1!=effects.indexOf("zoom")&&(to.css({position:"absolute",top:from.prev().outerHeight(),left:0}).insertBefore(from),transitionOrigin&&(cell=that._cellByDate(that._view.toDateString(that._current)),position=cell.position(),position=position.left+parseInt(cell.width()/2,10)+"px "+(position.top+parseInt(cell.height()/2,10)+"px"),to.css(transitionOrigin,position)),from.kendoStop(!0,!0).kendoAnimate({effects:"fadeOut",duration:600,complete:function(){from.off(ns).remove(),that._oldTable=null,to.css({position:"static",top:0,left:0}),that._focusView(active)}}),to.kendoStop(!0,!0).kendoAnimate(vertical))},_cellByDate:function(value){return this._table.find("td:not(."+OTHERMONTH+")").filter(function(){return $(this.firstChild).attr(kendo.attr(VALUE))===value})},_class:function(className,value){var that=this,id=that._cellID,cell=that._cell;cell&&cell.removeAttr(ARIA_SELECTED).removeAttr("aria-label").removeAttr(ID),cell=that._table.find("td:not(."+OTHERMONTH+")").removeClass(className).filter(function(){return $(this.firstChild).attr(kendo.attr(VALUE))===value}).attr(ARIA_SELECTED,!0),className!==FOCUSED||that._active||that.options.focusOnNav===!1||(className=""),cell.addClass(className),cell[0]&&(that._cell=cell),id&&(cell.attr(ID,id),that._table.removeAttr("aria-activedescendant").attr("aria-activedescendant",id))},_bindTable:function(table){table.on(FOCUS_WITH_NS,this._addClassProxy).on(BLUR,this._removeClassProxy)},_click:function(link){var that=this,options=that.options,currentValue=new Date(+that._current),value=link.attr(kendo.attr(VALUE)).split("/");value=new DATE(value[0],value[1],value[2]),adjustDST(value,0),that._view.setDate(currentValue,value),that.navigateDown(restrictValue(currentValue,options.min,options.max))},_focus:function(value){var that=this,view=that._view;0!==view.compare(value,that._current)?that.navigate(value):(that._current=value,that._class(FOCUSED,view.toDateString(value)))},_focusView:function(active,table){active&&this.focus(table)},_footer:function(template){var that=this,today=getToday(),element=that.element,footer=element.find(".k-footer");return template?(footer[0]||(footer=$('<div class="k-footer"><a href="#" class="k-link k-nav-today"></a></div>').appendTo(element)),that._today=footer.show().find(".k-link").html(template(today)).attr("title",kendo.toString(today,"D",that.options.culture)),void that._toggle()):(that._toggle(!1),void footer.hide())},_header:function(){var links,that=this,element=that.element;element.find(".k-header")[0]||element.html('<div class="k-header"><a href="#" role="button" class="k-link k-nav-prev"><span class="k-icon k-i-arrow-w"></span></a><a href="#" role="button" aria-live="assertive" aria-atomic="true" class="k-link k-nav-fast"></a><a href="#" role="button" class="k-link k-nav-next"><span class="k-icon k-i-arrow-e"></span></a></div>'),links=element.find(".k-link").on(MOUSEENTER_WITH_NS+" "+MOUSELEAVE+" "+FOCUS_WITH_NS+" "+BLUR,mousetoggle).click(!1),that._title=links.eq(1).on(CLICK,function(){that._active=that.options.focusOnNav!==!1,that.navigateUp()}),that[PREVARROW]=links.eq(0).on(CLICK,function(){that._active=that.options.focusOnNav!==!1,that.navigateToPast()}),that[NEXTARROW]=links.eq(2).on(CLICK,function(){that._active=that.options.focusOnNav!==!1,that.navigateToFuture()})},_navigate:function(arrow,modifier){var that=this,index=that._index+1,currentValue=new DATE(+that._current);arrow=that[arrow],arrow.hasClass(DISABLED)||(index>3?currentValue.setFullYear(currentValue.getFullYear()+100*modifier):calendar.views[index].setDate(currentValue,modifier),that.navigate(currentValue))},_option:function(option,value){var isBigger,that=this,options=that.options,currentValue=that._value||that._current;return value===undefined?options[option]:(value=parse(value,options.format,options.culture),void(value&&(options[option]=new DATE(+value),isBigger=option===MIN?value>currentValue:currentValue>value,(isBigger||isEqualMonth(currentValue,value))&&(isBigger&&(that._value=null),that._changeView=!0),that._changeView||(that._changeView=!(!options.month.content&&!options.month.empty)),that.navigate(that._value),that._toggle())))},_toggle:function(toggle){var that=this,options=that.options,link=that._today;toggle===undefined&&(toggle=isInRange(getToday(),options.min,options.max)),link&&(link.off(CLICK),toggle?link.addClass(TODAY).removeClass(DISABLED).on(CLICK,proxy(that._todayClick,that)):link.removeClass(TODAY).addClass(DISABLED).on(CLICK,prevent))},_todayClick:function(e){var that=this,depth=views[that.options.depth],today=getToday();e.preventDefault(),0===that._view.compare(that._current,today)&&that._index==depth&&(that._changeView=!1),that._value=today,that.navigate(today,depth),that.trigger(CHANGE)},_templates:function(){var that=this,options=that.options,footer=options.footer,month=options.month,content=month.content,empty=month.empty;that.month={content:template('<td#=data.cssClass# role="gridcell"><a tabindex="-1" class="k-link#=data.linkClass#" href="#=data.url#" '+kendo.attr("value")+'="#=data.dateString#" title="#=data.title#">'+(content||"#=data.value#")+"</a></td>",{useWithBlock:!!content}),empty:template('<td role="gridcell">'+(empty||"&nbsp;")+"</td>",{useWithBlock:!!empty})},that.footer=footer!==!1?template(footer||'#= kendo.toString(data,"D","'+options.culture+'") #',{useWithBlock:!1}):null}});ui.plugin(Calendar);var calendar={firstDayOfMonth:function(date){return new DATE(date.getFullYear(),date.getMonth(),1)},firstVisibleDay:function(date,calendarInfo){calendarInfo=calendarInfo||kendo.culture().calendar;for(var firstDay=calendarInfo.firstDay,firstVisibleDay=new DATE(date.getFullYear(),date.getMonth(),0,date.getHours(),date.getMinutes(),date.getSeconds(),date.getMilliseconds());firstVisibleDay.getDay()!=firstDay;)calendar.setTime(firstVisibleDay,-1*MS_PER_DAY);return firstVisibleDay},setTime:function(date,time){var tzOffsetBefore=date.getTimezoneOffset(),resultDATE=new DATE(date.getTime()+time),tzOffsetDiff=resultDATE.getTimezoneOffset()-tzOffsetBefore;date.setTime(resultDATE.getTime()+tzOffsetDiff*MS_PER_MINUTE)},views:[{name:MONTH,title:function(date,min,max,culture){return getCalendarInfo(culture).months.names[date.getMonth()]+" "+date.getFullYear()},content:function(options){for(var that=this,idx=0,min=options.min,max=options.max,date=options.date,dates=options.dates,format=options.format,culture=options.culture,navigateUrl=options.url,hasUrl=navigateUrl&&dates[0],currentCalendar=getCalendarInfo(culture),firstDayIdx=currentCalendar.firstDay,days=currentCalendar.days,names=shiftArray(days.names,firstDayIdx),shortNames=shiftArray(days.namesShort,firstDayIdx),start=calendar.firstVisibleDay(date,currentCalendar),firstDayOfMonth=that.first(date),lastDayOfMonth=that.last(date),toDateString=that.toDateString,today=new DATE,html='<table tabindex="0" role="grid" class="k-content" cellspacing="0"><thead><tr role="row">';7>idx;idx++)html+='<th scope="col" title="'+names[idx]+'">'+shortNames[idx]+"</th>";return today=new DATE(today.getFullYear(),today.getMonth(),today.getDate()),adjustDST(today,0),today=+today,start=new DATE(start.getFullYear(),start.getMonth(),start.getDate()),adjustDST(start,0),view({cells:42,perRow:7,html:html+='</tr></thead><tbody><tr role="row">',start:start,min:new DATE(min.getFullYear(),min.getMonth(),min.getDate()),max:new DATE(max.getFullYear(),max.getMonth(),max.getDate()),content:options.content,empty:options.empty,setter:that.setDate,build:function(date){var cssClass=[],day=date.getDay(),linkClass="",url="#";return(firstDayOfMonth>date||date>lastDayOfMonth)&&cssClass.push(OTHERMONTH),+date===today&&cssClass.push("k-today"),0!==day&&6!==day||cssClass.push("k-weekend"),hasUrl&&inArray(+date,dates)&&(url=navigateUrl.replace("{0}",kendo.toString(date,format,culture)),linkClass=" k-action-link"),{date:date,dates:dates,ns:kendo.ns,title:kendo.toString(date,"D",culture),value:date.getDate(),dateString:toDateString(date),cssClass:cssClass[0]?' class="'+cssClass.join(" ")+'"':"",linkClass:linkClass,url:url}}})},first:function(date){return calendar.firstDayOfMonth(date)},last:function(date){var last=new DATE(date.getFullYear(),date.getMonth()+1,0),first=calendar.firstDayOfMonth(date),timeOffset=Math.abs(last.getTimezoneOffset()-first.getTimezoneOffset());return timeOffset&&last.setHours(first.getHours()+timeOffset/60),last},compare:function(date1,date2){var result,month1=date1.getMonth(),year1=date1.getFullYear(),month2=date2.getMonth(),year2=date2.getFullYear();return result=year1>year2?1:year2>year1?-1:month1==month2?0:month1>month2?1:-1},setDate:function(date,value){var hours=date.getHours();value instanceof DATE?date.setFullYear(value.getFullYear(),value.getMonth(),value.getDate()):calendar.setTime(date,value*MS_PER_DAY),adjustDST(date,hours)},toDateString:function(date){return date.getFullYear()+"/"+date.getMonth()+"/"+date.getDate()}},{name:"year",title:function(date){return date.getFullYear()},content:function(options){var namesAbbr=getCalendarInfo(options.culture).months.namesAbbr,toDateString=this.toDateString,min=options.min,max=options.max;return view({min:new DATE(min.getFullYear(),min.getMonth(),1),max:new DATE(max.getFullYear(),max.getMonth(),1),start:new DATE(options.date.getFullYear(),0,1),setter:this.setDate,build:function(date){return{value:namesAbbr[date.getMonth()],ns:kendo.ns,dateString:toDateString(date),cssClass:""}}})},first:function(date){return new DATE(date.getFullYear(),0,date.getDate())},last:function(date){return new DATE(date.getFullYear(),11,date.getDate())},compare:function(date1,date2){return compare(date1,date2)},setDate:function(date,value){var month,hours=date.getHours();value instanceof DATE?(month=value.getMonth(),date.setFullYear(value.getFullYear(),month,date.getDate()),month!==date.getMonth()&&date.setDate(0)):(month=date.getMonth()+value,date.setMonth(month),month>11&&(month-=12),month>0&&date.getMonth()!=month&&date.setDate(0)),adjustDST(date,hours)},toDateString:function(date){return date.getFullYear()+"/"+date.getMonth()+"/1"}},{name:"decade",title:function(date,min,max){return title(date,min,max,10)},content:function(options){var year=options.date.getFullYear(),toDateString=this.toDateString;return view({start:new DATE(year-year%10-1,0,1),min:new DATE(options.min.getFullYear(),0,1),max:new DATE(options.max.getFullYear(),0,1),setter:this.setDate,build:function(date,idx){return{value:date.getFullYear(),ns:kendo.ns,dateString:toDateString(date),cssClass:0===idx||11==idx?OTHERMONTHCLASS:""}}})},first:function(date){var year=date.getFullYear();return new DATE(year-year%10,date.getMonth(),date.getDate())},last:function(date){var year=date.getFullYear();return new DATE(year-year%10+9,date.getMonth(),date.getDate())},compare:function(date1,date2){return compare(date1,date2,10)},setDate:function(date,value){setDate(date,value,1)},toDateString:function(date){return date.getFullYear()+"/0/1"}},{name:CENTURY,title:function(date,min,max){return title(date,min,max,100)},content:function(options){var year=options.date.getFullYear(),min=options.min.getFullYear(),max=options.max.getFullYear(),toDateString=this.toDateString,minYear=min,maxYear=max;return minYear-=minYear%10,maxYear-=maxYear%10,10>maxYear-minYear&&(maxYear=minYear+9),view({start:new DATE(year-year%100-10,0,1),min:new DATE(minYear,0,1),max:new DATE(maxYear,0,1),setter:this.setDate,build:function(date,idx){var start=date.getFullYear(),end=start+9;return min>start&&(start=min),end>max&&(end=max),{ns:kendo.ns,value:start+" - "+end,dateString:toDateString(date),cssClass:0===idx||11==idx?OTHERMONTHCLASS:""}}})},first:function(date){var year=date.getFullYear();return new DATE(year-year%100,date.getMonth(),date.getDate())},last:function(date){var year=date.getFullYear();return new DATE(year-year%100+99,date.getMonth(),date.getDate())},compare:function(date1,date2){return compare(date1,date2,100)},setDate:function(date,value){setDate(date,value,10)},toDateString:function(date){var year=date.getFullYear();return year-year%10+"/0/1"}}]};calendar.isEqualDatePart=isEqualDatePart,calendar.makeUnselectable=makeUnselectable,calendar.restrictValue=restrictValue,calendar.isInRange=isInRange,
calendar.normalize=normalize,calendar.viewsEnum=views,kendo.calendar=calendar}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(_,f){f()}),function(f,define){define(["./kendo.calendar","./kendo.popup"],f)}(function(){return function($,undefined){function normalize(options){var parseFormats=options.parseFormats,format=options.format;calendar.normalize(options),parseFormats=$.isArray(parseFormats)?parseFormats:[parseFormats],parseFormats.length||parseFormats.push("yyyy-MM-dd"),-1===$.inArray(format,parseFormats)&&parseFormats.splice(0,0,options.format),options.parseFormats=parseFormats}function preventDefault(e){e.preventDefault()}var kendo=window.kendo,ui=kendo.ui,Widget=ui.Widget,parse=kendo.parseDate,keys=kendo.keys,template=kendo.template,activeElement=kendo._activeElement,DIV="<div />",SPAN="<span />",ns=".kendoDatePicker",CLICK="click"+ns,OPEN="open",CLOSE="close",CHANGE="change",DISABLED="disabled",READONLY="readonly",DEFAULT="k-state-default",FOCUSED="k-state-focused",SELECTED="k-state-selected",STATEDISABLED="k-state-disabled",HOVER="k-state-hover",HOVEREVENTS="mouseenter"+ns+" mouseleave"+ns,MOUSEDOWN="mousedown"+ns,ID="id",MIN="min",MAX="max",MONTH="month",ARIA_DISABLED="aria-disabled",ARIA_EXPANDED="aria-expanded",ARIA_HIDDEN="aria-hidden",ARIA_READONLY="aria-readonly",calendar=kendo.calendar,isInRange=calendar.isInRange,restrictValue=calendar.restrictValue,isEqualDatePart=calendar.isEqualDatePart,extend=$.extend,proxy=$.proxy,DATE=Date,DateView=function(options){var id,that=this,body=document.body,div=$(DIV).attr(ARIA_HIDDEN,"true").addClass("k-calendar-container").appendTo(body);that.options=options=options||{},id=options.id,id&&(id+="_dateview",div.attr(ID,id),that._dateViewID=id),that.popup=new ui.Popup(div,extend(options.popup,options,{name:"Popup",isRtl:kendo.support.isRtl(options.anchor)})),that.div=div,that.value(options.value)};DateView.prototype={_calendar:function(){var div,that=this,calendar=that.calendar,options=that.options;calendar||(div=$(DIV).attr(ID,kendo.guid()).appendTo(that.popup.element).on(MOUSEDOWN,preventDefault).on(CLICK,"td:has(.k-link)",proxy(that._click,that)),that.calendar=calendar=new ui.Calendar(div),that._setOptions(options),kendo.calendar.makeUnselectable(calendar.element),calendar.navigate(that._value||that._current,options.start),that.value(that._value))},_setOptions:function(options){this.calendar.setOptions({focusOnNav:!1,change:options.change,culture:options.culture,dates:options.dates,depth:options.depth,footer:options.footer,format:options.format,max:options.max,min:options.min,month:options.month,start:options.start})},setOptions:function(options){var old=this.options;this.options=extend(old,options,{change:old.change,close:old.close,open:old.open}),this.calendar&&this._setOptions(this.options)},destroy:function(){this.popup.destroy()},open:function(){var that=this;that._calendar(),that.popup.open()},close:function(){this.popup.close()},min:function(value){this._option(MIN,value)},max:function(value){this._option(MAX,value)},toggle:function(){var that=this;that[that.popup.visible()?CLOSE:OPEN]()},move:function(e){var that=this,key=e.keyCode,calendar=that.calendar,selectIsClicked=e.ctrlKey&&key==keys.DOWN||key==keys.ENTER,handled=!1;if(e.altKey)key==keys.DOWN?(that.open(),e.preventDefault(),handled=!0):key==keys.UP&&(that.close(),e.preventDefault(),handled=!0);else if(that.popup.visible()){if(key==keys.ESC||selectIsClicked&&calendar._cell.hasClass(SELECTED))return that.close(),e.preventDefault(),!0;that._current=calendar._move(e),handled=!0}return handled},current:function(date){this._current=date,this.calendar._focus(date)},value:function(value){var that=this,calendar=that.calendar,options=that.options;that._value=value,that._current=new DATE(+restrictValue(value,options.min,options.max)),calendar&&calendar.value(value)},_click:function(e){-1!==e.currentTarget.className.indexOf(SELECTED)&&this.close()},_option:function(option,value){var that=this,calendar=that.calendar;that.options[option]=value,calendar&&calendar[option](value)}},DateView.normalize=normalize,kendo.DateView=DateView;var DatePicker=Widget.extend({init:function(element,options){var disabled,div,that=this;Widget.fn.init.call(that,element,options),element=that.element,options=that.options,options.min=parse(element.attr("min"))||parse(options.min),options.max=parse(element.attr("max"))||parse(options.max),normalize(options),that._initialOptions=extend({},options),that._wrapper(),that.dateView=new DateView(extend({},options,{id:element.attr(ID),anchor:that.wrapper,change:function(){that._change(this.value()),that.close()},close:function(e){that.trigger(CLOSE)?e.preventDefault():(element.attr(ARIA_EXPANDED,!1),div.attr(ARIA_HIDDEN,!0))},open:function(e){var date,options=that.options;that.trigger(OPEN)?e.preventDefault():(that.element.val()!==that._oldText&&(date=parse(element.val(),options.parseFormats,options.culture),that.dateView[date?"current":"value"](date)),element.attr(ARIA_EXPANDED,!0),div.attr(ARIA_HIDDEN,!1),that._updateARIA(date))}})),div=that.dateView.div,that._icon();try{element[0].setAttribute("type","text")}catch(e){element[0].type="text"}element.addClass("k-input").attr({role:"combobox","aria-expanded":!1,"aria-owns":that.dateView._dateViewID}),that._reset(),that._template(),disabled=element.is("[disabled]")||$(that.element).parents("fieldset").is(":disabled"),disabled?that.enable(!1):that.readonly(element.is("[readonly]")),that._old=that._update(options.value||that.element.val()),that._oldText=element.val(),kendo.notify(that)},events:[OPEN,CLOSE,CHANGE],options:{name:"DatePicker",value:null,footer:"",format:"",culture:"",parseFormats:[],min:new Date(1900,0,1),max:new Date(2099,11,31),start:MONTH,depth:MONTH,animation:{},month:{},dates:[],ARIATemplate:'Current focused date is #=kendo.toString(data.current, "D")#'},setOptions:function(options){var that=this,value=that._value;Widget.fn.setOptions.call(that,options),options=that.options,options.min=parse(options.min),options.max=parse(options.max),normalize(options),that.dateView.setOptions(options),value&&(that.element.val(kendo.toString(value,options.format,options.culture)),that._updateARIA(value))},_editable:function(options){var that=this,icon=that._dateIcon.off(ns),element=that.element.off(ns),wrapper=that._inputWrapper.off(ns),readonly=options.readonly,disable=options.disable;readonly||disable?(wrapper.addClass(disable?STATEDISABLED:DEFAULT).removeClass(disable?DEFAULT:STATEDISABLED),element.attr(DISABLED,disable).attr(READONLY,readonly).attr(ARIA_DISABLED,disable).attr(ARIA_READONLY,readonly)):(wrapper.addClass(DEFAULT).removeClass(STATEDISABLED).on(HOVEREVENTS,that._toggleHover),element.removeAttr(DISABLED).removeAttr(READONLY).attr(ARIA_DISABLED,!1).attr(ARIA_READONLY,!1).on("keydown"+ns,proxy(that._keydown,that)).on("focusout"+ns,proxy(that._blur,that)).on("focus"+ns,function(){that._inputWrapper.addClass(FOCUSED)}),icon.on(CLICK,proxy(that._click,that)).on(MOUSEDOWN,preventDefault))},readonly:function(readonly){this._editable({readonly:readonly===undefined?!0:readonly,disable:!1})},enable:function(enable){this._editable({readonly:!1,disable:!(enable=enable===undefined?!0:enable)})},destroy:function(){var that=this;Widget.fn.destroy.call(that),that.dateView.destroy(),that.element.off(ns),that._dateIcon.off(ns),that._inputWrapper.off(ns),that._form&&that._form.off("reset",that._resetHandler)},open:function(){this.dateView.open()},close:function(){this.dateView.close()},min:function(value){return this._option(MIN,value)},max:function(value){return this._option(MAX,value)},value:function(value){var that=this;return value===undefined?that._value:(that._old=that._update(value),null===that._old&&that.element.val(""),void(that._oldText=that.element.val()))},_toggleHover:function(e){$(e.currentTarget).toggleClass(HOVER,"mouseenter"===e.type)},_blur:function(){var that=this,value=that.element.val();that.close(),value!==that._oldText&&that._change(value),that._inputWrapper.removeClass(FOCUSED)},_click:function(){var that=this,element=that.element;that.dateView.toggle(),kendo.support.touch||element[0]===activeElement()||element.focus()},_change:function(value){var that=this;value=that._update(value),+that._old!=+value&&(that._old=value,that._oldText=that.element.val(),that._typing||that.element.trigger(CHANGE),that.trigger(CHANGE)),that._typing=!1},_keydown:function(e){var that=this,dateView=that.dateView,value=that.element.val(),handled=!1;dateView.popup.visible()||e.keyCode!=keys.ENTER||value===that._oldText?(handled=dateView.move(e),that._updateARIA(dateView._current),handled||(that._typing=!0)):that._change(value)},_icon:function(){var icon,that=this,element=that.element;icon=element.next("span.k-select"),icon[0]||(icon=$('<span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-calendar">select</span></span>').insertAfter(element)),that._dateIcon=icon.attr({role:"button","aria-controls":that.dateView._dateViewID})},_option:function(option,value){var that=this,options=that.options;return value===undefined?options[option]:(value=parse(value,options.parseFormats,options.culture),void(value&&(options[option]=new DATE(+value),that.dateView[option](value))))},_update:function(value){var formattedValue,that=this,options=that.options,min=options.min,max=options.max,current=that._value,date=parse(value,options.parseFormats,options.culture),isSameType=null===date&&null===current||date instanceof Date&&current instanceof Date;return+date===+current&&isSameType?(formattedValue=kendo.toString(date,options.format,options.culture),formattedValue!==value&&that.element.val(null===date?value:formattedValue),date):(null!==date&&isEqualDatePart(date,min)?date=restrictValue(date,min,max):isInRange(date,min,max)||(date=null),that._value=date,that.dateView.value(date),that.element.val(date?kendo.toString(date,options.format,options.culture):value),that._updateARIA(date),date)},_wrapper:function(){var wrapper,that=this,element=that.element;wrapper=element.parents(".k-datepicker"),wrapper[0]||(wrapper=element.wrap(SPAN).parent().addClass("k-picker-wrap k-state-default"),wrapper=wrapper.wrap(SPAN).parent()),wrapper[0].style.cssText=element[0].style.cssText,element.css({width:"100%",height:element[0].style.height}),that.wrapper=wrapper.addClass("k-widget k-datepicker k-header").addClass(element[0].className),that._inputWrapper=$(wrapper[0].firstChild)},_reset:function(){var that=this,element=that.element,formId=element.attr("form"),form=formId?$("#"+formId):element.closest("form");form[0]&&(that._resetHandler=function(){that.value(element[0].defaultValue),that.max(that._initialOptions.max),that.min(that._initialOptions.min)},that._form=form.on("reset",that._resetHandler))},_template:function(){this._ariaTemplate=template(this.options.ARIATemplate)},_updateARIA:function(date){var cell,that=this,calendar=that.dateView.calendar;that.element.removeAttr("aria-activedescendant"),calendar&&(cell=calendar._cell,cell.attr("aria-label",that._ariaTemplate({current:date||calendar.current()})),that.element.attr("aria-activedescendant",cell.attr("id")))}});ui.plugin(DatePicker)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(_,f){f()}),function(f,define){define(["./kendo.list","./kendo.mobile.scroller"],f)}(function(){return function($,undefined){function indexOfWordAtCaret(caretIdx,text,separator){return separator?text.substring(0,caretIdx).split(separator).length-1:0}function wordAtCaret(caretIdx,text,separator){return text.split(separator)[indexOfWordAtCaret(caretIdx,text,separator)]}function replaceWordAtCaret(caretIdx,text,word,separator){var words=text.split(separator);return words.splice(indexOfWordAtCaret(caretIdx,text,separator),1,word),separator&&""!==words[words.length-1]&&words.push(""),words.join(separator)}var kendo=window.kendo,support=kendo.support,caret=kendo.caret,activeElement=kendo._activeElement,placeholderSupported=support.placeholder,ui=kendo.ui,List=ui.List,keys=kendo.keys,DataSource=kendo.data.DataSource,ARIA_DISABLED="aria-disabled",ARIA_READONLY="aria-readonly",DEFAULT="k-state-default",DISABLED="disabled",READONLY="readonly",FOCUSED="k-state-focused",SELECTED="k-state-selected",STATEDISABLED="k-state-disabled",HOVER="k-state-hover",ns=".kendoAutoComplete",HOVEREVENTS="mouseenter"+ns+" mouseleave"+ns,proxy=$.proxy,AutoComplete=List.extend({init:function(element,options){var wrapper,disabled,that=this;that.ns=ns,options=$.isArray(options)?{dataSource:options}:options,List.fn.init.call(that,element,options),element=that.element,options=that.options,options.placeholder=options.placeholder||element.attr("placeholder"),placeholderSupported&&element.attr("placeholder",options.placeholder),that._wrapper(),that._loader(),that._dataSource(),that._ignoreCase(),element[0].type="text",wrapper=that.wrapper,that._popup(),element.addClass("k-input").on("keydown"+ns,proxy(that._keydown,that)).on("paste"+ns,proxy(that._search,that)).on("focus"+ns,function(){that._prev=that._accessor(),that._placeholder(!1),wrapper.addClass(FOCUSED)}).on("focusout"+ns,function(){that._change(),that._placeholder(),wrapper.removeClass(FOCUSED)}).attr({autocomplete:"off",role:"textbox","aria-haspopup":!0}),that._enable(),that._old=that._accessor(),element[0].id&&element.attr("aria-owns",that.ul[0].id),that._aria(),that._placeholder(),that._initList(),disabled=$(that.element).parents("fieldset").is(":disabled"),disabled&&that.enable(!1),kendo.notify(that)},options:{name:"AutoComplete",enabled:!0,suggest:!1,template:"",groupTemplate:"#:data#",fixedGroupTemplate:"#:data#",dataTextField:"",minLength:1,delay:200,height:200,filter:"startswith",ignoreCase:!0,highlightFirst:!1,separator:null,placeholder:"",animation:{},value:null},_dataSource:function(){var that=this;that.dataSource&&that._refreshHandler?that._unbindDataSource():that._progressHandler=proxy(that._showBusy,that),that.dataSource=DataSource.create(that.options.dataSource).bind("progress",that._progressHandler)},setDataSource:function(dataSource){this.options.dataSource=dataSource,this._dataSource(),this.listView.setDataSource(this.dataSource)},events:["open","close","change","select","filtering","dataBinding","dataBound"],setOptions:function(options){var listOptions=this._listOptions(options);List.fn.setOptions.call(this,options),listOptions.dataValueField=listOptions.dataTextField,this.listView.setOptions(listOptions),this._accessors(),this._aria()},_editable:function(options){var that=this,element=that.element,wrapper=that.wrapper.off(ns),readonly=options.readonly,disable=options.disable;readonly||disable?(wrapper.addClass(disable?STATEDISABLED:DEFAULT).removeClass(disable?DEFAULT:STATEDISABLED),element.attr(DISABLED,disable).attr(READONLY,readonly).attr(ARIA_DISABLED,disable).attr(ARIA_READONLY,readonly)):(wrapper.addClass(DEFAULT).removeClass(STATEDISABLED).on(HOVEREVENTS,that._toggleHover),element.removeAttr(DISABLED).removeAttr(READONLY).attr(ARIA_DISABLED,!1).attr(ARIA_READONLY,!1))},close:function(){var that=this,current=that.listView.focus();current&&current.removeClass(SELECTED),that.popup.close()},destroy:function(){var that=this;that.element.off(ns),that.wrapper.off(ns),List.fn.destroy.call(that)},refresh:function(){this.listView.refresh()},select:function(li){this._select(li)},search:function(word){var length,that=this,options=that.options,ignoreCase=options.ignoreCase,separator=options.separator;word=word||that._accessor(),clearTimeout(that._typingTimeout),separator&&(word=wordAtCaret(caret(that.element)[0],word,separator)),length=word.length,(!length||length>=options.minLength)&&(that._open=!0,that.listView.filter(!0),that._filterSource({value:ignoreCase?word.toLowerCase():word,operator:options.filter,field:options.dataTextField,ignoreCase:ignoreCase}))},suggest:function(word){var idx,that=this,key=that._last,value=that._accessor(),element=that.element[0],caretIdx=caret(element)[0],separator=that.options.separator,words=value.split(separator),wordIndex=indexOfWordAtCaret(caretIdx,value,separator),selectionEnd=caretIdx;return key==keys.BACKSPACE||key==keys.DELETE?void(that._last=undefined):(word=word||"","string"!=typeof word&&(word[0]&&(word=that.dataSource.view()[List.inArray(word[0],that.ul[0])]),word=word?that._text(word):""),0>=caretIdx&&(caretIdx=value.toLowerCase().indexOf(word.toLowerCase())+1),idx=value.substring(0,caretIdx).lastIndexOf(separator),idx=idx>-1?caretIdx-(idx+separator.length):caretIdx,value=words[wordIndex].substring(0,idx),word&&(word=word.toString(),idx=word.toLowerCase().indexOf(value.toLowerCase()),idx>-1&&(word=word.substring(idx+value.length),selectionEnd=caretIdx+word.length,value+=word),separator&&""!==words[words.length-1]&&words.push("")),words[wordIndex]=value,that._accessor(words.join(separator||"")),void(element===activeElement()&&caret(element,caretIdx,selectionEnd)))},value:function(value){return value===undefined?this._accessor():(this.listView.value(value),this._accessor(value),this._old=this._accessor(),void 0)},_click:function(e){var item=e.item,element=this.element;return this.trigger("select",{item:item})?void this.close():(this._select(item),this._blur(),void caret(element,element.val().length))},_initList:function(){var that=this,virtual=that.options.virtual,hasVirtual=!!virtual,listBoundHandler=proxy(that._listBound,that),listOptions={autoBind:!1,selectable:!0,dataSource:that.dataSource,click:$.proxy(that._click,this),change:$.proxy(that._listChange,this),activate:proxy(that._activateItem,that),deactivate:proxy(that._deactivateItem,that),dataBinding:function(){that.trigger("dataBinding"),that._angularItems("cleanup")},dataBound:listBoundHandler,listBound:listBoundHandler};listOptions=$.extend(that._listOptions(),listOptions,"object"==typeof virtual?virtual:{}),listOptions.dataValueField=listOptions.dataTextField,hasVirtual?that.listView=new kendo.ui.VirtualList(that.ul,listOptions):that.listView=new kendo.ui.StaticList(that.ul,listOptions),that.listView.value(that.options.value)},_listBound:function(){var action,that=this,popup=that.popup,options=that.options,data=that.dataSource.flatView(),length=data.length,isActive=that.element[0]===activeElement();if(that._angularItems("compile"),that.listView.value([]),that.listView.focus(-1),that.listView.filter(!1),that._calculateGroupPadding(that._height(length)),popup.position(),length){var current=this.listView.focus();options.highlightFirst&&!current&&that.listView.first(),options.suggest&&isActive&&that.suggest(data[0])}that._open&&(that._open=!1,action=length?"open":"close",that._typingTimeout&&!isActive&&(action="close"),popup[action](),that._typingTimeout=undefined),that._touchScroller&&that._touchScroller.reset(),that._hideBusy(),that._makeUnselectable(),that._hideBusy(),that.trigger("dataBound")},_listChange:function(){this.listView.filter()||this._selectValue(this.listView.selectedDataItems()[0])},_selectValue:function(dataItem){var separator=this.options.separator,text="";dataItem&&(text=this._text(dataItem)),null===text&&(text=""),separator&&(text=replaceWordAtCaret(caret(this.element)[0],this._accessor(),text,separator)),this._prev=text,this._accessor(text),this._placeholder()},_accessor:function(value){var that=this,element=that.element[0];return value===undefined?(value=element.value,element.className.indexOf("k-readonly")>-1&&value===that.options.placeholder?"":value):(element.value=null===value?"":value,void that._placeholder())},_keydown:function(e){var that=this,key=e.keyCode,visible=that.popup.visible(),current=this.listView.focus();if(that._last=key,key===keys.DOWN)visible&&this._move(current?"next":"first"),e.preventDefault();else if(key===keys.UP)visible&&this._move(current?"prev":"last"),e.preventDefault();else if(key===keys.ENTER||key===keys.TAB){if(key===keys.ENTER&&visible&&e.preventDefault(),visible&&current){if(that.trigger("select",{item:current}))return;this._select(current)}this._blur()}else key===keys.ESC?(visible&&e.preventDefault(),that.close()):(that._search(),that._typing=!0)},_move:function(action){this.listView[action](),this.options.suggest&&this.suggest(this.listView.focus())},_hideBusy:function(){var that=this;clearTimeout(that._busy),that._loading.hide(),that.element.attr("aria-busy",!1),that._busy=null},_showBusy:function(){var that=this;that._busy||(that._busy=setTimeout(function(){that.element.attr("aria-busy",!0),that._loading.show()},100))},_placeholder:function(show){if(!placeholderSupported){var value,that=this,element=that.element,placeholder=that.options.placeholder;if(placeholder){if(value=element.val(),show===undefined&&(show=!value),show||(placeholder=value!==placeholder?value:""),value===that._old&&!show)return;element.toggleClass("k-readonly",show).val(placeholder),placeholder||element[0]!==document.activeElement||caret(element[0],0,0)}}},_search:function(){var that=this;clearTimeout(that._typingTimeout),that._typingTimeout=setTimeout(function(){that._prev!==that._accessor()&&(that._prev=that._accessor(),that.search())},that.options.delay)},_select:function(candidate){this.listView.select(candidate)},_loader:function(){this._loading=$('<span class="k-icon k-loading" style="display:none"></span>').insertAfter(this.element)},_toggleHover:function(e){$(e.currentTarget).toggleClass(HOVER,"mouseenter"===e.type)},_wrapper:function(){var wrapper,that=this,element=that.element,DOMelement=element[0];wrapper=element.parent(),wrapper.is("span.k-widget")||(wrapper=element.wrap("<span />").parent()),wrapper.attr("tabindex",-1),wrapper.attr("role","presentation"),wrapper[0].style.cssText=DOMelement.style.cssText,element.css({width:"100%",height:DOMelement.style.height}),that._focused=that.element,that.wrapper=wrapper.addClass("k-widget k-autocomplete k-header").addClass(DOMelement.className)}});ui.plugin(AutoComplete)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(_,f){f()}),function(f,define){define(["./kendo.list","./kendo.mobile.scroller"],f)}(function(){return function($,undefined){function assign(instance,fields,value){for(var field,idx=0,lastIndex=fields.length-1;lastIndex>idx;++idx)field=fields[idx],field in instance||(instance[field]={}),instance=instance[field];instance[fields[lastIndex]]=value}var kendo=window.kendo,ui=kendo.ui,Select=ui.Select,support=kendo.support,activeElement=kendo._activeElement,ObservableObject=kendo.data.ObservableObject,keys=kendo.keys,ns=".kendoDropDownList",DISABLED="disabled",READONLY="readonly",CHANGE="change",FOCUSED="k-state-focused",DEFAULT="k-state-default",STATEDISABLED="k-state-disabled",ARIA_DISABLED="aria-disabled",ARIA_READONLY="aria-readonly",HOVEREVENTS="mouseenter"+ns+" mouseleave"+ns,TABINDEX="tabindex",STATE_FILTER="filter",STATE_ACCEPT="accept",proxy=$.proxy,DropDownList=Select.extend({init:function(element,options){var optionLabel,text,disabled,that=this,index=options&&options.index;that.ns=ns,options=$.isArray(options)?{dataSource:options}:options,Select.fn.init.call(that,element,options),options=that.options,element=that.element.on("focus"+ns,proxy(that._focusHandler,that)),that._focusInputHandler=$.proxy(that._focusInput,that),that._inputTemplate(),that._reset(),that._prev="",that._word="",that.optionLabel=$(),that._wrapper(),that._tabindex(),that.wrapper.data(TABINDEX,that.wrapper.attr(TABINDEX)),that._span(),that._popup(),that._mobile(),that._dataSource(),that._ignoreCase(),that._filterHeader(),that._aria(),that._enable(),that._oldIndex=that.selectedIndex=-1,index!==undefined&&(options.index=index),that._initialIndex=options.index,that._optionLabel(),that._initList(),that._cascade(),options.autoBind?that.dataSource.fetch():-1===that.selectedIndex&&(text=options.text||"",text||(optionLabel=options.optionLabel,optionLabel&&0===options.index?text=optionLabel:that._isSelect&&(text=element.children(":selected").text())),that._textAccessor(text)),disabled=$(that.element).parents("fieldset").is(":disabled"),disabled&&that.enable(!1),kendo.notify(that)},options:{name:"DropDownList",enabled:!0,autoBind:!0,index:0,text:null,value:null,delay:500,height:200,dataTextField:"",dataValueField:"",optionLabel:"",cascadeFrom:"",cascadeFromField:"",ignoreCase:!0,animation:{},filter:"none",minLength:1,virtual:!1,template:null,valueTemplate:null,optionLabelTemplate:null,groupTemplate:"#:data#",fixedGroupTemplate:"#:data#"},events:["open","close",CHANGE,"select","filtering","dataBinding","dataBound","cascade"],setOptions:function(options){Select.fn.setOptions.call(this,options),this.listView.setOptions(this._listOptions(options)),this._optionLabel(),this._inputTemplate(),this._accessors(),this._filterHeader(),this._enable(),this._aria(),!this.value()&&this.optionLabel[0]&&this.select(0)},destroy:function(){var that=this;that.wrapper.off(ns),that.element.off(ns),that._inputWrapper.off(ns),that._arrow.off(),that._arrow=null,that.optionLabel.off(),Select.fn.destroy.call(that)},open:function(){var that=this;that.popup.visible()||(that.listView.isBound()&&that._state!==STATE_ACCEPT?that._allowOpening()&&(that.popup.one("activate",that._focusInputHandler),that.popup.open(),that._focusItem()):(that._open=!0,that._state="rebind",that.filterInput&&(that.filterInput.val(""),that._prev=""),that._filterSource()))},_focusInput:function(){this._focusElement(this.filterInput)},_allowOpening:function(length){return this.optionLabel[0]||this.filterInput||this.dataSource.view().length},toggle:function(toggle){this._toggle(toggle,!0)},current:function(candidate){var current;return candidate===undefined?(current=this.listView.focus(),!current&&0===this.selectedIndex&&this.optionLabel[0]?this.optionLabel:current):void this._focus(candidate)},dataItem:function(index){var that=this,dataItem=null,hasOptionLabel=!!that.optionLabel[0],optionLabel=that.options.optionLabel;return index===undefined?dataItem=that.listView.selectedDataItems()[0]:("number"!=typeof index?index=index.hasClass("k-list-optionlabel")?-1:$(that.items()).index(index):hasOptionLabel&&(index-=1),dataItem=that.dataSource.flatView()[index]),!dataItem&&hasOptionLabel&&(dataItem=$.isPlainObject(optionLabel)?new ObservableObject(optionLabel):that._assignInstance(that._optionLabelText(),"")),dataItem},refresh:function(){this.listView.refresh()},text:function(text){var dataItem,loweredText,that=this,ignoreCase=that.options.ignoreCase;return text=null===text?"":text,text===undefined?that._textAccessor():("string"==typeof text&&(loweredText=ignoreCase?text.toLowerCase():text,that._select(function(data){return data=that._text(data),ignoreCase&&(data=(data+"").toLowerCase()),data===loweredText}),dataItem=that.dataItem(),dataItem&&(text=dataItem)),void that._textAccessor(text))},value:function(value){var that=this,dataSource=that.dataSource;return value===undefined?(value=that._accessor()||that.listView.value()[0],value===undefined||null===value?"":value):(value&&(that._initialIndex=null),that._request&&that.options.cascadeFrom&&that.listView.isBound()?(that._valueSetter&&dataSource.unbind(CHANGE,that._valueSetter),that._valueSetter=proxy(function(){that.value(value)},that),void dataSource.one(CHANGE,that._valueSetter)):(that.listView.value(value).done(function(){-1===that.selectedIndex&&that.text()&&(that.text(""),that._accessor("",-1)),that._old=that._accessor(),that._oldIndex=that.selectedIndex}),void that._fetchData()))},_optionLabel:function(){var that=this,options=that.options,optionLabel=options.optionLabel,template=options.optionLabelTemplate;return optionLabel?(template||(template="#:",template+="string"==typeof optionLabel?"data":kendo.expr(options.dataTextField,"data"),template+="#"),"function"!=typeof template&&(template=kendo.template(template)),that.optionLabelTemplate=template,that.optionLabel[0]||(that.optionLabel=$('<div class="k-list-optionlabel"></div>').prependTo(that.list)),that.optionLabel.html(template(optionLabel)).off().click(proxy(that._click,that)).on(HOVEREVENTS,that._toggleHover),void that.angular("compile",function(){return{elements:that.optionLabel}})):(that.optionLabel.off().remove(),void(that.optionLabel=$()))},_optionLabelText:function(){var optionLabel=this.options.optionLabel;return"string"==typeof optionLabel?optionLabel:this._text(optionLabel)},_listBound:function(){var dataItem,height,value,that=this,initialIndex=that._initialIndex,optionLabel=that.options.optionLabel,filtered=that._state===STATE_FILTER,data=(that.element[0],that.dataSource.flatView()),length=data.length;that._angularItems("compile"),that._presetValue=!1,that.options.virtual||(height=that._height(filtered?length||1:length),that._calculateGroupPadding(height)),that.popup.position(),that._isSelect&&(value=that.value(),length?optionLabel&&(optionLabel=that._option("",that._optionLabelText())):value&&(optionLabel=that._option(value,that.text())),that._options(data,optionLabel,value)),that._hideBusy(),that._makeUnselectable(),filtered||(that._open&&that.toggle(that._allowOpening()),that._open=!1,that._fetch||(length?(!that.listView.value().length&&initialIndex>-1&&null!==initialIndex&&that.select(initialIndex),that._initialIndex=null,dataItem=that.listView.selectedDataItems()[0],dataItem&&that.text()!==that._text(dataItem)&&that._selectValue(dataItem)):that._textAccessor()!==that._optionLabelText()&&(that.listView.value(""),that._selectValue(null),that._oldIndex=that.selectedIndex))),that._hideBusy(),that.trigger("dataBound")},_listChange:function(){this._selectValue(this.listView.selectedDataItems()[0]),(this._presetValue||this._old&&-1===this._oldIndex)&&(this._oldIndex=this.selectedIndex)},_focusHandler:function(){this.wrapper.focus()},_focusinHandler:function(){this._inputWrapper.addClass(FOCUSED),this._prevent=!1},_focusoutHandler:function(){var that=this,filtered=that._state===STATE_FILTER,isIFrame=window.self!==window.top,focusedItem=that._focus();that._prevent||(clearTimeout(that._typingTimeout),filtered&&focusedItem&&!that.trigger("select",{item:focusedItem})&&that._select(focusedItem,!that.dataSource.view().length),support.mobileOS.ios&&isIFrame?that._change():that._blur(),that._inputWrapper.removeClass(FOCUSED),that._prevent=!0,that._open=!1,that.element.blur())},_wrapperMousedown:function(){this._prevent=!!this.filterInput},_wrapperClick:function(e){e.preventDefault(),this.popup.unbind("activate",this._focusInputHandler),this._focused=this.wrapper,this._toggle()},_editable:function(options){var that=this,element=that.element,disable=options.disable,readonly=options.readonly,wrapper=that.wrapper.add(that.filterInput).off(ns),dropDownWrapper=that._inputWrapper.off(HOVEREVENTS);readonly||disable?disable?(wrapper.removeAttr(TABINDEX),dropDownWrapper.addClass(STATEDISABLED).removeClass(DEFAULT)):(dropDownWrapper.addClass(DEFAULT).removeClass(STATEDISABLED),wrapper.on("focusin"+ns,proxy(that._focusinHandler,that)).on("focusout"+ns,proxy(that._focusoutHandler,that))):(element.removeAttr(DISABLED).removeAttr(READONLY),dropDownWrapper.addClass(DEFAULT).removeClass(STATEDISABLED).on(HOVEREVENTS,that._toggleHover),wrapper.attr(TABINDEX,wrapper.data(TABINDEX)).attr(ARIA_DISABLED,!1).attr(ARIA_READONLY,!1).on("keydown"+ns,proxy(that._keydown,that)).on("focusin"+ns,proxy(that._focusinHandler,that)).on("focusout"+ns,proxy(that._focusoutHandler,that)).on("mousedown"+ns,proxy(that._wrapperMousedown,that)),that.wrapper.on("click"+ns,proxy(that._wrapperClick,that)),that.filterInput||wrapper.on("keypress"+ns,proxy(that._keypress,that))),element.attr(DISABLED,disable).attr(READONLY,readonly),wrapper.attr(ARIA_DISABLED,disable).attr(ARIA_READONLY,readonly)},_option:function(value,text){return'<option value="'+value+'">'+text+"</option>"},_keydown:function(e){var isInputActive,handled,that=this,key=e.keyCode,altKey=e.altKey,isPopupVisible=(that.ul[0],that.popup.visible());if(that.filterInput&&(isInputActive=that.filterInput[0]===activeElement()),key===keys.LEFT?(key=keys.UP,handled=!0):key===keys.RIGHT&&(key=keys.DOWN,handled=!0),!handled||!isInputActive){
if(e.keyCode=key,altKey&&key===keys.UP&&that._focusElement(that.wrapper),key===keys.ENTER&&that._typingTimeout&&that.filterInput&&isPopupVisible)return void e.preventDefault();handled=that._move(e),handled||(isPopupVisible&&that.filterInput||(key===keys.HOME?(handled=!0,that._firstItem()):key===keys.END&&(handled=!0,that._lastItem()),handled&&(that._select(that._focus()),e.preventDefault())),altKey||handled||!that.filterInput||that._search())}},_matchText:function(text,index){var that=this,ignoreCase=that.options.ignoreCase,found=!1;return text+="",ignoreCase&&(text=text.toLowerCase()),0===text.indexOf(that._word)&&(that.optionLabel[0]&&(index+=1),that._select(index),that.popup.visible()||that._change(),found=!0),found},_selectNext:function(index){for(var text,that=this,startIndex=index,data=that.dataSource.flatView(),length=data.length;length>index;index++)if(text=that._text(data[index]),text&&that._matchText(text,index)&&(1!==that._word.length||startIndex!==that.selectedIndex))return!0;if(startIndex>0&&length>startIndex)for(index=0;startIndex>=index;index++)if(text=that._text(data[index]),text&&that._matchText(text,index))return!0;return!1},_keypress:function(e){var that=this;if(0!==e.which&&e.keyCode!==kendo.keys.ENTER){var character=String.fromCharCode(e.charCode||e.keyCode),index=that.selectedIndex,length=that._word.length;that.options.ignoreCase&&(character=character.toLowerCase())," "===character&&e.preventDefault(),length||(that._word=character),that._last===character&&1>=length&&index>-1&&that._selectNext(index)||(length&&(that._word+=character),that._last=character,that._search())}},_popupOpen:function(){var popup=this.popup;popup.wrapper=kendo.wrap(popup.element),popup.element.closest(".km-root")[0]&&(popup.wrapper.addClass("km-popup km-widget"),this.wrapper.addClass("km-widget"))},_popup:function(){Select.fn._popup.call(this),this.popup.one("open",proxy(this._popupOpen,this))},_click:function(e){var item=e.item||$(e.currentTarget);return this.trigger("select",{item:item})?void this.close():(this._userTriggered=!0,this._select(item),this._focusElement(this.wrapper),void this._blur())},_focusElement:function(element){var active=activeElement(),wrapper=this.wrapper,filterInput=this.filterInput,compareElement=element===filterInput?wrapper:filterInput,touchEnabled=support.mobileOS&&(support.touch||support.MSPointers||support.pointers);filterInput&&filterInput[0]===element[0]&&touchEnabled||filterInput&&compareElement[0]===active&&(this._prevent=!0,this._focused=element.focus())},_filter:function(word){if(word){var that=this,ignoreCase=that.options.ignoreCase;ignoreCase&&(word=word.toLowerCase()),that._select(function(dataItem){var text=that._text(dataItem);return text!==undefined?(text+="",ignoreCase&&(text=text.toLowerCase()),0===text.indexOf(word)):void 0})}},_search:function(){var that=this,dataSource=that.dataSource,index=that.selectedIndex;if(clearTimeout(that._typingTimeout),"none"!==that.options.filter)that._typingTimeout=setTimeout(function(){var value=that.filterInput.val();that._prev!==value&&(that._prev=value,that.search(value)),that._typingTimeout=null},that.options.delay);else{if(that._typingTimeout=setTimeout(function(){that._word=""},that.options.delay),-1===index&&(index=0),!that.ul[0].firstChild)return void dataSource.fetch().done(function(){dataSource.data()[0]&&index>-1&&that._selectNext(index)});that._selectNext(index)}},_get:function(candidate){var data,found,idx,jQueryCandidate=$(candidate);if(this.optionLabel[0]&&("number"==typeof candidate?candidate>-1&&(candidate-=1):jQueryCandidate.hasClass("k-list-optionlabel")&&(candidate=-1)),"function"==typeof candidate){for(data=this.dataSource.flatView(),idx=0;idx<data.length;idx++)if(candidate(data[idx])){candidate=idx,found=!0;break}found||(candidate=-1)}return candidate},_firstItem:function(){this.optionLabel[0]?this._focus(this.optionLabel):this.listView.first()},_lastItem:function(){this.optionLabel.removeClass("k-state-focused"),this.listView.last()},_nextItem:function(){this.optionLabel.hasClass("k-state-focused")?(this.optionLabel.removeClass("k-state-focused"),this.listView.first()):this.listView.next()},_prevItem:function(){this.optionLabel.hasClass("k-state-focused")||(this.listView.prev(),this.listView.focus()||this.optionLabel.addClass("k-state-focused"))},_focusItem:function(){var listView=this.listView,focusedItem=listView.focus(),index=listView.select();index=index[index.length-1],index===undefined&&this.options.highlightFirst&&!focusedItem&&(index=0),index!==undefined?listView.focus(index):this.options.optionLabel?(this._focus(this.optionLabel),this._select(this.optionLabel)):listView.scrollToIndex(0)},_focus:function(candidate){var listView=this.listView,optionLabel=this.optionLabel;return candidate===undefined?(candidate=listView.focus(),!candidate&&optionLabel.hasClass("k-state-focused")&&(candidate=optionLabel),candidate):(optionLabel.removeClass("k-state-focused"),candidate=this._get(candidate),listView.focus(candidate),void(-1===candidate&&optionLabel.addClass("k-state-focused")))},_select:function(candidate,keepState){var that=this;that.optionLabel;candidate=that._get(candidate),that.listView.select(candidate),keepState||that._state!==STATE_FILTER||(that.listView.filter(!1),that._state=STATE_ACCEPT),-1===candidate&&that._selectValue(null)},_selectValue:function(dataItem){var that=this,optionLabel=that.options.optionLabel,labelElement=that.optionLabel,idx=that.listView.select(),value="",text="";idx=idx[idx.length-1],idx===undefined&&(idx=-1),labelElement.removeClass("k-state-focused k-state-selected"),dataItem?(text=dataItem,value=that._dataValue(dataItem),optionLabel&&(idx+=1)):optionLabel&&(that._focus(labelElement.addClass("k-state-selected")),text=that._optionLabelText(),value="string"==typeof optionLabel?"":that._value(optionLabel),idx=0),that.selectedIndex=idx,null===value&&(value=""),that._textAccessor(text),that._accessor(value,idx),that._triggerCascade()},_mobile:function(){var that=this,popup=that.popup,mobileOS=support.mobileOS,root=popup.element.parents(".km-root").eq(0);root.length&&mobileOS&&(popup.options.animation.open.effects=mobileOS.android||mobileOS.meego?"fadeIn":mobileOS.ios||mobileOS.wp?"slideIn:up":popup.options.animation.open.effects)},_filterHeader:function(){var icon,options=this.options,filterEnalbed="none"!==options.filter;this.filterInput&&(this.filterInput.off(ns).parent().remove(),this.filterInput=null),filterEnalbed&&(icon='<span unselectable="on" class="k-icon k-i-search">select</span>',this.filterInput=$('<input class="k-textbox"/>').attr({role:"listbox","aria-haspopup":!0,"aria-expanded":!1}),this.list.prepend($('<span class="k-list-filter" />').append(this.filterInput.add(icon))))},_span:function(){var span,that=this,wrapper=that.wrapper,SELECTOR="span.k-input";span=wrapper.find(SELECTOR),span[0]||(wrapper.append('<span unselectable="on" class="k-dropdown-wrap k-state-default"><span unselectable="on" class="k-input">&nbsp;</span><span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-arrow-s">select</span></span></span>').append(that.element),span=wrapper.find(SELECTOR)),that.span=span,that._inputWrapper=$(wrapper[0].firstChild),that._arrow=wrapper.find(".k-icon")},_wrapper:function(){var wrapper,that=this,element=that.element,DOMelement=element[0];wrapper=element.parent(),wrapper.is("span.k-widget")||(wrapper=element.wrap("<span />").parent(),wrapper[0].style.cssText=DOMelement.style.cssText,wrapper[0].title=DOMelement.title),element.hide(),that._focused=that.wrapper=wrapper.addClass("k-widget k-dropdown k-header").addClass(DOMelement.className).css("display","").attr({unselectable:"on",role:"listbox","aria-haspopup":!0,"aria-expanded":!1})},_clearSelection:function(parent){this.select(parent.value()?0:-1)},_inputTemplate:function(){var that=this,template=that.options.valueTemplate;template=template?kendo.template(template):$.proxy(kendo.template("#:this._text(data)#",{useWithBlock:!1}),that),that.valueTemplate=template},_textAccessor:function(text){var dataItem=null,template=this.valueTemplate,options=this.options,optionLabel=options.optionLabel,span=this.span;if(text===undefined)return span.text();$.isPlainObject(text)||text instanceof ObservableObject?dataItem=text:optionLabel&&this._optionLabelText()===text&&(dataItem=optionLabel,template=this.optionLabelTemplate),dataItem||(dataItem=this._assignInstance(text,this._accessor()));var getElements=function(){return{elements:span.get(),data:[{dataItem:dataItem}]}};this.angular("cleanup",getElements),span.html(template(dataItem)),this.angular("compile",getElements)},_preselect:function(value,text){value||text||(text=this._optionLabelText()),this._accessor(value),this._textAccessor(text),this._old=this._accessor(),this._oldIndex=this.selectedIndex,this.listView.setValue(value),this._initialIndex=null,this._presetValue=!0},_assignInstance:function(text,value){var dataTextField=this.options.dataTextField,dataItem={};return dataTextField?(assign(dataItem,dataTextField.split("."),text),assign(dataItem,this.options.dataValueField.split("."),value),dataItem=new ObservableObject(dataItem)):dataItem=text,dataItem}});ui.plugin(DropDownList)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(_,f){f()}),function(f,define){define(["./kendo.list","./kendo.mobile.scroller"],f)}(function(){return function($,undefined){var kendo=window.kendo,ui=kendo.ui,List=ui.List,Select=ui.Select,caret=kendo.caret,support=kendo.support,placeholderSupported=support.placeholder,activeElement=kendo._activeElement,keys=kendo.keys,ns=".kendoComboBox",CLICK="click"+ns,MOUSEDOWN="mousedown"+ns,DISABLED="disabled",READONLY="readonly",CHANGE="change",DEFAULT="k-state-default",FOCUSED="k-state-focused",STATEDISABLED="k-state-disabled",ARIA_DISABLED="aria-disabled",ARIA_READONLY="aria-readonly",STATE_FILTER="filter",STATE_ACCEPT="accept",STATE_REBIND="rebind",HOVEREVENTS="mouseenter"+ns+" mouseleave"+ns,proxy=$.proxy,ComboBox=Select.extend({init:function(element,options){var text,disabled,that=this;that.ns=ns,options=$.isArray(options)?{dataSource:options}:options,Select.fn.init.call(that,element,options),options=that.options,element=that.element.on("focus"+ns,proxy(that._focusHandler,that)),options.placeholder=options.placeholder||element.attr("placeholder"),that._reset(),that._wrapper(),that._input(),that._tabindex(that.input),that._popup(),that._dataSource(),that._ignoreCase(),that._enable(),that._oldIndex=that.selectedIndex=-1,that._aria(),that._initialIndex=options.index,that._initList(),that._cascade(),options.autoBind?that._filterSource():(text=options.text,!text&&that._isSelect&&(text=element.children(":selected").text()),text&&(that.input.val(text),that._prev=text)),text||that._placeholder(),disabled=$(that.element).parents("fieldset").is(":disabled"),disabled&&that.enable(!1),kendo.notify(that)},options:{name:"ComboBox",enabled:!0,index:-1,text:null,value:null,autoBind:!0,delay:200,dataTextField:"",dataValueField:"",minLength:0,height:200,highlightFirst:!0,filter:"none",placeholder:"",suggest:!1,cascadeFrom:"",cascadeFromField:"",ignoreCase:!0,animation:{},template:null,groupTemplate:"#:data#",fixedGroupTemplate:"#:data#"},events:["open","close",CHANGE,"select","filtering","dataBinding","dataBound","cascade"],setOptions:function(options){Select.fn.setOptions.call(this,options),this.listView.setOptions(options),this._accessors(),this._aria()},destroy:function(){var that=this;that.input.off(ns),that.element.off(ns),that._inputWrapper.off(ns),Select.fn.destroy.call(that)},_focusHandler:function(){this.input.focus()},_arrowClick:function(){this._toggle()},_inputFocus:function(){this._inputWrapper.addClass(FOCUSED),this._placeholder(!1)},_inputFocusout:function(){var that=this;that._inputWrapper.removeClass(FOCUSED),clearTimeout(that._typingTimeout),that._typingTimeout=null,that.options.text!==that.input.val()&&that.text(that.text()),that._placeholder(),that._blur(),that.element.blur()},_editable:function(options){var that=this,disable=options.disable,readonly=options.readonly,wrapper=that._inputWrapper.off(ns),input=that.element.add(that.input.off(ns)),arrow=that._arrow.parent().off(CLICK+" "+MOUSEDOWN);readonly||disable?(wrapper.addClass(disable?STATEDISABLED:DEFAULT).removeClass(disable?DEFAULT:STATEDISABLED),input.attr(DISABLED,disable).attr(READONLY,readonly).attr(ARIA_DISABLED,disable).attr(ARIA_READONLY,readonly)):(wrapper.addClass(DEFAULT).removeClass(STATEDISABLED).on(HOVEREVENTS,that._toggleHover),input.removeAttr(DISABLED).removeAttr(READONLY).attr(ARIA_DISABLED,!1).attr(ARIA_READONLY,!1),arrow.on(CLICK,proxy(that._arrowClick,that)).on(MOUSEDOWN,function(e){e.preventDefault()}),that.input.on("keydown"+ns,proxy(that._keydown,that)).on("focus"+ns,proxy(that._inputFocus,that)).on("focusout"+ns,proxy(that._inputFocusout,that)))},open:function(){var that=this,state=that._state;that.popup.visible()||(!that.listView.isBound()&&state!==STATE_FILTER||state===STATE_ACCEPT?(that._open=!0,that._state=STATE_REBIND,that.listView.filter(!1),that._filterSource()):(that.popup.open(),that._focusItem()))},_listBound:function(){var dataItem,that=this,options=that.options,initialIndex=that._initialIndex,filtered=that._state===STATE_FILTER,isActive=that.input[0]===activeElement(),listView=that.listView,focusedItem=listView.focus(),data=this.dataSource.flatView(),page=this.dataSource.page(),length=data.length;if(that._angularItems("compile"),that._presetValue=!1,options.virtual||that._calculateGroupPadding(that._height(length)),that.popup.position(),that._isSelect){var hasChild=that.element[0].children[0];that._state===STATE_REBIND&&(that._state="");var keepState=!0,custom=that._customOption;that._customOption=undefined,that._options(data,"",that.value()),custom&&custom[0].selected?that._custom(custom.val(),keepState):hasChild||that._custom("",keepState)}that._hideBusy(),that._makeUnselectable(),filtered||that._fetch?filtered&&focusedItem&&focusedItem.removeClass("k-state-selected"):(listView.value().length||(null!==initialIndex&&initialIndex>-1?(that.select(initialIndex),focusedItem=listView.focus()):that._accessor()&&listView.value(that._accessor())),that._initialIndex=null,dataItem=that.listView.selectedDataItems()[0],dataItem&&that.text()&&that.text()!==that._text(dataItem)&&that._selectValue(dataItem)),!length||page!==undefined&&1!==page||(options.highlightFirst?focusedItem||listView.focusIndex()||listView.focus(0):listView.focus(-1),options.suggest&&isActive&&that.input.val()&&that.suggest(data[0])),that._open&&(that._open=!1,that._typingTimeout&&!isActive?that.popup.close():that.toggle(!!length),that._typingTimeout=null),that._touchScroller&&that._touchScroller.reset(),that._hideBusy(),that.trigger("dataBound")},_listChange:function(){this._selectValue(this.listView.selectedDataItems()[0]),this._presetValue&&(this._oldIndex=this.selectedIndex)},_get:function(candidate){var data,found,idx;if("function"==typeof candidate){for(data=this.dataSource.flatView(),idx=0;idx<data.length;idx++)if(candidate(data[idx])){candidate=idx,found=!0;break}found||(candidate=-1)}return candidate},_select:function(candidate,keepState){candidate=this._get(candidate),-1===candidate&&(this.input[0].value="",this._accessor("")),this.listView.select(candidate),keepState||this._state!==STATE_FILTER||(this.listView.filter(!1),this._state=STATE_ACCEPT)},_selectValue:function(dataItem){var idx=this.listView.select(),value="",text="";idx=idx[idx.length-1],idx===undefined&&(idx=-1),this.selectedIndex=idx,-1===idx?(value=text=this.input[0].value,this.listView.focus(-1)):(dataItem&&(value=this._dataValue(dataItem),text=this._text(dataItem)),null===value&&(value="")),this._prev=this.input[0].value=text,this._accessor(value!==undefined?value:text,idx),this._placeholder(),this._triggerCascade()},refresh:function(){this.listView.refresh()},suggest:function(word){var idx,that=this,element=that.input[0],value=that.text(),caretIdx=caret(element)[0],key=that._last;return key==keys.BACKSPACE||key==keys.DELETE?void(that._last=undefined):(word=word||"","string"!=typeof word&&(word[0]&&(word=that.dataSource.view()[List.inArray(word[0],that.ul[0])]),word=word?that._text(word):""),0>=caretIdx&&(caretIdx=value.toLowerCase().indexOf(word.toLowerCase())+1),word?(word=word.toString(),idx=word.toLowerCase().indexOf(value.toLowerCase()),idx>-1&&(value+=word.substring(idx+value.length))):value=value.substring(0,caretIdx),void(value.length===caretIdx&&word||(element.value=value,element===activeElement()&&caret(element,caretIdx,value.length))))},text:function(text){text=null===text?"":text;var dataItem,value,that=this,input=that.input[0],ignoreCase=that.options.ignoreCase,loweredText=text;if(text===undefined)return input.value;if(dataItem=that.dataItem(),that.options.autoBind!==!1||that.listView.isBound()){if(dataItem&&that._text(dataItem)===text&&(value=that._value(dataItem),null===value?value="":value+="",value===that._old))return void that._triggerCascade();ignoreCase&&(loweredText=loweredText.toLowerCase()),that._select(function(data){return data=that._text(data),ignoreCase&&(data=(data+"").toLowerCase()),data===loweredText}),that.selectedIndex<0&&(that._accessor(text),input.value=text,that._triggerCascade()),that._prev=input.value}},toggle:function(toggle){this._toggle(toggle,!0)},value:function(value){var that=this,options=that.options;return value===undefined?(value=that._accessor()||that.listView.value()[0],value===undefined||null===value?"":value):void(value===options.value&&that.input.val()===options.text||(that._accessor(value),that.listView.value(value).done(function(){that._selectValue(that.listView.selectedDataItems()[0]),-1===that.selectedIndex&&(that._accessor(value),that.input.val(value),that._placeholder(!0)),that._old=that._accessor(),that._oldIndex=that.selectedIndex,that._prev=that.input.val(),that._state===STATE_FILTER&&(that._state=STATE_ACCEPT)}),that._fetchData()))},_click:function(e){var item=e.item;return this.trigger("select",{item:item})?void this.close():(this._userTriggered=!0,this._select(item),void this._blur())},_filter:function(word){var that=this,options=that.options,dataSource=that.dataSource,ignoreCase=options.ignoreCase,predicate=function(dataItem){var text=that._text(dataItem);return text!==undefined?(text+="",""!==text&&""===word?!1:(ignoreCase&&(text=text.toLowerCase()),0===text.indexOf(word))):void 0};if(ignoreCase&&(word=word.toLowerCase()),!that.ul[0].firstChild)return void dataSource.one(CHANGE,function(){dataSource.view()[0]&&that.search(word)}).fetch();this.listView.focus(this._get(predicate));var current=this.listView.focus();current&&(options.suggest&&that.suggest(current),this.open()),this.options.highlightFirst&&!word&&this.listView.first(),that._hideBusy()},_input:function(){var input,that=this,element=that.element.removeClass("k-input")[0],accessKey=element.accessKey,wrapper=that.wrapper,SELECTOR="input.k-input",name=element.name||"";name&&(name='name="'+name+'_input" '),input=wrapper.find(SELECTOR),input[0]||(wrapper.append('<span tabindex="-1" unselectable="on" class="k-dropdown-wrap k-state-default"><input '+name+'class="k-input" type="text" autocomplete="off"/><span tabindex="-1" unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-arrow-s">select</span></span></span>').append(that.element),input=wrapper.find(SELECTOR)),input[0].style.cssText=element.style.cssText,input[0].title=element.title,element.maxLength>-1&&(input[0].maxLength=element.maxLength),input.addClass(element.className).val(this.options.text||element.value).css({width:"100%",height:element.style.height}).attr({role:"combobox","aria-expanded":!1}).show(),placeholderSupported&&input.attr("placeholder",that.options.placeholder),accessKey&&(element.accessKey="",input[0].accessKey=accessKey),that._focused=that.input=input,that._inputWrapper=$(wrapper[0].firstChild),that._arrow=wrapper.find(".k-icon").attr({role:"button",tabIndex:-1}),element.id&&that._arrow.attr("aria-controls",that.ul[0].id)},_keydown:function(e){var that=this,key=e.keyCode;that._last=key,clearTimeout(that._typingTimeout),that._typingTimeout=null,key==keys.TAB||that._move(e)||that._search()},_placeholder:function(show){if(!placeholderSupported){var value,that=this,input=that.input,placeholder=that.options.placeholder;if(placeholder){if(value=that.value(),show===undefined&&(show=!value),input.toggleClass("k-readonly",show),!show){if(value)return;placeholder=""}input.val(placeholder),placeholder||input[0]!==activeElement()||caret(input[0],0,0)}}},_search:function(){var that=this;that._typingTimeout=setTimeout(function(){var value=that.text();that._prev!==value&&(that._prev=value,that.search(value)),that._typingTimeout=null},that.options.delay)},_wrapper:function(){var that=this,element=that.element,wrapper=element.parent();wrapper.is("span.k-widget")||(wrapper=element.hide().wrap("<span />").parent(),wrapper[0].style.cssText=element[0].style.cssText),that.wrapper=wrapper.addClass("k-widget k-combobox k-header").addClass(element[0].className).css("display","")},_clearSelection:function(parent,isFiltered){var that=this,hasValue=parent.value(),custom=hasValue&&-1===parent.selectedIndex;(isFiltered||!hasValue||custom)&&(that.options.value="",that.value(""))},_preselect:function(value,text){this.input.val(text),this._accessor(value),this._old=this._accessor(),this._oldIndex=this.selectedIndex,this.listView.setValue(value),this._initialIndex=null,this._presetValue=!0}});ui.plugin(ComboBox)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(_,f){f()}),function(f,define){define(["./kendo.list","./kendo.mobile.scroller"],f)}(function(){return function($,undefined){function compare(a,b){var length;if(null===a&&null!==b||null!==a&&null===b)return!1;if(length=a.length,length!==b.length)return!1;for(;length--;)if(a[length]!==b[length])return!1;return!0}var kendo=window.kendo,ui=kendo.ui,List=ui.List,keys=kendo.keys,activeElement=kendo._activeElement,ObservableArray=kendo.data.ObservableArray,proxy=$.proxy,ID="id",LI="li",ACCEPT="accept",FILTER="filter",REBIND="rebind",OPEN="open",CLOSE="close",CHANGE="change",PROGRESS="progress",SELECT="select",ARIA_DISABLED="aria-disabled",ARIA_READONLY="aria-readonly",FOCUSEDCLASS="k-state-focused",HIDDENCLASS="k-loading-hidden",HOVERCLASS="k-state-hover",STATEDISABLED="k-state-disabled",DISABLED="disabled",READONLY="readonly",ns=".kendoMultiSelect",CLICK="click"+ns,KEYDOWN="keydown"+ns,MOUSEENTER="mouseenter"+ns,MOUSELEAVE="mouseleave"+ns,HOVEREVENTS=MOUSEENTER+" "+MOUSELEAVE,quotRegExp=/"/g,isArray=$.isArray,styles=["font-family","font-size","font-stretch","font-style","font-weight","letter-spacing","text-transform","line-height"],MultiSelect=List.extend({init:function(element,options){var id,disabled,that=this;that.ns=ns,List.fn.init.call(that,element,options),that._optionsMap={},that._customOptions={},that._wrapper(),that._tagList(),that._input(),that._textContainer(),that._loader(),that._tabindex(that.input),element=that.element.attr("multiple","multiple").hide(),options=that.options,options.placeholder||(options.placeholder=element.data("placeholder")),id=element.attr(ID),id&&(that._tagID=id+"_tag_active",id+="_taglist",that.tagList.attr(ID,id)),that._aria(id),that._dataSource(),that._ignoreCase(),that._popup(),that._tagTemplate(),that._initList(),that._reset(),that._enable(),that._placeholder(),options.autoBind?that.dataSource.fetch():options.value&&that._preselect(options.value),disabled=$(that.element).parents("fieldset").is(":disabled"),disabled&&that.enable(!1),kendo.notify(that)},_preselect:function(data,value){var that=this;isArray(data)||data instanceof kendo.data.ObservableArray||(data=[data]),($.isPlainObject(data[0])||data[0]instanceof kendo.data.ObservableObject||!that.options.dataValueField)&&(that._retrieveData=!0,that.dataSource.data(data),that.value(value||that._initialValues))},options:{name:"MultiSelect",enabled:!0,autoBind:!0,autoClose:!0,highlightFirst:!0,dataTextField:"",dataValueField:"",filter:"startswith",ignoreCase:!0,minLength:0,delay:100,value:null,maxSelectedItems:null,placeholder:"",height:200,animation:{},itemTemplate:"",tagTemplate:"",groupTemplate:"#:data#",fixedGroupTemplate:"#:data#"},events:[OPEN,CLOSE,CHANGE,SELECT,"filtering","dataBinding","dataBound"],setDataSource:function(dataSource){this.options.dataSource=dataSource,this._dataSource(),this.listView.setDataSource(this.dataSource),this.options.autoBind&&this.dataSource.fetch()},setOptions:function(options){var listOptions=this._listOptions(options);List.fn.setOptions.call(this,options),this._normalizeOptions(listOptions),this.listView.setOptions(listOptions),this._accessors(),this._aria(this.tagList.attr(ID)),this._tagTemplate()},currentTag:function(candidate){var that=this;return candidate===undefined?that._currentTag:(that._currentTag&&(that._currentTag.removeClass(FOCUSEDCLASS).removeAttr(ID),that.input.removeAttr("aria-activedescendant")),candidate&&(candidate.addClass(FOCUSEDCLASS).attr(ID,that._tagID),that.input.attr("aria-activedescendant",that._tagID)),that._currentTag=candidate,void 0)},dataItems:function(){return this.listView.selectedDataItems()},destroy:function(){var that=this,ns=that.ns;clearTimeout(that._busy),clearTimeout(that._typingTimeout),that.wrapper.off(ns),that.tagList.off(ns),that.input.off(ns),List.fn.destroy.call(that)},_activateItem:function(){List.fn._activateItem.call(this),this.currentTag(null)},_normalizeOptions:function(options){var itemTemplate=this.options.itemTemplate||this.options.template,template=options.itemTemplate||itemTemplate||options.template;template||(template="#:"+kendo.expr(options.dataTextField,"data")+"#"),options.template=template},_initList:function(){var that=this,virtual=that.options.virtual,hasVirtual=!!virtual,listBoundHandler=proxy(that._listBound,that),listOptions={autoBind:!1,selectable:"multiple",dataSource:that.dataSource,click:proxy(that._click,that),change:proxy(that._listChange,that),activate:proxy(that._activateItem,that),deactivate:proxy(that._deactivateItem,that),dataBinding:function(){that.trigger("dataBinding"),that._angularItems("cleanup")},dataBound:listBoundHandler,listBound:listBoundHandler,selectedItemChange:proxy(that._selectedItemChange,that)};listOptions=$.extend(that._listOptions(),listOptions,"object"==typeof virtual?virtual:{}),that._normalizeOptions(listOptions),hasVirtual?that.listView=new kendo.ui.VirtualList(that.ul,listOptions):that.listView=new kendo.ui.StaticList(that.ul,listOptions),that.listView.value(that._initialValues||that.options.value)},_listChange:function(e){this._state===REBIND&&(this._state="",e.added=[]),this._selectValue(e.added,e.removed)},_selectedItemChange:function(e){var context,idx,items=e.items;for(idx=0;idx<items.length;idx++)context=items[idx],this.tagList.children().eq(context.index).children("span:first").html(this.tagTextTemplate(context.item))},_wrapperMousedown:function(e){var that=this,notInput="input"!==e.target.nodeName.toLowerCase(),closeButton=$(e.target).hasClass("k-select")||$(e.target).parent().hasClass("k-select");!notInput||closeButton&&kendo.support.mobileOS||e.preventDefault(),closeButton||(that.input[0]!==activeElement()&&notInput&&that.input.focus(),0===that.options.minLength&&that.open())},_inputFocus:function(){this._placeholder(!1),this.wrapper.addClass(FOCUSEDCLASS)},_inputFocusout:function(){var that=this;clearTimeout(that._typingTimeout),that.wrapper.removeClass(FOCUSEDCLASS),that._placeholder(!that.listView.selectedDataItems()[0],!0),that.close(),that._state===FILTER&&(that._state=ACCEPT,that.listView.filter(!1),that.listView.skipUpdate(!0)),that.element.blur()},_removeTag:function(tag){var option,that=this,state=that._state,position=tag.index(),listView=that.listView,value=listView.value()[position],customIndex=that._customOptions[value];customIndex!==undefined||state!==ACCEPT&&state!==FILTER||(customIndex=that._optionsMap[value]),customIndex!==undefined?(option=that.element[0].children[customIndex],option.removeAttribute("selected"),option.selected=!1,listView.removeAt(position),tag.remove()):listView.select(listView.select()[position]),that.currentTag(null),that._change(),that._close()},_tagListClick:function(e){this._removeTag($(e.target).closest(LI))},_editable:function(options){var that=this,disable=options.disable,readonly=options.readonly,wrapper=that.wrapper.off(ns),tagList=that.tagList.off(ns),input=that.element.add(that.input.off(ns));readonly||disable?(disable?wrapper.addClass(STATEDISABLED):wrapper.removeClass(STATEDISABLED),input.attr(DISABLED,disable).attr(READONLY,readonly).attr(ARIA_DISABLED,disable).attr(ARIA_READONLY,readonly)):(wrapper.removeClass(STATEDISABLED).on(HOVEREVENTS,that._toggleHover).on("mousedown"+ns+" touchend"+ns,proxy(that._wrapperMousedown,that)),that.input.on(KEYDOWN,proxy(that._keydown,that)).on("paste"+ns,proxy(that._search,that)).on("focus"+ns,proxy(that._inputFocus,that)).on("focusout"+ns,proxy(that._inputFocusout,that)),input.removeAttr(DISABLED).removeAttr(READONLY).attr(ARIA_DISABLED,!1).attr(ARIA_READONLY,!1),tagList.on(MOUSEENTER,LI,function(){$(this).addClass(HOVERCLASS)}).on(MOUSELEAVE,LI,function(){$(this).removeClass(HOVERCLASS)}).on(CLICK,"li.k-button .k-select",proxy(that._tagListClick,that)))},_close:function(){var that=this;that.options.autoClose?that.close():that.popup.position()},close:function(){this.popup.close()},open:function(){var that=this;that._request&&(that._retrieveData=!1),that._retrieveData||!that.listView.isBound()||that._state===ACCEPT?(that._open=!0,that._state=REBIND,that._retrieveData=!1,that.listView.filter(!1),that.listView.skipUpdate(!0),that._filterSource()):that._allowSelection()&&(that.popup.open(),that._focusItem())},toggle:function(toggle){toggle=toggle!==undefined?toggle:!this.popup.visible(),this[toggle?OPEN:CLOSE]()},refresh:function(){this.listView.refresh()},_listBound:function(e){var that=this,data=that.dataSource.flatView(),page=that.dataSource.page(),length=data.length;that._angularItems("compile"),that._render(data),that._calculateGroupPadding(that._height(length)),that._open&&(that._open=!1,that.toggle(length)),that.popup.position(),!that.options.highlightFirst||page!==undefined&&1!==page||that.listView.first(),that._touchScroller&&that._touchScroller.reset(),that._hideBusy(),that._makeUnselectable(),that._hideBusy(),that.trigger("dataBound")},search:function(word){var expression,length,that=this,options=that.options,ignoreCase=options.ignoreCase,filter=options.filter,field=options.dataTextField,inputValue=that.input.val();options.placeholder===inputValue&&(inputValue=""),clearTimeout(that._typingTimeout),word="string"==typeof word?word:inputValue,length=word.length,(!length||length>=options.minLength)&&(that.listView.filter(!0),that._state=FILTER,that._open=!0,expression={value:ignoreCase?word.toLowerCase():word,field:field,operator:filter,ignoreCase:ignoreCase},that._filterSource(expression,that._retrieveData),that._retrieveData=!1)},value:function(value){var that=this,oldValue=that.listView.value().slice(),maxSelectedItems=that.options.maxSelectedItems;return value===undefined?oldValue:(value=that._normalizeValues(value),null!==maxSelectedItems&&value.length>maxSelectedItems&&(value=value.slice(0,maxSelectedItems)),that.listView.value(value),that._old=value,void that._fetchData())},_setOption:function(value,selected){var option=this.element[0].children[this._optionsMap[value]];option&&(selected?option.setAttribute("selected","selected"):option.removeAttribute("selected"),option.selected=selected)},_fetchData:function(){var that=this,hasItems=!!that.dataSource.view().length,isEmptyArray=0===that.listView.value().length;isEmptyArray||that._request||that._fetch||hasItems||(that._fetch=!0,that.dataSource.fetch().done(function(){that._fetch=!1}))},_dataSource:function(){var that=this,element=that.element,options=that.options,dataSource=options.dataSource||{};
dataSource=isArray(dataSource)?{data:dataSource}:dataSource,dataSource.select=element,dataSource.fields=[{field:options.dataTextField},{field:options.dataValueField}],that.dataSource&&that._refreshHandler?that._unbindDataSource():that._progressHandler=proxy(that._showBusy,that),that.dataSource=kendo.data.DataSource.create(dataSource).bind(PROGRESS,that._progressHandler)},_reset:function(){var that=this,element=that.element,formId=element.attr("form"),form=formId?$("#"+formId):element.closest("form");form[0]&&(that._resetHandler=function(){setTimeout(function(){that.value(that._initialValues),that._placeholder()})},that._form=form.on("reset",that._resetHandler))},_initValue:function(){var value=this.options.value||this.element.val();this._old=this._initialValues=this._normalizeValues(value)},_normalizeValues:function(value){var that=this;return null===value?value=[]:value&&$.isPlainObject(value)?value=[that._value(value)]:value&&$.isPlainObject(value[0])?value=$.map(value,function(dataItem){return that._value(dataItem)}):isArray(value)||value instanceof ObservableArray||(value=[value]),value},_change:function(){var that=this,value=that.value();compare(value,that._old)||(that._old=value.slice(),that.trigger(CHANGE),that.element.trigger(CHANGE))},_click:function(e){var item=e.item;return this.trigger(SELECT,{item:item})?void this._close():(this._select(item),this._change(),void this._close())},_keydown:function(e){var that=this,key=e.keyCode,tag=that._currentTag,current=that.listView.focus(),hasValue=that.input.val(),isRtl=kendo.support.isRtl(that.wrapper),visible=that.popup.visible();if(key===keys.DOWN){if(e.preventDefault(),!visible)return that.open(),void(current||this.listView.first());current?(this.listView.next(),this.listView.focus()||this.listView.last()):this.listView.first()}else if(key===keys.UP)visible&&(current&&this.listView.prev(),this.listView.focus()||that.close()),e.preventDefault();else if(key===keys.LEFT&&!isRtl||key===keys.RIGHT&&isRtl)hasValue||(tag=tag?tag.prev():$(that.tagList[0].lastChild),tag[0]&&that.currentTag(tag));else if(key===keys.RIGHT&&!isRtl||key===keys.LEFT&&isRtl)!hasValue&&tag&&(tag=tag.next(),that.currentTag(tag[0]?tag:null));else if(key===keys.ENTER&&visible){if(current){if(that.trigger(SELECT,{item:current}))return void that._close();that._select(current)}that._change(),that._close(),e.preventDefault()}else key===keys.ESC?(visible?e.preventDefault():that.currentTag(null),that.close()):key===keys.HOME?visible?this.listView.first():hasValue||(tag=that.tagList[0].firstChild,tag&&that.currentTag($(tag))):key===keys.END?visible?this.listView.last():hasValue||(tag=that.tagList[0].lastChild,tag&&that.currentTag($(tag))):key!==keys.DELETE&&key!==keys.BACKSPACE||hasValue?(clearTimeout(that._typingTimeout),setTimeout(function(){that._scale()}),that._search()):(key!==keys.BACKSPACE||tag||(tag=$(that.tagList[0].lastChild)),tag&&tag[0]&&that._removeTag(tag))},_hideBusy:function(){var that=this;clearTimeout(that._busy),that.input.attr("aria-busy",!1),that._loading.addClass(HIDDENCLASS),that._request=!1,that._busy=null},_showBusyHandler:function(){this.input.attr("aria-busy",!0),this._loading.removeClass(HIDDENCLASS)},_showBusy:function(){var that=this;that._request=!0,that._busy||(that._busy=setTimeout(proxy(that._showBusyHandler,that),100))},_placeholder:function(show,skipCaret){var that=this,input=that.input,active=activeElement();show===undefined&&(show=!1,input[0]!==active&&(show=!that.listView.selectedDataItems()[0])),that._prev="",input.toggleClass("k-readonly",show).val(show?that.options.placeholder:""),input[0]!==active||skipCaret||kendo.caret(input[0],0,0),that._scale()},_scale:function(){var textWidth,that=this,wrapper=that.wrapper,wrapperWidth=wrapper.width(),span=that._span.text(that.input.val());wrapper.is(":visible")?textWidth=span.width()+25:(span.appendTo(document.documentElement),wrapperWidth=textWidth=span.width()+25,span.appendTo(wrapper)),that.input.width(textWidth>wrapperWidth?wrapperWidth:textWidth)},_option:function(dataValue,dataText,selected){var option="<option";return dataValue!==undefined&&(dataValue+="",-1!==dataValue.indexOf('"')&&(dataValue=dataValue.replace(quotRegExp,"&quot;")),option+=' value="'+dataValue+'"'),selected&&(option+=" selected"),option+=">",dataText!==undefined&&(option+=kendo.htmlEncode(dataText)),option+="</option>"},_render:function(data){var selectedIndex,dataItem,value,idx,selectedItems=this.listView.selectedDataItems(),values=this.listView.value(),length=data.length,options="";values.length!==selectedItems.length&&(selectedItems=this._buildSelectedItems(values));var custom={},optionsMap={};for(idx=0;length>idx;idx++)dataItem=data[idx],value=this._value(dataItem),selectedIndex=this._selectedItemIndex(value,selectedItems),-1!==selectedIndex&&selectedItems.splice(selectedIndex,1),optionsMap[value]=idx,options+=this._option(value,this._text(dataItem),-1!==selectedIndex);if(selectedItems.length)for(idx=0;idx<selectedItems.length;idx++)dataItem=selectedItems[idx],value=this._value(dataItem),custom[value]=length,optionsMap[value]=length,length+=1,options+=this._option(value,this._text(dataItem),!0);this._customOptions=custom,this._optionsMap=optionsMap,this.element.html(options)},_buildSelectedItems:function(values){for(var item,valueField=this.options.dataValueField,textField=this.options.dataTextField,result=[],idx=0;idx<values.length;idx++)item={},item[valueField]=values[idx],item[textField]=values[idx],result.push(item);return result},_selectedItemIndex:function(value,selectedItems){for(var valueGetter=this._value,idx=0;idx<selectedItems.length;idx++)if(value===valueGetter(selectedItems[idx]))return idx;return-1},_search:function(){var that=this;that._typingTimeout=setTimeout(function(){var value=that.input.val();that._prev!==value&&(that._prev=value,that.search(value))},that.options.delay)},_allowSelection:function(){var max=this.options.maxSelectedItems;return null===max||max>this.listView.value().length},_angularTagItems:function(cmd){var that=this;that.angular(cmd,function(){return{elements:that.tagList[0].children,data:$.map(that.dataItems(),function(dataItem){return{dataItem:dataItem}})}})},_selectValue:function(added,removed){var removedItem,addedItem,idx,that=this,tagList=that.tagList,getter=that._value;for(that._angularTagItems("cleanup"),idx=removed.length-1;idx>-1;idx--)removedItem=removed[idx],tagList[0].removeChild(tagList[0].children[removedItem.position]),that._setOption(getter(removedItem.dataItem),!1);for(idx=0;idx<added.length;idx++)addedItem=added[idx],tagList.append(that.tagTemplate(addedItem.dataItem)),that._setOption(getter(addedItem.dataItem),!0);that._angularTagItems("compile"),that._placeholder()},_select:function(candidate){var that=this;that._state===REBIND&&(that._state=""),that._allowSelection()&&(this.listView.select(candidate),that._placeholder(),that._state===FILTER&&(that._state=ACCEPT,that.listView.filter(!1),that.listView.skipUpdate(!0)))},_input:function(){var that=this,accessKey=that.element[0].accessKey,input=that._innerWrapper.children("input.k-input");input[0]||(input=$('<input class="k-input" style="width: 25px" />').appendTo(that._innerWrapper)),that.element.removeAttr("accesskey"),that._focused=that.input=input.attr({accesskey:accessKey,autocomplete:"off",role:"listbox","aria-expanded":!1})},_tagList:function(){var that=this,tagList=that._innerWrapper.children("ul");tagList[0]||(tagList=$('<ul role="listbox" unselectable="on" class="k-reset"/>').appendTo(that._innerWrapper)),that.tagList=tagList},_tagTemplate:function(){var that=this,options=that.options,tagTemplate=options.tagTemplate,hasDataSource=options.dataSource;that.element[0].length&&!hasDataSource&&(options.dataTextField=options.dataTextField||"text",options.dataValueField=options.dataValueField||"value"),tagTemplate=tagTemplate?kendo.template(tagTemplate):kendo.template("#:"+kendo.expr(options.dataTextField,"data")+"#",{useWithBlock:!1}),that.tagTextTemplate=tagTemplate,that.tagTemplate=function(data){return'<li class="k-button" unselectable="on"><span unselectable="on">'+tagTemplate(data)+'</span><span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-close">delete</span></span></li>'}},_loader:function(){this._loading=$('<span class="k-icon k-loading '+HIDDENCLASS+'"></span>').insertAfter(this.input)},_textContainer:function(){var computedStyles=kendo.getComputedStyles(this.input[0],styles);computedStyles.position="absolute",computedStyles.visibility="hidden",computedStyles.top=-3333,computedStyles.left=-3333,this._span=$("<span/>").css(computedStyles).appendTo(this.wrapper)},_wrapper:function(){var that=this,element=that.element,wrapper=element.parent("span.k-multiselect");wrapper[0]||(wrapper=element.wrap('<div class="k-widget k-multiselect k-header" unselectable="on" />').parent(),wrapper[0].style.cssText=element[0].style.cssText,wrapper[0].title=element[0].title,$('<div class="k-multiselect-wrap k-floatwrap" unselectable="on" />').insertBefore(element)),that.wrapper=wrapper.addClass(element[0].className).css("display",""),that._innerWrapper=$(wrapper[0].firstChild)}});ui.plugin(MultiSelect)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(_,f){f()}),function(f,define){define(["./kendo.data","./kendo.editable","./kendo.selectable"],f)}(function(){return function($,undefined){var kendo=window.kendo,CHANGE="change",CANCEL="cancel",DATABOUND="dataBound",DATABINDING="dataBinding",Widget=kendo.ui.Widget,keys=kendo.keys,FOCUSSELECTOR=">*",PROGRESS="progress",ERROR="error",FOCUSED="k-state-focused",SELECTED="k-state-selected",KEDITITEM="k-edit-item",EDIT="edit",REMOVE="remove",SAVE="save",CLICK="click",NS=".kendoListView",proxy=$.proxy,activeElement=kendo._activeElement,progress=kendo.ui.progress,DataSource=kendo.data.DataSource,ListView=kendo.ui.DataBoundWidget.extend({init:function(element,options){var that=this;options=$.isArray(options)?{dataSource:options}:options,Widget.fn.init.call(that,element,options),options=that.options,that.wrapper=element=that.element,element[0].id&&(that._itemId=element[0].id+"_lv_active"),that._element(),that._dataSource(),that._templates(),that._navigatable(),that._selectable(),that._pageable(),that._crudHandlers(),that.options.autoBind&&that.dataSource.fetch(),kendo.notify(that)},events:[CHANGE,CANCEL,DATABINDING,DATABOUND,EDIT,REMOVE,SAVE],options:{name:"ListView",autoBind:!0,selectable:!1,navigatable:!1,template:"",altTemplate:"",editTemplate:""},setOptions:function(options){Widget.fn.setOptions.call(this,options),this._templates(),this.selectable&&(this.selectable.destroy(),this.selectable=null),this._selectable()},_templates:function(){var options=this.options;this.template=kendo.template(options.template||""),this.altTemplate=kendo.template(options.altTemplate||options.template),this.editTemplate=kendo.template(options.editTemplate||"")},_item:function(action){return this.element.children()[action]()},items:function(){return this.element.children()},dataItem:function(element){var attr=kendo.attr("uid"),uid=$(element).closest("["+attr+"]").attr(attr);return this.dataSource.getByUid(uid)},setDataSource:function(dataSource){this.options.dataSource=dataSource,this._dataSource(),this.options.autoBind&&dataSource.fetch()},_unbindDataSource:function(){var that=this;that.dataSource.unbind(CHANGE,that._refreshHandler).unbind(PROGRESS,that._progressHandler).unbind(ERROR,that._errorHandler)},_dataSource:function(){var that=this;that.dataSource&&that._refreshHandler?that._unbindDataSource():(that._refreshHandler=proxy(that.refresh,that),that._progressHandler=proxy(that._progress,that),that._errorHandler=proxy(that._error,that)),that.dataSource=DataSource.create(that.options.dataSource).bind(CHANGE,that._refreshHandler).bind(PROGRESS,that._progressHandler).bind(ERROR,that._errorHandler)},_progress:function(){progress(this.element,!0)},_error:function(){progress(this.element,!1)},_element:function(){this.element.addClass("k-widget k-listview").attr("role","listbox")},refresh:function(e){var data,items,item,idx,length,that=this,view=that.dataSource.view(),html="",template=that.template,altTemplate=that.altTemplate,active=activeElement();if(e=e||{},"itemchange"===e.action)return void(that._hasBindingTarget()||that.editable||(data=e.items[0],item=that.items().filter("["+kendo.attr("uid")+"="+data.uid+"]"),item.length>0&&(idx=item.index(),that.angular("cleanup",function(){return{elements:[item]}}),item.replaceWith(template(data)),item=that.items().eq(idx),item.attr(kendo.attr("uid"),data.uid),that.angular("compile",function(){return{elements:[item],data:[{dataItem:data}]}}),that.trigger("itemChange",{item:item,data:data}))));if(!that.trigger(DATABINDING,{action:e.action||"rebind",items:e.items,index:e.index})){for(that._angularItems("cleanup"),that._destroyEditable(),idx=0,length=view.length;length>idx;idx++)html+=idx%2?altTemplate(view[idx]):template(view[idx]);for(that.element.html(html),items=that.items(),idx=0,length=view.length;length>idx;idx++)items.eq(idx).attr(kendo.attr("uid"),view[idx].uid).attr("role","option").attr("aria-selected","false");that.element[0]===active&&that.options.navigatable&&that.current(items.eq(0)),that._angularItems("compile"),that.trigger(DATABOUND)}},_pageable:function(){var settings,pagerId,that=this,pageable=that.options.pageable;$.isPlainObject(pageable)&&(pagerId=pageable.pagerId,settings=$.extend({},pageable,{dataSource:that.dataSource,pagerId:null}),that.pager=new kendo.ui.Pager($("#"+pagerId),settings))},_selectable:function(){var multi,current,that=this,selectable=that.options.selectable,navigatable=that.options.navigatable;selectable&&(multi=kendo.ui.Selectable.parseOptions(selectable).multiple,that.selectable=new kendo.ui.Selectable(that.element,{aria:!0,multiple:multi,filter:FOCUSSELECTOR,change:function(){that.trigger(CHANGE)}}),navigatable&&that.element.on("keydown"+NS,function(e){if(e.keyCode===keys.SPACEBAR){if(current=that.current(),e.target==e.currentTarget&&e.preventDefault(),multi)if(e.ctrlKey){if(current&&current.hasClass(SELECTED))return void current.removeClass(SELECTED)}else that.selectable.clear();else that.selectable.clear();that.selectable.value(current)}}))},current:function(candidate){var that=this,element=that.element,current=that._current,id=that._itemId;return candidate===undefined?current:(current&&current[0]&&(current[0].id===id&&current.removeAttr("id"),current.removeClass(FOCUSED),element.removeAttr("aria-activedescendant")),candidate&&candidate[0]&&(id=candidate[0].id||id,that._scrollTo(candidate[0]),element.attr("aria-activedescendant",id),candidate.addClass(FOCUSED).attr("id",id)),void(that._current=candidate))},_scrollTo:function(element){var container,that=this,UseJQueryoffset=!1,SCROLL="scroll";"auto"==that.wrapper.css("overflow")||that.wrapper.css("overflow")==SCROLL?container=that.wrapper[0]:(container=window,UseJQueryoffset=!0);var scrollDirectionFunc=function(direction,dimension){var elementOffset=UseJQueryoffset?$(element).offset()[direction.toLowerCase()]:element["offset"+direction],elementDimension=element["client"+dimension],containerScrollAmount=$(container)[SCROLL+direction](),containerDimension=$(container)[dimension.toLowerCase()]();elementOffset+elementDimension>containerScrollAmount+containerDimension?$(container)[SCROLL+direction](elementOffset+elementDimension-containerDimension):containerScrollAmount>elementOffset&&$(container)[SCROLL+direction](elementOffset)};scrollDirectionFunc("Top","Height"),scrollDirectionFunc("Left","Width")},_navigatable:function(){var that=this,navigatable=that.options.navigatable,element=that.element,clickCallback=function(e){that.current($(e.currentTarget)),$(e.target).is(":button,a,:input,a>.k-icon,textarea")||element.focus()};navigatable&&(that._tabindex(),element.on("focus"+NS,function(){var current=that._current;current&&current.is(":visible")||(current=that._item("first")),that.current(current)}).on("focusout"+NS,function(){that._current&&that._current.removeClass(FOCUSED)}).on("keydown"+NS,function(e){var idx,key=e.keyCode,current=that.current(),target=$(e.target),canHandle=!target.is(":button,textarea,a,a>.t-icon,input"),isTextBox=target.is(":text"),preventDefault=kendo.preventDefault,editItem=element.find("."+KEDITITEM),active=activeElement();if(!(!canHandle&&!isTextBox&&keys.ESC!=key||isTextBox&&keys.ESC!=key&&keys.ENTER!=key))if(keys.UP===key||keys.LEFT===key)current&&(current=current.prev()),that.current(current&&current[0]?current:that._item("last")),preventDefault(e);else if(keys.DOWN===key||keys.RIGHT===key)current&&(current=current.next()),that.current(current&&current[0]?current:that._item("first")),preventDefault(e);else if(keys.PAGEUP===key)that.current(null),that.dataSource.page(that.dataSource.page()-1),preventDefault(e);else if(keys.PAGEDOWN===key)that.current(null),that.dataSource.page(that.dataSource.page()+1),preventDefault(e);else if(keys.HOME===key)that.current(that._item("first")),preventDefault(e);else if(keys.END===key)that.current(that._item("last")),preventDefault(e);else if(keys.ENTER===key)if(0!==editItem.length&&(canHandle||isTextBox)){idx=that.items().index(editItem),active&&active.blur(),that.save();var focusAgain=function(){that.element.trigger("focus"),that.current(that.items().eq(idx))};that.one("dataBound",focusAgain)}else""!==that.options.editTemplate&&that.edit(current);else if(keys.ESC===key){if(editItem=element.find("."+KEDITITEM),0===editItem.length)return;idx=that.items().index(editItem),that.cancel(),that.element.trigger("focus"),that.current(that.items().eq(idx))}}),element.on("mousedown"+NS+" touchstart"+NS,FOCUSSELECTOR,proxy(clickCallback,that)))},clearSelection:function(){var that=this;that.selectable.clear(),that.trigger(CHANGE)},select:function(items){var that=this,selectable=that.selectable;return items=$(items),items.length?(selectable.options.multiple||(selectable.clear(),items=items.first()),void selectable.value(items)):selectable.value()},_destroyEditable:function(){var that=this;that.editable&&(that.editable.destroy(),delete that.editable)},_modelFromElement:function(element){var uid=element.attr(kendo.attr("uid"));return this.dataSource.getByUid(uid)},_closeEditable:function(validate){var data,item,index,that=this,editable=that.editable,template=that.template,valid=!0;return editable&&(validate&&(valid=editable.end()),valid&&(editable.element.index()%2&&(template=that.altTemplate),that.angular("cleanup",function(){return{elements:[editable.element]}}),data=that._modelFromElement(editable.element),that._destroyEditable(),index=editable.element.index(),editable.element.replaceWith(template(data)),item=that.items().eq(index),item.attr(kendo.attr("uid"),data.uid),that._hasBindingTarget()&&kendo.bind(item,data),that.angular("compile",function(){return{elements:[item],data:[{dataItem:data}]}}))),valid},edit:function(item){var container,index,that=this,data=that._modelFromElement(item),uid=data.uid;that.cancel(),item=that.items().filter("["+kendo.attr("uid")+"="+uid+"]"),index=item.index(),item.replaceWith(that.editTemplate(data)),container=that.items().eq(index).addClass(KEDITITEM).attr(kendo.attr("uid"),data.uid),that.editable=container.kendoEditable({model:data,clearContainer:!1,errorTemplate:!1,target:that}).data("kendoEditable"),that.trigger(EDIT,{model:data,item:container})},save:function(){var model,that=this,editable=that.editable;editable&&(editable=editable.element,model=that._modelFromElement(editable),!that.trigger(SAVE,{model:model,item:editable})&&that._closeEditable(!0)&&that.dataSource.sync())},remove:function(item){var that=this,dataSource=that.dataSource,data=that._modelFromElement(item);that.editable&&(dataSource.cancelChanges(that._modelFromElement(that.editable.element)),that._closeEditable(!1)),that.trigger(REMOVE,{model:data,item:item})||(item.hide(),dataSource.remove(data),dataSource.sync())},add:function(){var that=this,dataSource=that.dataSource,index=dataSource.indexOf((dataSource.view()||[])[0]);0>index&&(index=0),that.cancel(),dataSource.insert(index,{}),that.edit(that.element.children().first())},cancel:function(){var that=this,dataSource=that.dataSource;if(that.editable){var container=that.editable.element,model=that._modelFromElement(container);that.trigger(CANCEL,{model:model,container:container})||(dataSource.cancelChanges(model),that._closeEditable(!1))}},_crudHandlers:function(){var that=this,clickNS=CLICK+NS;that.element.on(clickNS,".k-edit-button",function(e){var item=$(this).closest("["+kendo.attr("uid")+"]");that.edit(item),e.preventDefault()}),that.element.on(clickNS,".k-delete-button",function(e){var item=$(this).closest("["+kendo.attr("uid")+"]");that.remove(item),e.preventDefault()}),that.element.on(clickNS,".k-update-button",function(e){that.save(),e.preventDefault()}),that.element.on(clickNS,".k-cancel-button",function(e){that.cancel(),e.preventDefault()})},destroy:function(){var that=this;Widget.fn.destroy.call(that),that._unbindDataSource(),that._destroyEditable(),that.element.off(NS),that.pager&&that.pager.destroy(),kendo.destroy(that.element)}});kendo.ui.plugin(ListView)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(_,f){f()}),function(f,define){define(["./kendo.core","./kendo.userevents"],f)}(function(){return function($,undefined){function buttonHtml(className,text){return'<span unselectable="on" class="k-link"><span unselectable="on" class="k-icon k-i-arrow-'+className+'" title="'+text+'">'+text+"</span></span>"}var kendo=window.kendo,caret=kendo.caret,keys=kendo.keys,ui=kendo.ui,Widget=ui.Widget,activeElement=kendo._activeElement,extractFormat=kendo._extractFormat,parse=kendo.parseFloat,placeholderSupported=kendo.support.placeholder,getCulture=kendo.getCulture,round=kendo._round,CHANGE="change",DISABLED="disabled",READONLY="readonly",INPUT="k-input",SPIN="spin",ns=".kendoNumericTextBox",TOUCHEND="touchend",MOUSELEAVE="mouseleave"+ns,HOVEREVENTS="mouseenter"+ns+" "+MOUSELEAVE,DEFAULT="k-state-default",FOCUSED="k-state-focused",HOVER="k-state-hover",FOCUS="focus",POINT=".",SELECTED="k-state-selected",STATEDISABLED="k-state-disabled",ARIA_DISABLED="aria-disabled",ARIA_READONLY="aria-readonly",INTEGER_REGEXP=/^(-)?(\d*)$/,NULL=null,proxy=$.proxy,extend=$.extend,NumericTextBox=Widget.extend({init:function(element,options){var min,max,step,value,disabled,that=this,isStep=options&&options.step!==undefined;Widget.fn.init.call(that,element,options),options=that.options,element=that.element.on("focusout"+ns,proxy(that._focusout,that)).attr("role","spinbutton"),options.placeholder=options.placeholder||element.attr("placeholder"),that._initialOptions=extend({},options),that._reset(),that._wrapper(),that._arrows(),that._input(),kendo.support.mobileOS?that._text.on(TOUCHEND+ns+" "+FOCUS+ns,function(e){that._toggleText(!1),element.focus()}):that._text.on(FOCUS+ns,proxy(that._click,that)),min=that.min(element.attr("min")),max=that.max(element.attr("max")),step=that._parse(element.attr("step")),options.min===NULL&&min!==NULL&&(options.min=min),options.max===NULL&&max!==NULL&&(options.max=max),isStep||step===NULL||(options.step=step),element.attr("aria-valuemin",options.min).attr("aria-valuemax",options.max),options.format=extractFormat(options.format),value=options.value,that.value(value!==NULL?value:element.val()),disabled=element.is("[disabled]")||$(that.element).parents("fieldset").is(":disabled"),disabled?that.enable(!1):that.readonly(element.is("[readonly]")),kendo.notify(that)},options:{name:"NumericTextBox",decimals:NULL,min:NULL,max:NULL,value:NULL,step:1,culture:"",format:"n",spinners:!0,placeholder:"",upArrowText:"Increase value",downArrowText:"Decrease value"},events:[CHANGE,SPIN],_editable:function(options){var that=this,element=that.element,disable=options.disable,readonly=options.readonly,text=that._text.add(element),wrapper=that._inputWrapper.off(HOVEREVENTS);that._toggleText(!0),that._upArrowEventHandler.unbind("press"),that._downArrowEventHandler.unbind("press"),element.off("keydown"+ns).off("keypress"+ns).off("paste"+ns),readonly||disable?(wrapper.addClass(disable?STATEDISABLED:DEFAULT).removeClass(disable?DEFAULT:STATEDISABLED),text.attr(DISABLED,disable).attr(READONLY,readonly).attr(ARIA_DISABLED,disable).attr(ARIA_READONLY,readonly)):(wrapper.addClass(DEFAULT).removeClass(STATEDISABLED).on(HOVEREVENTS,that._toggleHover),text.removeAttr(DISABLED).removeAttr(READONLY).attr(ARIA_DISABLED,!1).attr(ARIA_READONLY,!1),that._upArrowEventHandler.bind("press",function(e){e.preventDefault(),that._spin(1),that._upArrow.addClass(SELECTED)}),that._downArrowEventHandler.bind("press",function(e){e.preventDefault(),that._spin(-1),that._downArrow.addClass(SELECTED)}),that.element.on("keydown"+ns,proxy(that._keydown,that)).on("keypress"+ns,proxy(that._keypress,that)).on("paste"+ns,proxy(that._paste,that)))},readonly:function(readonly){this._editable({readonly:readonly===undefined?!0:readonly,disable:!1})},enable:function(enable){this._editable({readonly:!1,disable:!(enable=enable===undefined?!0:enable)})},destroy:function(){var that=this;that.element.add(that._text).add(that._upArrow).add(that._downArrow).add(that._inputWrapper).off(ns),that._upArrowEventHandler.destroy(),that._downArrowEventHandler.destroy(),that._form&&that._form.off("reset",that._resetHandler),Widget.fn.destroy.call(that)},min:function(value){return this._option("min",value)},max:function(value){return this._option("max",value)},step:function(value){return this._option("step",value)},value:function(value){var adjusted,that=this;return value===undefined?that._value:(value=that._parse(value),adjusted=that._adjust(value),void(value===adjusted&&(that._update(value),that._old=that._value)))},focus:function(){this._focusin()},_adjust:function(value){var that=this,options=that.options,min=options.min,max=options.max;return value===NULL?value:(min!==NULL&&min>value?value=min:max!==NULL&&value>max&&(value=max),value)},_arrows:function(){var arrows,that=this,_release=function(){clearTimeout(that._spinning),arrows.removeClass(SELECTED)},options=that.options,spinners=options.spinners,element=that.element;arrows=element.siblings(".k-icon"),arrows[0]||(arrows=$(buttonHtml("n",options.upArrowText)+buttonHtml("s",options.downArrowText)).insertAfter(element),arrows.wrapAll('<span class="k-select"/>')),spinners||(arrows.parent().toggle(spinners),that._inputWrapper.addClass("k-expand-padding")),that._upArrow=arrows.eq(0),that._upArrowEventHandler=new kendo.UserEvents(that._upArrow,{release:_release}),that._downArrow=arrows.eq(1),that._downArrowEventHandler=new kendo.UserEvents(that._downArrow,{release:_release})},_blur:function(){var that=this;that._toggleText(!0),that._change(that.element.val())},_click:function(e){var that=this;clearTimeout(that._focusing),that._focusing=setTimeout(function(){var result,groupRegExp,extractRegExp,input=e.target,idx=caret(input)[0],value=input.value.substring(0,idx),format=that._format(that.options.format),group=format[","],caretPosition=0;group&&(groupRegExp=new RegExp("\\"+group,"g"),extractRegExp=new RegExp("([\\d\\"+group+"]+)(\\"+format[POINT]+")?(\\d+)?")),extractRegExp&&(result=extractRegExp.exec(value)),result&&(caretPosition=result[0].replace(groupRegExp,"").length,-1!=value.indexOf("(")&&that._value<0&&caretPosition++),that._focusin(),caret(that.element[0],caretPosition)})},_change:function(value){var that=this;that._update(value),value=that._value,that._old!=value&&(that._old=value,that._typing||that.element.trigger(CHANGE),that.trigger(CHANGE)),that._typing=!1},_culture:function(culture){return culture||getCulture(this.options.culture)},_focusin:function(){var that=this;that._inputWrapper.addClass(FOCUSED),that._toggleText(!1),that.element[0].focus()},_focusout:function(){var that=this;clearTimeout(that._focusing),that._inputWrapper.removeClass(FOCUSED).removeClass(HOVER),that._blur()},_format:function(format,culture){var numberFormat=this._culture(culture).numberFormat;return format=format.toLowerCase(),format.indexOf("c")>-1?numberFormat=numberFormat.currency:format.indexOf("p")>-1&&(numberFormat=numberFormat.percent),numberFormat},_input:function(){var text,that=this,CLASSNAME="k-formatted-value",element=that.element.addClass(INPUT).show()[0],accessKey=element.accessKey,wrapper=that.wrapper;text=wrapper.find(POINT+CLASSNAME),text[0]||(text=$('<input type="text"/>').insertBefore(element).addClass(CLASSNAME));try{element.setAttribute("type","text")}catch(e){element.type="text"}text[0].tabIndex=element.tabIndex,text[0].style.cssText=element.style.cssText,text[0].title=element.title,text.prop("placeholder",that.options.placeholder),accessKey&&(text.attr("accesskey",accessKey),element.accessKey=""),that._text=text.addClass(element.className)},_keydown:function(e){var that=this,key=e.keyCode;that._key=key,key==keys.DOWN?that._step(-1):key==keys.UP?that._step(1):key==keys.ENTER?that._change(that.element.val()):that._typing=!0},_keypress:function(e){if(0!==e.which&&!e.metaKey&&!e.ctrlKey&&e.keyCode!==keys.BACKSPACE&&e.keyCode!==keys.ENTER){var isValid,that=this,min=that.options.min,element=that.element,selection=caret(element),selectionStart=selection[0],selectionEnd=selection[1],character=String.fromCharCode(e.which),numberFormat=that._format(that.options.format),isNumPadDecimal=that._key===keys.NUMPAD_DOT,value=element.val();isNumPadDecimal&&(character=numberFormat[POINT]),value=value.substring(0,selectionStart)+character+value.substring(selectionEnd),isValid=that._numericRegex(numberFormat).test(value),isValid&&isNumPadDecimal?(element.val(value),caret(element,selectionStart+character.length),e.preventDefault()):(null!==min&&min>=0&&"-"===value.charAt(0)||!isValid)&&e.preventDefault(),that._key=0}},_numericRegex:function(numberFormat){var that=this,separator=numberFormat[POINT],precision=that.options.decimals;return separator===POINT&&(separator="\\"+separator),precision===NULL&&(precision=numberFormat.decimals),0===precision?INTEGER_REGEXP:(that._separator!==separator&&(that._separator=separator,that._floatRegExp=new RegExp("^(-)?(((\\d+("+separator+"\\d*)?)|("+separator+"\\d*)))?$")),that._floatRegExp)},_paste:function(e){var that=this,element=e.target,value=element.value;setTimeout(function(){that._parse(element.value)===NULL&&that._update(value)})},_option:function(option,value){var that=this,options=that.options;return value===undefined?options[option]:(value=that._parse(value),void((value||"step"!==option)&&(options[option]=value,that.element.attr("aria-value"+option,value).attr(option,value))))},_spin:function(step,timeout){var that=this;timeout=timeout||500,clearTimeout(that._spinning),that._spinning=setTimeout(function(){that._spin(step,50)},timeout),that._step(step)},_step:function(step){var that=this,element=that.element,value=that._parse(element.val())||0;activeElement()!=element[0]&&that._focusin(),value+=that.options.step*step,that._update(that._adjust(value)),that._typing=!1,that.trigger(SPIN)},_toggleHover:function(e){$(e.currentTarget).toggleClass(HOVER,"mouseenter"===e.type)},_toggleText:function(toggle){var that=this;that._text.toggle(toggle),that.element.toggle(!toggle)},_parse:function(value,culture){return parse(value,this._culture(culture),this.options.format)},_update:function(value){var isNotNull,that=this,options=that.options,format=options.format,decimals=options.decimals,culture=that._culture(),numberFormat=that._format(format,culture);decimals===NULL&&(decimals=numberFormat.decimals),value=that._parse(value,culture),isNotNull=value!==NULL,isNotNull&&(value=parseFloat(round(value,decimals))),that._value=value=that._adjust(value),that._placeholder(kendo.toString(value,format,culture)),isNotNull?(value=value.toString(),-1!==value.indexOf("e")&&(value=round(+value,decimals)),value=value.replace(POINT,numberFormat[POINT])):value="",that.element.val(value).attr("aria-valuenow",value)},_placeholder:function(value){this._text.val(value),placeholderSupported||value||this._text.val(this.options.placeholder);
},_wrapper:function(){var wrapper,that=this,element=that.element,DOMElement=element[0];wrapper=element.parents(".k-numerictextbox"),wrapper.is("span.k-numerictextbox")||(wrapper=element.hide().wrap('<span class="k-numeric-wrap k-state-default" />').parent(),wrapper=wrapper.wrap("<span/>").parent()),wrapper[0].style.cssText=DOMElement.style.cssText,DOMElement.style.width="",that.wrapper=wrapper.addClass("k-widget k-numerictextbox").addClass(DOMElement.className).css("display",""),that._inputWrapper=$(wrapper[0].firstChild)},_reset:function(){var that=this,element=that.element,formId=element.attr("form"),form=formId?$("#"+formId):element.closest("form");form[0]&&(that._resetHandler=function(){setTimeout(function(){that.value(element[0].value),that.max(that._initialOptions.max),that.min(that._initialOptions.min)})},that._form=form.on("reset",that._resetHandler))}});ui.plugin(NumericTextBox)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(_,f){f()}),function(f,define){define(["./kendo.core"],f)}(function(){return function($,undefined){var kendo=window.kendo,caret=kendo.caret,keys=kendo.keys,ui=kendo.ui,Widget=ui.Widget,ns=".kendoMaskedTextBox",proxy=$.proxy,INPUT_EVENT_NAME=(kendo.support.propertyChangeEvent?"propertychange":"input")+ns,STATEDISABLED="k-state-disabled",DISABLED="disabled",READONLY="readonly",CHANGE="change",MaskedTextBox=Widget.extend({init:function(element,options){var DOMElement,that=this;Widget.fn.init.call(that,element,options),that._rules=$.extend({},that.rules,that.options.rules),element=that.element,DOMElement=element[0],that.wrapper=element,that._tokenize(),that._form(),that.element.addClass("k-textbox").attr("autocomplete","off").on("focus"+ns,function(){var value=DOMElement.value;value?that._togglePrompt(!0):DOMElement.value=that._old=that._emptyMask,that._oldValue=value,that._timeoutId=setTimeout(function(){caret(element,0,value?that._maskLength:0)})}).on("focusout"+ns,function(){var value=element.val();clearTimeout(that._timeoutId),DOMElement.value=that._old="",value!==that._emptyMask&&(DOMElement.value=that._old=value),that._change(),that._togglePrompt()});var disabled=element.is("[disabled]")||$(that.element).parents("fieldset").is(":disabled");disabled?that.enable(!1):that.readonly(element.is("[readonly]")),that.value(that.options.value||element.val()),kendo.notify(that)},options:{name:"MaskedTextBox",clearPromptChar:!1,unmaskOnPost:!1,promptChar:"_",culture:"",rules:{},value:"",mask:""},events:[CHANGE],rules:{0:/\d/,9:/\d|\s/,"#":/\d|\s|\+|\-/,L:/[a-zA-Z]/,"?":/[a-zA-Z]|\s/,"&":/\S/,C:/./,A:/[a-zA-Z0-9]/,a:/[a-zA-Z0-9]|\s/},setOptions:function(options){var that=this;Widget.fn.setOptions.call(that,options),that._rules=$.extend({},that.rules,that.options.rules),that._tokenize(),this._unbindInput(),this._bindInput(),that.value(that.element.val())},destroy:function(){var that=this;that.element.off(ns),that._formElement&&(that._formElement.off("reset",that._resetHandler),that._formElement.off("submit",that._submitHandler)),Widget.fn.destroy.call(that)},raw:function(){var unmasked=this._unmask(this.element.val(),0);return unmasked.replace(new RegExp(this.options.promptChar,"g"),"")},value:function(value){var element=this.element,emptyMask=this._emptyMask;this.options;return value===undefined?this.element.val():(null===value&&(value=""),emptyMask?(value=this._unmask(value+""),element.val(value?emptyMask:""),this._mask(0,this._maskLength,value),value=element.val(),this._oldValue=value,void(kendo._activeElement()!==element&&(value===emptyMask?element.val(""):this._togglePrompt()))):void element.val(value))},_togglePrompt:function(show){var DOMElement=this.element[0],value=DOMElement.value;this.options.clearPromptChar&&(value=show?this._oldValue:value.replace(new RegExp(this.options.promptChar,"g")," "),DOMElement.value=this._old=value)},readonly:function(readonly){this._editable({readonly:readonly===undefined?!0:readonly,disable:!1})},enable:function(enable){this._editable({readonly:!1,disable:!(enable=enable===undefined?!0:enable)})},_bindInput:function(){var that=this;that._maskLength&&that.element.on("keydown"+ns,proxy(that._keydown,that)).on("keypress"+ns,proxy(that._keypress,that)).on("paste"+ns,proxy(that._paste,that)).on(INPUT_EVENT_NAME,proxy(that._propertyChange,that))},_unbindInput:function(){this.element.off("keydown"+ns).off("keypress"+ns).off("paste"+ns).off(INPUT_EVENT_NAME)},_editable:function(options){var that=this,element=that.element,disable=options.disable,readonly=options.readonly;that._unbindInput(),readonly||disable?element.attr(DISABLED,disable).attr(READONLY,readonly).toggleClass(STATEDISABLED,disable):(element.removeAttr(DISABLED).removeAttr(READONLY).removeClass(STATEDISABLED),that._bindInput())},_change:function(){var that=this,value=that.value();value!==that._oldValue&&(that._oldValue=value,that.trigger(CHANGE),that.element.trigger(CHANGE))},_propertyChange:function(){var unmasked,start,that=this,element=that.element[0],value=element.value;kendo._activeElement()===element&&(value===that._old||that._pasting||(start=caret(element)[0],unmasked=that._unmask(value.substring(start),start),element.value=that._old=value.substring(0,start)+that._emptyMask.substring(start),that._mask(start,start,unmasked),caret(element,start)))},_paste:function(e){var that=this,element=e.target,position=caret(element),start=position[0],end=position[1],unmasked=that._unmask(element.value.substring(end),end);that._pasting=!0,setTimeout(function(){var value=element.value,pasted=value.substring(start,caret(element)[0]);element.value=that._old=value.substring(0,start)+that._emptyMask.substring(start),that._mask(start,start,pasted),start=caret(element)[0],that._mask(start,start,unmasked),caret(element,start),that._pasting=!1})},_form:function(){var that=this,element=that.element,formId=element.attr("form"),form=formId?$("#"+formId):element.closest("form");form[0]&&(that._resetHandler=function(){setTimeout(function(){that.value(element[0].value)})},that._submitHandler=function(){that.element[0].value=that._old=that.raw()},that.options.unmaskOnPost&&form.on("submit",that._submitHandler),that._formElement=form.on("reset",that._resetHandler))},_keydown:function(e){var placeholder,key=e.keyCode,element=this.element[0],selection=caret(element),start=selection[0],end=selection[1],backward=key===keys.BACKSPACE;backward||key===keys.DELETE?(start===end&&(backward?start-=1:end+=1,placeholder=this._find(start,backward)),placeholder!==undefined&&placeholder!==start?(backward&&(placeholder+=1),caret(element,placeholder)):start>-1&&this._mask(start,end,"",backward),e.preventDefault()):key===keys.ENTER&&this._change()},_keypress:function(e){if(0!==e.which&&!e.metaKey&&!e.ctrlKey&&e.keyCode!==keys.ENTER){var character=String.fromCharCode(e.which),selection=caret(this.element);this._mask(selection[0],selection[1],character),(e.keyCode===keys.BACKSPACE||character)&&e.preventDefault()}},_find:function(idx,backward){var value=this.element.val()||this._emptyMask,step=1;for(backward===!0&&(step=-1);idx>-1||idx<=this._maskLength;){if(value.charAt(idx)!==this.tokens[idx])return idx;idx+=step}return-1},_mask:function(start,end,value,backward){var valueLength,unmasked,chr,idx,element=this.element[0],current=element.value||this._emptyMask,empty=this.options.promptChar,chrIdx=0;for(start=this._find(start,backward),start>end&&(end=start),unmasked=this._unmask(current.substring(end),end),value=this._unmask(value,start),valueLength=value.length,value&&(unmasked=unmasked.replace(new RegExp("^_{0,"+valueLength+"}"),"")),value+=unmasked,current=current.split(""),chr=value.charAt(chrIdx);start<this._maskLength;)current[start]=chr||empty,chr=value.charAt(++chrIdx),idx===undefined&&chrIdx>valueLength&&(idx=start),start=this._find(start+1);element.value=this._old=current.join(""),kendo._activeElement()===element&&(idx===undefined&&(idx=this._maskLength),caret(element,idx))},_unmask:function(value,idx){if(!value)return"";value=(value+"").split("");for(var chr,token,chrIdx=0,tokenIdx=idx||0,empty=this.options.promptChar,valueLength=value.length,tokensLength=this.tokens.length,result="";tokensLength>tokenIdx&&(chr=value[chrIdx],token=this.tokens[tokenIdx],chr===token||chr===empty?(result+=chr===empty?empty:"",chrIdx+=1,tokenIdx+=1):"string"!=typeof token?((token.test&&token.test(chr)||$.isFunction(token)&&token(chr))&&(result+=chr,tokenIdx+=1),chrIdx+=1):tokenIdx+=1,!(chrIdx>=valueLength)););return result},_tokenize:function(){for(var chr,rule,tokens=[],tokenIdx=0,mask=this.options.mask||"",maskChars=mask.split(""),length=maskChars.length,idx=0,emptyMask="",promptChar=this.options.promptChar,numberFormat=kendo.getCulture(this.options.culture).numberFormat,rules=this._rules;length>idx;idx++)if(chr=maskChars[idx],rule=rules[chr])tokens[tokenIdx]=rule,emptyMask+=promptChar,tokenIdx+=1;else{"."===chr||","===chr?chr=numberFormat[chr]:"$"===chr?chr=numberFormat.currency.symbol:"\\"===chr&&(idx+=1,chr=maskChars[idx]),chr=chr.split("");for(var i=0,l=chr.length;l>i;i++)tokens[tokenIdx]=chr[i],emptyMask+=chr[i],tokenIdx+=1}this.tokens=tokens,this._emptyMask=emptyMask,this._maskLength=emptyMask.length}});ui.plugin(MaskedTextBox)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(_,f){f()}),function(f,define){define(["./kendo.datepicker","./kendo.numerictextbox","./kendo.validator","./kendo.binder"],f)}(function(){return function($,undefined){function fieldType(field){return field=null!=field?field:"",field.type||$.type(field)||"string"}function convertToValueBinding(container){container.find(":input:not(:button, ["+kendo.attr("role")+"=upload], ["+kendo.attr("skip")+"], [type=file]), select").each(function(){var bindAttr=kendo.attr("bind"),binding=this.getAttribute(bindAttr)||"",bindingName="checkbox"===this.type||"radio"===this.type?"checked:":"value:",fieldName=this.name;-1===binding.indexOf(bindingName)&&fieldName&&(binding+=(binding.length?",":"")+bindingName+fieldName,$(this).attr(bindAttr,binding))})}function createAttributes(options){var ruleName,rule,field=(options.model.fields||options.model)[options.field],type=fieldType(field),validation=field?field.validation:{},DATATYPE=kendo.attr("type"),BINDING=kendo.attr("bind"),attr={name:options.field};for(ruleName in validation)rule=validation[ruleName],inArray(ruleName,specialRules)>=0?attr[DATATYPE]=ruleName:isFunction(rule)||(attr[ruleName]=isPlainObject(rule)?rule.value||ruleName:rule),attr[kendo.attr(ruleName+"-msg")]=rule.message;return inArray(type,specialRules)>=0&&(attr[DATATYPE]=type),attr[BINDING]=("boolean"===type?"checked:":"value:")+options.field,attr}function convertItems(items){var idx,length,item,value,text,result;if(items&&items.length)for(result=[],idx=0,length=items.length;length>idx;idx++)item=items[idx],text=item.text||item.value||item,value=null==item.value?item.text||item:item.value,result[idx]={text:text,value:value};return result}function addValidationRules(modelField,rules){var rule,descriptor,validation=modelField?modelField.validation||{}:{};for(rule in validation)descriptor=validation[rule],isPlainObject(descriptor)&&descriptor.value&&(descriptor=descriptor.value),isFunction(descriptor)&&(rules[rule]=descriptor)}var kendo=window.kendo,ui=kendo.ui,Widget=ui.Widget,extend=$.extend,oldIE=kendo.support.browser.msie&&kendo.support.browser.version<9,isFunction=kendo.isFunction,isPlainObject=$.isPlainObject,inArray=$.inArray,nameSpecialCharRegExp=/("|\%|'|\[|\]|\$|\.|\,|\:|\;|\+|\*|\&|\!|\#|\(|\)|<|>|\=|\?|\@|\^|\{|\}|\~|\/|\||`)/g,ERRORTEMPLATE='<div class="k-widget k-tooltip k-tooltip-validation" style="margin:0.5em"><span class="k-icon k-warning"> </span>#=message#<div class="k-callout k-callout-n"></div></div>',CHANGE="change",specialRules=["url","email","number","date","boolean"],editors={number:function(container,options){var attr=createAttributes(options);$('<input type="text"/>').attr(attr).appendTo(container).kendoNumericTextBox({format:options.format}),$("<span "+kendo.attr("for")+'="'+options.field+'" class="k-invalid-msg"/>').hide().appendTo(container)},date:function(container,options){var attr=createAttributes(options),format=options.format;format&&(format=kendo._extractFormat(format)),attr[kendo.attr("format")]=format,$('<input type="text"/>').attr(attr).appendTo(container).kendoDatePicker({format:options.format}),$("<span "+kendo.attr("for")+'="'+options.field+'" class="k-invalid-msg"/>').hide().appendTo(container)},string:function(container,options){var attr=createAttributes(options);$('<input type="text" class="k-input k-textbox"/>').attr(attr).appendTo(container)},"boolean":function(container,options){var attr=createAttributes(options);$('<input type="checkbox" />').attr(attr).appendTo(container)},values:function(container,options){var attr=createAttributes(options);$("<select "+kendo.attr("text-field")+'="text"'+kendo.attr("value-field")+'="value"'+kendo.attr("source")+"='"+kendo.stringify(convertItems(options.values)).replace(/\'/g,"&apos;")+"'"+kendo.attr("role")+'="dropdownlist"/>').attr(attr).appendTo(container),$("<span "+kendo.attr("for")+'="'+options.field+'" class="k-invalid-msg"/>').hide().appendTo(container)}},Editable=Widget.extend({init:function(element,options){var that=this;options.target&&(options.$angular=options.target.options.$angular),Widget.fn.init.call(that,element,options),that._validateProxy=$.proxy(that._validate,that),that.refresh()},events:[CHANGE],options:{name:"Editable",editors:editors,clearContainer:!0,errorTemplate:ERRORTEMPLATE},editor:function(field,modelField){var that=this,editors=that.options.editors,isObject=isPlainObject(field),fieldName=isObject?field.field:field,model=that.options.model||{},isValuesEditor=isObject&&field.values,type=isValuesEditor?"values":fieldType(modelField),isCustomEditor=isObject&&field.editor,editor=isCustomEditor?field.editor:editors[type],container=that.element.find("["+kendo.attr("container-for")+"="+fieldName.replace(nameSpecialCharRegExp,"\\$1")+"]");editor=editor?editor:editors.string,isCustomEditor&&"string"==typeof field.editor&&(editor=function(container){container.append(field.editor)}),container=container.length?container:that.element,editor(container,extend(!0,{},isObject?field:{field:fieldName},{model:model}))},_validate:function(e){var input,that=this,value=e.value,preventChangeTrigger=that._validationEventInProgress,values={},bindAttribute=kendo.attr("bind"),fieldName=e.field.replace(nameSpecialCharRegExp,"\\$1"),bindingRegex=new RegExp("(value|checked)\\s*:\\s*"+fieldName+"\\s*(,|$)");values[e.field]=e.value,input=$(":input["+bindAttribute+'*="'+fieldName+'"]',that.element).filter("["+kendo.attr("validate")+"!='false']").filter(function(element){return bindingRegex.test($(this).attr(bindAttribute))}),input.length>1&&(input=input.filter(function(){var element=$(this);return!element.is(":radio")||element.val()==value}));try{that._validationEventInProgress=!0,(!that.validatable.validateInput(input)||!preventChangeTrigger&&that.trigger(CHANGE,{values:values}))&&e.preventDefault()}finally{that._validationEventInProgress=!1}},end:function(){return this.validatable.validate()},destroy:function(){var that=this;that.angular("cleanup",function(){return{elements:that.element}}),Widget.fn.destroy.call(that),that.options.model.unbind("set",that._validateProxy),kendo.unbind(that.element),that.validatable&&that.validatable.destroy(),kendo.destroy(that.element),that.element.removeData("kendoValidator")},refresh:function(){var idx,length,field,isObject,fieldName,modelField,modelFields,that=this,fields=that.options.fields||[],container=that.options.clearContainer?that.element.empty():that.element,model=that.options.model||{},rules={};for($.isArray(fields)||(fields=[fields]),idx=0,length=fields.length;length>idx;idx++)field=fields[idx],isObject=isPlainObject(field),fieldName=isObject?field.field:field,modelField=(model.fields||model)[fieldName],addValidationRules(modelField,rules),that.editor(field,modelField);if(that.options.target&&that.angular("compile",function(){return{elements:container,data:[{dataItem:model}]}}),!length){modelFields=model.fields||model;for(fieldName in modelFields)addValidationRules(modelFields[fieldName],rules)}convertToValueBinding(container),that.validatable&&that.validatable.destroy(),kendo.bind(container,that.options.model),that.options.model.unbind("set",that._validateProxy),that.options.model.bind("set",that._validateProxy),that.validatable=new kendo.ui.Validator(container,{validateOnBlur:!1,errorTemplate:that.options.errorTemplate||undefined,rules:rules});var focusable=container.find(":kendoFocusable").eq(0).focus();oldIE&&focusable.focus()}});ui.plugin(Editable)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(_,f){f()}),function(f,define){define(["./kendo.core"],f)}(function(){return function($,undefined){function updateArrow(items){items=$(items),items.children(LINKSELECTOR).children(".k-icon").remove(),items.filter(":has(.k-panel),:has(.k-content)").children(".k-link:not(:has([class*=k-i-arrow]))").each(function(){var item=$(this),parent=item.parent();item.append("<span class='k-icon "+(parent.hasClass(ACTIVECLASS)?"k-i-arrow-n k-panelbar-collapse":"k-i-arrow-s k-panelbar-expand")+"'/>")})}function updateFirstLast(items){items=$(items),items.filter(".k-first:not(:first-child)").removeClass(FIRST),items.filter(".k-last:not(:last-child)").removeClass(LAST),items.filter(":first-child").addClass(FIRST),items.filter(":last-child").addClass(LAST)}var kendo=window.kendo,ui=kendo.ui,keys=kendo.keys,extend=$.extend,each=$.each,template=kendo.template,Widget=ui.Widget,excludedNodesRegExp=/^(ul|a|div)$/i,NS=".kendoPanelBar",IMG="img",HREF="href",LAST="k-last",LINK="k-link",LINKSELECTOR="."+LINK,ERROR="error",ITEM=".k-item",GROUP=".k-group",VISIBLEGROUP=GROUP+":visible",IMAGE="k-image",FIRST="k-first",EXPAND="expand",SELECT="select",CONTENT="k-content",ACTIVATE="activate",COLLAPSE="collapse",MOUSEENTER="mouseenter",MOUSELEAVE="mouseleave",CONTENTLOAD="contentLoad",ACTIVECLASS="k-state-active",GROUPS="> .k-panel",CONTENTS="> .k-content",FOCUSEDCLASS="k-state-focused",DISABLEDCLASS="k-state-disabled",SELECTEDCLASS="k-state-selected",SELECTEDSELECTOR="."+SELECTEDCLASS,HIGHLIGHTCLASS="k-state-highlight",ACTIVEITEMSELECTOR=ITEM+":not(.k-state-disabled)",clickableItems="> "+ACTIVEITEMSELECTOR+" > "+LINKSELECTOR+", .k-panel > "+ACTIVEITEMSELECTOR+" > "+LINKSELECTOR,disabledItems=ITEM+".k-state-disabled > .k-link",selectableItems="> li > "+SELECTEDSELECTOR+", .k-panel > li > "+SELECTEDSELECTOR,defaultState="k-state-default",ARIA_DISABLED="aria-disabled",ARIA_EXPANDED="aria-expanded",ARIA_HIDDEN="aria-hidden",ARIA_SELECTED="aria-selected",VISIBLE=":visible",EMPTY=":empty",SINGLE="single",templates={content:template("<div role='region' class='k-content'#= contentAttributes(data) #>#= content(item) #</div>"),group:template("<ul role='group' aria-hidden='true' class='#= groupCssClass(group) #'#= groupAttributes(group) #>#= renderItems(data) #</ul>"),itemWrapper:template("<#= tag(item) # class='#= textClass(item, group) #' #= contentUrl(item) ##= textAttributes(item) #>#= image(item) ##= sprite(item) ##= text(item) ##= arrow(data) #</#= tag(item) #>"),item:template("<li role='menuitem' #=aria(item)#class='#= wrapperCssClass(group, item) #'>#= itemWrapper(data) ## if (item.items) { ##= subGroup({ items: item.items, panelBar: panelBar, group: { expanded: item.expanded } }) ## } else if (item.content || item.contentUrl) { ##= renderContent(data) ## } #</li>"),image:template("<img class='k-image' alt='' src='#= imageUrl #' />"),arrow:template("<span class='#= arrowClass(item) #'></span>"),sprite:template("<span class='k-sprite #= spriteCssClass #'></span>"),empty:template("")},rendering={aria:function(item){var attr="";return(item.items||item.content||item.contentUrl)&&(attr+=ARIA_EXPANDED+"='"+(item.expanded?"true":"false")+"' "),item.enabled===!1&&(attr+=ARIA_DISABLED+"='true'"),attr},wrapperCssClass:function(group,item){var result="k-item",index=item.index;return result+=item.enabled===!1?" "+DISABLEDCLASS:item.expanded===!0?" "+ACTIVECLASS:" k-state-default",0===index&&(result+=" k-first"),index==group.length-1&&(result+=" k-last"),item.cssClass&&(result+=" "+item.cssClass),result},textClass:function(item,group){var result=LINK;return group.firstLevel&&(result+=" k-header"),result},textAttributes:function(item){return item.url?" href='"+item.url+"'":""},arrowClass:function(item){var result="k-icon";return result+=item.expanded?" k-i-arrow-n k-panelbar-collapse":" k-i-arrow-s k-panelbar-expand"},text:function(item){return item.encoded===!1?item.text:kendo.htmlEncode(item.text)},tag:function(item){return item.url||item.contentUrl?"a":"span"},groupAttributes:function(group){return group.expanded!==!0?" style='display:none'":""},groupCssClass:function(){return"k-group k-panel"},contentAttributes:function(content){return content.item.expanded!==!0?" style='display:none'":""},content:function(item){return item.content?item.content:item.contentUrl?"":"&nbsp;"},contentUrl:function(item){return item.contentUrl?'href="'+item.contentUrl+'"':""}},PanelBar=Widget.extend({init:function(element,options){var content,that=this;Widget.fn.init.call(that,element,options),element=that.wrapper=that.element.addClass("k-widget k-reset k-header k-panelbar"),options=that.options,element[0].id&&(that._itemId=element[0].id+"_pb_active"),that._tabindex(),that._initData(options),that._updateClasses(),that._animations(options),element.on("click"+NS,clickableItems,function(e){that._click($(e.currentTarget))&&e.preventDefault()}).on(MOUSEENTER+NS+" "+MOUSELEAVE+NS,clickableItems,that._toggleHover).on("click"+NS,disabledItems,!1).on("keydown"+NS,$.proxy(that._keydown,that)).on("focus"+NS,function(){var item=that.select();that._current(item[0]?item:that._first())}).on("blur"+NS,function(){that._current(null)}).attr("role","menu"),content=element.find("li."+ACTIVECLASS+" > ."+CONTENT),content[0]&&that.expand(content.parent(),!1),kendo.notify(that)},events:[EXPAND,COLLAPSE,SELECT,ACTIVATE,ERROR,CONTENTLOAD],options:{name:"PanelBar",animation:{expand:{effects:"expand:vertical",duration:200},collapse:{duration:200}},expandMode:"multiple"},destroy:function(){Widget.fn.destroy.call(this),this.element.off(NS),kendo.destroy(this.element)},_initData:function(options){var that=this;options.dataSource&&(that.element.empty(),that.append(options.dataSource,that.element))},setOptions:function(options){var animation=this.options.animation;this._animations(options),options.animation=extend(!0,animation,options.animation),"dataSource"in options&&this._initData(options),Widget.fn.setOptions.call(this,options)},expand:function(element,useAnimation){var that=this,animBackup={};return useAnimation=useAnimation!==!1,element=this.element.find(element),element.each(function(index,item){item=$(item);var groups=item.find(GROUPS).add(item.find(CONTENTS));if(!item.hasClass(DISABLEDCLASS)&&groups.length>0){if(that.options.expandMode==SINGLE&&that._collapseAllExpanded(item))return that;element.find("."+HIGHLIGHTCLASS).removeClass(HIGHLIGHTCLASS),item.addClass(HIGHLIGHTCLASS),useAnimation||(animBackup=that.options.animation,that.options.animation={expand:{effects:{}},collapse:{hide:!0,effects:{}}}),that._triggerEvent(EXPAND,item)||that._toggleItem(item,!1),useAnimation||(that.options.animation=animBackup)}}),that},collapse:function(element,useAnimation){var that=this,animBackup={};return useAnimation=useAnimation!==!1,element=that.element.find(element),element.each(function(index,item){item=$(item);var groups=item.find(GROUPS).add(item.find(CONTENTS));!item.hasClass(DISABLEDCLASS)&&groups.is(VISIBLE)&&(item.removeClass(HIGHLIGHTCLASS),useAnimation||(animBackup=that.options.animation,that.options.animation={expand:{effects:{}},collapse:{hide:!0,effects:{}}}),that._triggerEvent(COLLAPSE,item)||that._toggleItem(item,!0),useAnimation||(that.options.animation=animBackup))}),that},_toggleDisabled:function(element,enable){element=this.element.find(element),element.toggleClass(defaultState,enable).toggleClass(DISABLEDCLASS,!enable).attr(ARIA_DISABLED,!enable)},select:function(element){var that=this;return element===undefined?that.element.find(selectableItems).parent():(element=that.element.find(element),element.length?element.each(function(){var item=$(this),link=item.children(LINKSELECTOR);return item.hasClass(DISABLEDCLASS)?that:void(that._triggerEvent(SELECT,item)||that._updateSelected(link))}):this._updateSelected(element),that)},clearSelection:function(){this.select($())},enable:function(element,state){return this._toggleDisabled(element,state!==!1),this},disable:function(element){return this._toggleDisabled(element,!1),this},append:function(item,referenceItem){referenceItem=this.element.find(referenceItem);var inserted=this._insert(item,referenceItem,referenceItem.length?referenceItem.find(GROUPS):null);return each(inserted.items,function(){inserted.group.append(this),updateFirstLast(this)}),updateArrow(referenceItem),updateFirstLast(inserted.group.find(".k-first, .k-last")),inserted.group.height("auto"),this},insertBefore:function(item,referenceItem){referenceItem=this.element.find(referenceItem);var inserted=this._insert(item,referenceItem,referenceItem.parent());return each(inserted.items,function(){referenceItem.before(this),updateFirstLast(this)}),updateFirstLast(referenceItem),inserted.group.height("auto"),this},insertAfter:function(item,referenceItem){referenceItem=this.element.find(referenceItem);var inserted=this._insert(item,referenceItem,referenceItem.parent());return each(inserted.items,function(){referenceItem.after(this),updateFirstLast(this)}),updateFirstLast(referenceItem),inserted.group.height("auto"),this},remove:function(element){element=this.element.find(element);var that=this,parent=element.parentsUntil(that.element,ITEM),group=element.parent("ul");return element.remove(),!group||group.hasClass("k-panelbar")||group.children(ITEM).length||group.remove(),parent.length&&(parent=parent.eq(0),updateArrow(parent),updateFirstLast(parent)),that},reload:function(element){var that=this;element=that.element.find(element),element.each(function(){var item=$(this);that._ajaxRequest(item,item.children("."+CONTENT),!item.is(VISIBLE))})},_first:function(){return this.element.children(ACTIVEITEMSELECTOR).first()},_last:function(){var item=this.element.children(ACTIVEITEMSELECTOR).last(),group=item.children(VISIBLEGROUP);return group[0]?group.children(ACTIVEITEMSELECTOR).last():item},_current:function(candidate){var that=this,focused=that._focused,id=that._itemId;return candidate===undefined?focused:(that.element.removeAttr("aria-activedescendant"),focused&&(focused[0].id===id&&focused.removeAttr("id"),focused.children(LINKSELECTOR).removeClass(FOCUSEDCLASS)),$(candidate).length&&(id=candidate[0].id||id,candidate.attr("id",id).children(LINKSELECTOR).addClass(FOCUSEDCLASS),that.element.attr("aria-activedescendant",id)),void(that._focused=candidate))},_keydown:function(e){var that=this,key=e.keyCode,current=that._current();e.target==e.currentTarget&&(key==keys.DOWN||key==keys.RIGHT?(that._current(that._nextItem(current)),e.preventDefault()):key==keys.UP||key==keys.LEFT?(that._current(that._prevItem(current)),e.preventDefault()):key==keys.ENTER||key==keys.SPACEBAR?(that._click(current.children(LINKSELECTOR)),e.preventDefault()):key==keys.HOME?(that._current(that._first()),e.preventDefault()):key==keys.END&&(that._current(that._last()),e.preventDefault()))},_nextItem:function(item){if(!item)return this._first();var group=item.children(VISIBLEGROUP),next=item.nextAll(":visible").first();return group[0]&&(next=group.children("."+FIRST)),next[0]||(next=item.parent(VISIBLEGROUP).parent(ITEM).next()),next[0]||(next=this._first()),next.hasClass(DISABLEDCLASS)&&(next=this._nextItem(next)),next},_prevItem:function(item){if(!item)return this._last();var result,prev=item.prevAll(":visible").first();if(prev[0])for(result=prev;result[0];)result=result.children(VISIBLEGROUP).children("."+LAST),result[0]&&(prev=result);else prev=item.parent(VISIBLEGROUP).parent(ITEM),prev[0]||(prev=this._last());return prev.hasClass(DISABLEDCLASS)&&(prev=this._prevItem(prev)),prev},_insert:function(item,referenceItem,parent){var items,groupData,that=this,plain=$.isPlainObject(item),isReferenceItem=referenceItem&&referenceItem[0];return isReferenceItem||(parent=that.element),groupData={firstLevel:parent.hasClass("k-panelbar"),expanded:parent.parent().hasClass(ACTIVECLASS),length:parent.children().length},isReferenceItem&&!parent.length&&(parent=$(PanelBar.renderGroup({group:groupData})).appendTo(referenceItem)),item instanceof kendo.Observable&&(item=item.toJSON()),plain||$.isArray(item)?(items=$.map(plain?[item]:item,function(value,idx){return $("string"==typeof value?value:PanelBar.renderItem({group:groupData,item:extend(value,{index:idx})}))}),isReferenceItem&&referenceItem.attr(ARIA_EXPANDED,!1)):(items="string"==typeof item&&"<"!=item.charAt(0)?that.element.find(item):$(item),that._updateItemsClasses(items)),{items:items,group:parent}},_toggleHover:function(e){var target=$(e.currentTarget);target.parents("li."+DISABLEDCLASS).length||target.toggleClass("k-state-hover",e.type==MOUSEENTER)},_updateClasses:function(){var panels,items,that=this;panels=that.element.find("li > ul").not(function(){return $(this).parentsUntil(".k-panelbar","div").length}).addClass("k-group k-panel").attr("role","group"),panels.parent().attr(ARIA_EXPANDED,!1).not("."+ACTIVECLASS).children("ul").attr(ARIA_HIDDEN,!0).hide(),items=that.element.add(panels).children(),that._updateItemsClasses(items),updateArrow(items),updateFirstLast(items)},_updateItemsClasses:function(items){for(var length=items.length,idx=0;length>idx;idx++)this._updateItemClasses(items[idx],idx)},_updateItemClasses:function(item,index){var wrapElement,link,selected=this._selected,contentUrls=this.options.contentUrls,url=contentUrls&&contentUrls[index],root=this.element[0];item=$(item).addClass("k-item").attr("role","menuitem"),kendo.support.browser.msie&&item.css("list-style-position","inside").css("list-style-position",""),item.children(IMG).addClass(IMAGE),link=item.children("a").addClass(LINK),link[0]&&(link.attr("href",url),link.children(IMG).addClass(IMAGE)),item.filter(":not([disabled]):not([class*=k-state])").addClass("k-state-default"),item.filter("li[disabled]").addClass("k-state-disabled").attr(ARIA_DISABLED,!0).removeAttr("disabled"),item.children("div").addClass(CONTENT).attr("role","region").attr(ARIA_HIDDEN,!0).hide().parent().attr(ARIA_EXPANDED,!1),link=item.children(SELECTEDSELECTOR),link[0]&&(selected&&selected.removeAttr(ARIA_SELECTED).children(SELECTEDSELECTOR).removeClass(SELECTEDCLASS),link.addClass(SELECTEDCLASS),this._selected=item.attr(ARIA_SELECTED,!0)),item.children(LINKSELECTOR)[0]||(wrapElement="<span class='"+LINK+"'/>",contentUrls&&contentUrls[index]&&item[0].parentNode==root&&(wrapElement='<a class="k-link k-header" href="'+contentUrls[index]+'"/>'),item.contents().filter(function(){return!(this.nodeName.match(excludedNodesRegExp)||3==this.nodeType&&!$.trim(this.nodeValue))}).wrapAll(wrapElement)),item.parent(".k-panelbar")[0]&&item.children(LINKSELECTOR).addClass("k-header")},_click:function(target){var prevent,contents,href,isAnchor,that=this,element=that.element;if(!target.parents("li."+DISABLEDCLASS).length&&target.closest(".k-widget")[0]==element[0]){var link=target.closest(LINKSELECTOR),item=link.closest(ITEM);if(that._updateSelected(link),contents=item.find(GROUPS).add(item.find(CONTENTS)),href=link.attr(HREF),isAnchor=href&&("#"==href.charAt(href.length-1)||-1!=href.indexOf("#"+that.element[0].id+"-")),prevent=!(!isAnchor&&!contents.length),contents.data("animating"))return prevent;if(that._triggerEvent(SELECT,item)&&(prevent=!0),prevent!==!1){if(that.options.expandMode==SINGLE&&that._collapseAllExpanded(item))return prevent;if(contents.length){var visibility=contents.is(VISIBLE);
that._triggerEvent(visibility?COLLAPSE:EXPAND,item)||(prevent=that._toggleItem(item,visibility))}return prevent}}},_toggleItem:function(element,isVisible){var prevent,content,that=this,childGroup=element.find(GROUPS),link=element.find(LINKSELECTOR),url=link.attr(HREF);return childGroup.length?(this._toggleGroup(childGroup,isVisible),prevent=!0):(content=element.children("."+CONTENT),content.length&&(prevent=!0,content.is(EMPTY)&&url!==undefined?that._ajaxRequest(element,content,isVisible):that._toggleGroup(content,isVisible))),prevent},_toggleGroup:function(element,visibility){var that=this,animationSettings=that.options.animation,animation=animationSettings.expand,collapse=extend({},animationSettings.collapse),hasCollapseAnimation=collapse&&"effects"in collapse;element.is(VISIBLE)==visibility&&(element.parent().attr(ARIA_EXPANDED,!visibility).attr(ARIA_HIDDEN,visibility).toggleClass(ACTIVECLASS,!visibility).find("> .k-link > .k-icon").toggleClass("k-i-arrow-n",!visibility).toggleClass("k-panelbar-collapse",!visibility).toggleClass("k-i-arrow-s",visibility).toggleClass("k-panelbar-expand",visibility),animation=visibility?extend(hasCollapseAnimation?collapse:extend({reverse:!0},animation),{hide:!0}):extend({complete:function(element){that._triggerEvent(ACTIVATE,element.closest(ITEM))}},animation),element.kendoStop(!0,!0).kendoAnimate(animation))},_collapseAllExpanded:function(item){var children,that=this,stopExpand=!1,groups=item.find(GROUPS).add(item.find(CONTENTS));return groups.is(VISIBLE)&&(stopExpand=!0),groups.is(VISIBLE)||0===groups.length||(children=item.siblings(),children.find(GROUPS).add(children.find(CONTENTS)).filter(function(){return $(this).is(VISIBLE)}).each(function(index,content){content=$(content),stopExpand=that._triggerEvent(COLLAPSE,content.closest(ITEM)),stopExpand||that._toggleGroup(content,!0)})),stopExpand},_ajaxRequest:function(element,contentElement,isVisible){var that=this,statusIcon=element.find(".k-panelbar-collapse, .k-panelbar-expand"),link=element.find(LINKSELECTOR),loadingIconTimeout=setTimeout(function(){statusIcon.addClass("k-loading")},100),data={},url=link.attr(HREF);$.ajax({type:"GET",cache:!1,url:url,dataType:"html",data:data,error:function(xhr,status){statusIcon.removeClass("k-loading"),that.trigger(ERROR,{xhr:xhr,status:status})&&this.complete()},complete:function(){clearTimeout(loadingIconTimeout),statusIcon.removeClass("k-loading")},success:function(data){function getElements(){return{elements:contentElement.get()}}try{that.angular("cleanup",getElements),contentElement.html(data),that.angular("compile",getElements)}catch(e){var console=window.console;console&&console.error&&console.error(e.name+": "+e.message+" in "+url),this.error(this.xhr,"error")}that._toggleGroup(contentElement,isVisible),that.trigger(CONTENTLOAD,{item:element[0],contentElement:contentElement[0]})}})},_triggerEvent:function(eventName,element){var that=this;return that.trigger(eventName,{item:element[0]})},_updateSelected:function(link){var that=this,element=that.element,item=link.parent(ITEM),selected=that._selected;selected&&selected.removeAttr(ARIA_SELECTED),that._selected=item.attr(ARIA_SELECTED,!0),element.find(selectableItems).removeClass(SELECTEDCLASS),element.find("> ."+HIGHLIGHTCLASS+", .k-panel > ."+HIGHLIGHTCLASS).removeClass(HIGHLIGHTCLASS),link.addClass(SELECTEDCLASS),link.parentsUntil(element,ITEM).filter(":has(.k-header)").addClass(HIGHLIGHTCLASS),that._current(item[0]?item:null)},_animations:function(options){options&&"animation"in options&&!options.animation&&(options.animation={expand:{effects:{}},collapse:{hide:!0,effects:{}}})}});extend(PanelBar,{renderItem:function(options){options=extend({panelBar:{},group:{}},options);var empty=templates.empty,item=options.item;return templates.item(extend(options,{image:item.imageUrl?templates.image:empty,sprite:item.spriteCssClass?templates.sprite:empty,itemWrapper:templates.itemWrapper,renderContent:PanelBar.renderContent,arrow:item.items||item.content||item.contentUrl?templates.arrow:empty,subGroup:PanelBar.renderGroup},rendering))},renderGroup:function(options){return templates.group(extend({renderItems:function(options){for(var html="",i=0,items=options.items,len=items?items.length:0,group=extend({length:len},options.group);len>i;i++)html+=PanelBar.renderItem(extend(options,{group:group,item:extend({index:i},items[i])}));return html}},options,rendering))},renderContent:function(options){return templates.content(extend(options,rendering))}}),kendo.ui.plugin(PanelBar)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(_,f){f()}),function(f,define){define(["./kendo.popup"],f)}(function(){return function($,undefined){function setTime(date,time,ignoreDST){var offsetDiff,offset=date.getTimezoneOffset();date.setTime(date.getTime()+time),ignoreDST||(offsetDiff=date.getTimezoneOffset()-offset,date.setTime(date.getTime()+offsetDiff*MS_PER_MINUTE))}function dst(){var today=new DATE,midnight=new DATE(today.getFullYear(),today.getMonth(),today.getDate(),0,0,0),noon=new DATE(today.getFullYear(),today.getMonth(),today.getDate(),12,0,0);return-1*(midnight.getTimezoneOffset()-noon.getTimezoneOffset())}function getMilliseconds(date){return 60*date.getHours()*MS_PER_MINUTE+date.getMinutes()*MS_PER_MINUTE+1e3*date.getSeconds()+date.getMilliseconds()}function isInRange(value,min,max){var msValue,msMin=getMilliseconds(min),msMax=getMilliseconds(max);return value&&msMin!=msMax?(msValue=getMilliseconds(value),msMin>msValue&&(msValue+=MS_PER_DAY),msMin>msMax&&(msMax+=MS_PER_DAY),msValue>=msMin&&msMax>=msValue):!0}function normalize(options){var parseFormats=options.parseFormats;options.format=extractFormat(options.format||kendo.getCulture(options.culture).calendars.standard.patterns.t),parseFormats=isArray(parseFormats)?parseFormats:[parseFormats],parseFormats.splice(0,0,options.format),options.parseFormats=parseFormats}function preventDefault(e){e.preventDefault()}var kendo=window.kendo,keys=kendo.keys,parse=kendo.parseDate,activeElement=kendo._activeElement,extractFormat=kendo._extractFormat,support=kendo.support,browser=support.browser,ui=kendo.ui,Widget=ui.Widget,OPEN="open",CLOSE="close",CHANGE="change",ns=".kendoTimePicker",CLICK="click"+ns,DEFAULT="k-state-default",DISABLED="disabled",READONLY="readonly",LI="li",SPAN="<span/>",FOCUSED="k-state-focused",HOVER="k-state-hover",HOVEREVENTS="mouseenter"+ns+" mouseleave"+ns,MOUSEDOWN="mousedown"+ns,MS_PER_MINUTE=6e4,MS_PER_DAY=864e5,SELECTED="k-state-selected",STATEDISABLED="k-state-disabled",ARIA_SELECTED="aria-selected",ARIA_EXPANDED="aria-expanded",ARIA_HIDDEN="aria-hidden",ARIA_DISABLED="aria-disabled",ARIA_READONLY="aria-readonly",ARIA_ACTIVEDESCENDANT="aria-activedescendant",ID="id",isArray=$.isArray,extend=$.extend,proxy=$.proxy,DATE=Date,TODAY=new DATE;TODAY=new DATE(TODAY.getFullYear(),TODAY.getMonth(),TODAY.getDate(),0,0,0);var TimeView=function(options){var that=this,id=options.id;that.options=options,that.ul=$('<ul tabindex="-1" role="listbox" aria-hidden="true" unselectable="on" class="k-list k-reset"/>').css({overflow:support.kineticScrollNeeded?"":"auto"}).on(CLICK,LI,proxy(that._click,that)).on("mouseenter"+ns,LI,function(){$(this).addClass(HOVER)}).on("mouseleave"+ns,LI,function(){$(this).removeClass(HOVER)}),that.list=$("<div class='k-list-container'/>").append(that.ul).on(MOUSEDOWN,preventDefault),id&&(that._timeViewID=id+"_timeview",that._optionID=id+"_option_selected",that.ul.attr(ID,that._timeViewID)),that._popup(),that._heightHandler=proxy(that._height,that),that.template=kendo.template('<li tabindex="-1" role="option" class="k-item" unselectable="on">#=data#</li>',{useWithBlock:!1})};TimeView.prototype={current:function(candidate){var that=this,active=that.options.active;return candidate===undefined?that._current:(that._current&&that._current.removeClass(SELECTED).removeAttr(ARIA_SELECTED).removeAttr(ID),candidate&&(candidate=$(candidate).addClass(SELECTED).attr(ID,that._optionID).attr(ARIA_SELECTED,!0),that.scroll(candidate[0])),that._current=candidate,active&&active(candidate),void 0)},close:function(){this.popup.close()},destroy:function(){var that=this;that.ul.off(ns),that.list.off(ns),that._touchScroller&&that._touchScroller.destroy(),that.popup.destroy()},open:function(){var that=this;that.ul[0].firstChild||that.bind(),that.popup.open(),that._current&&that.scroll(that._current[0])},dataBind:function(dates){for(var date,that=this,options=that.options,format=options.format,toString=kendo.toString,template=that.template,length=dates.length,idx=0,html="";length>idx;idx++)date=dates[idx],isInRange(date,options.min,options.max)&&(html+=template(toString(date,format,options.culture)));that._html(html)},refresh:function(){var msStart,lastIdx,length,that=this,options=that.options,format=options.format,offset=dst(),ignoreDST=0>offset,min=options.min,max=options.max,msMin=getMilliseconds(min),msMax=getMilliseconds(max),msInterval=options.interval*MS_PER_MINUTE,toString=kendo.toString,template=that.template,start=new DATE(+min),startDay=start.getDate(),idx=0,html="";for(length=ignoreDST?(MS_PER_DAY+offset*MS_PER_MINUTE)/msInterval:MS_PER_DAY/msInterval,msMin!=msMax&&(msMin>msMax&&(msMax+=MS_PER_DAY),length=(msMax-msMin)/msInterval+1),lastIdx=parseInt(length,10);length>idx;idx++)idx&&setTime(start,msInterval,ignoreDST),msMax&&lastIdx==idx&&(msStart=getMilliseconds(start),startDay<start.getDate()&&(msStart+=MS_PER_DAY),msStart>msMax&&(start=new DATE(+max))),html+=template(toString(start,format,options.culture));that._html(html)},bind:function(){var that=this,dates=that.options.dates;dates&&dates[0]?that.dataBind(dates):that.refresh()},_html:function(html){var that=this;that.ul[0].innerHTML=html,that.popup.unbind(OPEN,that._heightHandler),that.popup.one(OPEN,that._heightHandler),that.current(null),that.select(that._value)},scroll:function(item){if(item){var elementHeight,ul=this.ul[0],itemOffsetTop=item.offsetTop,itemOffsetHeight=item.offsetHeight,ulScrollTop=ul.scrollTop,ulOffsetHeight=ul.clientHeight,bottomDistance=itemOffsetTop+itemOffsetHeight,touchScroller=this._touchScroller;touchScroller?(elementHeight=this.list.height(),itemOffsetTop>elementHeight&&(itemOffsetTop=itemOffsetTop-elementHeight+itemOffsetHeight),touchScroller.scrollTo(0,-itemOffsetTop)):ul.scrollTop=ulScrollTop>itemOffsetTop?itemOffsetTop:bottomDistance>ulScrollTop+ulOffsetHeight?bottomDistance-ulOffsetHeight:ulScrollTop}},select:function(li){var that=this,options=that.options,current=that._current;li instanceof Date&&(li=kendo.toString(li,options.format,options.culture)),"string"==typeof li&&(current&&current.text()===li?li=current:(li=$.grep(that.ul[0].childNodes,function(node){return(node.textContent||node.innerText)==li}),li=li[0]?li:null)),that.current(li)},setOptions:function(options){var old=this.options;options.min=parse(options.min),options.max=parse(options.max),this.options=extend(old,options,{active:old.active,change:old.change,close:old.close,open:old.open}),this.bind()},toggle:function(){var that=this;that.popup.visible()?that.close():that.open()},value:function(value){var that=this;that._value=value,that.ul[0].firstChild&&that.select(value)},_click:function(e){var that=this,li=$(e.currentTarget),date=li.text(),dates=that.options.dates;dates&&dates.length>0&&(date=dates[li.index()]),e.isDefaultPrevented()||(that.select(li),that.options.change(date,!0),that.close())},_height:function(){var that=this,list=that.list,parent=list.parent(".k-animation-container"),height=that.options.height;that.ul[0].children.length&&list.add(parent).show().height(that.ul[0].scrollHeight>height?height:"auto").hide()},_parse:function(value){var that=this,options=that.options,current=that._value||TODAY;return value instanceof DATE?value:(value=parse(value,options.parseFormats,options.culture),value&&(value=new DATE(current.getFullYear(),current.getMonth(),current.getDate(),value.getHours(),value.getMinutes(),value.getSeconds(),value.getMilliseconds())),value)},_adjustListWidth:function(){var computedStyle,computedWidth,list=this.list,width=list[0].style.width,wrapper=this.options.anchor;!list.data("width")&&width||(computedStyle=window.getComputedStyle?window.getComputedStyle(wrapper[0],null):0,computedWidth=computedStyle?parseFloat(computedStyle.width):wrapper.outerWidth(),computedStyle&&(browser.mozilla||browser.msie)&&(computedWidth+=parseFloat(computedStyle.paddingLeft)+parseFloat(computedStyle.paddingRight)+parseFloat(computedStyle.borderLeftWidth)+parseFloat(computedStyle.borderRightWidth)),width=computedWidth-(list.outerWidth()-list.width()),list.css({fontFamily:wrapper.css("font-family"),width:width}).data("width",width))},_popup:function(){var that=this,list=that.list,options=that.options,anchor=options.anchor;that.popup=new ui.Popup(list,extend(options.popup,{anchor:anchor,open:options.open,close:options.close,animation:options.animation,isRtl:support.isRtl(options.anchor)})),that._touchScroller=kendo.touchScroller(that.popup.element)},move:function(e){var that=this,key=e.keyCode,ul=that.ul[0],current=that._current,down=key===keys.DOWN;if(key===keys.UP||down){if(e.altKey)return void that.toggle(down);current=down?current?current[0].nextSibling:ul.firstChild:current?current[0].previousSibling:ul.lastChild,current&&that.select(current),that.options.change(that._current.text()),e.preventDefault()}else key!==keys.ENTER&&key!==keys.TAB&&key!==keys.ESC||(e.preventDefault(),current&&that.options.change(current.text(),!0),that.close())}},TimeView.getMilliseconds=getMilliseconds,kendo.TimeView=TimeView;var TimePicker=Widget.extend({init:function(element,options){var ul,timeView,disabled,that=this;Widget.fn.init.call(that,element,options),element=that.element,options=that.options,options.min=parse(element.attr("min"))||parse(options.min),options.max=parse(element.attr("max"))||parse(options.max),normalize(options),that._initialOptions=extend({},options),that._wrapper(),that.timeView=timeView=new TimeView(extend({},options,{id:element.attr(ID),anchor:that.wrapper,format:options.format,change:function(value,trigger){trigger?that._change(value):element.val(value)},open:function(e){that.timeView._adjustListWidth(),that.trigger(OPEN)?e.preventDefault():(element.attr(ARIA_EXPANDED,!0),ul.attr(ARIA_HIDDEN,!1))},close:function(e){that.trigger(CLOSE)?e.preventDefault():(element.attr(ARIA_EXPANDED,!1),ul.attr(ARIA_HIDDEN,!0))},active:function(current){element.removeAttr(ARIA_ACTIVEDESCENDANT),current&&element.attr(ARIA_ACTIVEDESCENDANT,timeView._optionID)}})),ul=timeView.ul,that._icon(),that._reset();try{element[0].setAttribute("type","text")}catch(e){element[0].type="text"}element.addClass("k-input").attr({role:"combobox","aria-expanded":!1,"aria-owns":timeView._timeViewID}),disabled=element.is("[disabled]")||$(that.element).parents("fieldset").is(":disabled"),disabled?that.enable(!1):that.readonly(element.is("[readonly]")),that._old=that._update(options.value||that.element.val()),that._oldText=element.val(),kendo.notify(that)},options:{name:"TimePicker",min:TODAY,max:TODAY,format:"",dates:[],parseFormats:[],value:null,interval:30,height:200,animation:{}},events:[OPEN,CLOSE,CHANGE],setOptions:function(options){var that=this,value=that._value;Widget.fn.setOptions.call(that,options),options=that.options,normalize(options),that.timeView.setOptions(options),value&&that.element.val(kendo.toString(value,options.format,options.culture))},dataBind:function(dates){isArray(dates)&&this.timeView.dataBind(dates)},_editable:function(options){var that=this,disable=options.disable,readonly=options.readonly,arrow=that._arrow.off(ns),element=that.element.off(ns),wrapper=that._inputWrapper.off(ns);readonly||disable?(wrapper.addClass(disable?STATEDISABLED:DEFAULT).removeClass(disable?DEFAULT:STATEDISABLED),element.attr(DISABLED,disable).attr(READONLY,readonly).attr(ARIA_DISABLED,disable).attr(ARIA_READONLY,readonly)):(wrapper.addClass(DEFAULT).removeClass(STATEDISABLED).on(HOVEREVENTS,that._toggleHover),element.removeAttr(DISABLED).removeAttr(READONLY).attr(ARIA_DISABLED,!1).attr(ARIA_READONLY,!1).on("keydown"+ns,proxy(that._keydown,that)).on("focusout"+ns,proxy(that._blur,that)).on("focus"+ns,function(){that._inputWrapper.addClass(FOCUSED)}),arrow.on(CLICK,proxy(that._click,that)).on(MOUSEDOWN,preventDefault))},readonly:function(readonly){this._editable({readonly:readonly===undefined?!0:readonly,disable:!1})},enable:function(enable){this._editable({readonly:!1,disable:!(enable=enable===undefined?!0:enable)})},destroy:function(){var that=this;Widget.fn.destroy.call(that),that.timeView.destroy(),that.element.off(ns),that._arrow.off(ns),that._inputWrapper.off(ns),that._form&&that._form.off("reset",that._resetHandler)},close:function(){this.timeView.close()},open:function(){this.timeView.open()},min:function(value){return this._option("min",value)},max:function(value){return this._option("max",value)},value:function(value){var that=this;return value===undefined?that._value:(that._old=that._update(value),null===that._old&&that.element.val(""),void(that._oldText=that.element.val()))},_blur:function(){var that=this,value=that.element.val();that.close(),value!==that._oldText&&that._change(value),that._inputWrapper.removeClass(FOCUSED)},_click:function(){var that=this,element=that.element;that.timeView.toggle(),support.touch||element[0]===activeElement()||element.focus()},_change:function(value){var that=this;value=that._update(value),+that._old!=+value&&(that._old=value,that._oldText=that.element.val(),that._typing||that.element.trigger(CHANGE),that.trigger(CHANGE)),that._typing=!1},_icon:function(){var arrow,that=this,element=that.element;arrow=element.next("span.k-select"),arrow[0]||(arrow=$('<span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-clock">select</span></span>').insertAfter(element)),that._arrow=arrow.attr({role:"button","aria-controls":that.timeView._timeViewID})},_keydown:function(e){var that=this,key=e.keyCode,timeView=that.timeView,value=that.element.val();timeView.popup.visible()||e.altKey?timeView.move(e):key===keys.ENTER&&value!==that._oldText?that._change(value):that._typing=!0},_option:function(option,value){var that=this,options=that.options;return value===undefined?options[option]:(value=that.timeView._parse(value),void(value&&(value=new DATE(+value),options[option]=value,that.timeView.options[option]=value,that.timeView.bind())))},_toggleHover:function(e){$(e.currentTarget).toggleClass(HOVER,"mouseenter"===e.type)},_update:function(value){var that=this,options=that.options,timeView=that.timeView,date=timeView._parse(value);return isInRange(date,options.min,options.max)||(date=null),that._value=date,that.element.val(date?kendo.toString(date,options.format,options.culture):value),timeView.value(date),date},_wrapper:function(){var wrapper,that=this,element=that.element;wrapper=element.parents(".k-timepicker"),wrapper[0]||(wrapper=element.wrap(SPAN).parent().addClass("k-picker-wrap k-state-default"),wrapper=wrapper.wrap(SPAN).parent()),wrapper[0].style.cssText=element[0].style.cssText,that.wrapper=wrapper.addClass("k-widget k-timepicker k-header").addClass(element[0].className),element.css({width:"100%",height:element[0].style.height}),that._inputWrapper=$(wrapper[0].firstChild)},_reset:function(){var that=this,element=that.element,formId=element.attr("form"),form=formId?$("#"+formId):element.closest("form");form[0]&&(that._resetHandler=function(){that.value(element[0].defaultValue),that.max(that._initialOptions.max),that.min(that._initialOptions.min)},that._form=form.on("reset",that._resetHandler))}});ui.plugin(TimePicker)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(_,f){f()}),function(f,define){define(["./kendo.datepicker","./kendo.timepicker"],f)}(function(){return function($,undefined){function lastTimeOption(interval){var date=new Date(2100,0,1);return date.setMinutes(-interval),date}function preventDefault(e){e.preventDefault()}function normalize(options){var timeFormat,patterns=kendo.getCulture(options.culture).calendars.standard.patterns,parseFormats=!options.parseFormats.length;options.format=extractFormat(options.format||patterns.g),options.timeFormat=timeFormat=extractFormat(options.timeFormat||patterns.t),kendo.DateView.normalize(options),parseFormats&&options.parseFormats.push("yyyy-MM-ddTHH:mm:ss"),-1===$.inArray(timeFormat,options.parseFormats)&&options.parseFormats.splice(1,0,timeFormat)}var kendo=window.kendo,TimeView=kendo.TimeView,parse=kendo.parseDate,activeElement=kendo._activeElement,extractFormat=kendo._extractFormat,calendar=kendo.calendar,isInRange=calendar.isInRange,restrictValue=calendar.restrictValue,isEqualDatePart=calendar.isEqualDatePart,getMilliseconds=TimeView.getMilliseconds,ui=kendo.ui,Widget=ui.Widget,OPEN="open",CLOSE="close",CHANGE="change",ns=".kendoDateTimePicker",CLICK="click"+ns,DISABLED="disabled",READONLY="readonly",DEFAULT="k-state-default",FOCUSED="k-state-focused",HOVER="k-state-hover",STATEDISABLED="k-state-disabled",HOVEREVENTS="mouseenter"+ns+" mouseleave"+ns,MOUSEDOWN="mousedown"+ns,MONTH="month",SPAN="<span/>",ARIA_ACTIVEDESCENDANT="aria-activedescendant",ARIA_EXPANDED="aria-expanded",ARIA_HIDDEN="aria-hidden",ARIA_OWNS="aria-owns",ARIA_DISABLED="aria-disabled",ARIA_READONLY="aria-readonly",DATE=Date,MIN=new DATE(1800,0,1),MAX=new DATE(2099,11,31),dateViewParams={view:"date"},timeViewParams={view:"time"},extend=$.extend,DateTimePicker=Widget.extend({init:function(element,options){var disabled,that=this;Widget.fn.init.call(that,element,options),element=that.element,options=that.options,options.min=parse(element.attr("min"))||parse(options.min),options.max=parse(element.attr("max"))||parse(options.max),normalize(options),that._initialOptions=extend({},options),that._wrapper(),that._views(),that._icons(),that._reset(),that._template();try{element[0].setAttribute("type","text")}catch(e){element[0].type="text"}element.addClass("k-input").attr({role:"combobox","aria-expanded":!1}),that._midnight=that._calculateMidnight(options.min,options.max),disabled=element.is("[disabled]")||$(that.element).parents("fieldset").is(":disabled"),disabled?that.enable(!1):that.readonly(element.is("[readonly]")),that._old=that._update(options.value||that.element.val()),that._oldText=element.val(),kendo.notify(that)},options:{name:"DateTimePicker",value:null,format:"",timeFormat:"",culture:"",parseFormats:[],dates:[],min:new DATE(MIN),max:new DATE(MAX),interval:30,height:200,footer:"",start:MONTH,depth:MONTH,animation:{},month:{},ARIATemplate:'Current focused date is #=kendo.toString(data.current, "d")#'},events:[OPEN,CLOSE,CHANGE],setOptions:function(options){var min,max,currentValue,that=this,value=that._value;that.dateView.options,that.timeView.options;Widget.fn.setOptions.call(that,options),options=that.options,options.min=min=parse(options.min),options.max=max=parse(options.max),normalize(options),that._midnight=that._calculateMidnight(options.min,options.max),currentValue=options.value||that._value||that.dateView._current,min&&!isEqualDatePart(min,currentValue)&&(min=new DATE(MIN)),max&&!isEqualDatePart(max,currentValue)&&(max=new DATE(MAX)),that.dateView.setOptions(options),that.timeView.setOptions(extend({},options,{format:options.timeFormat,min:min,max:max})),value&&(that.element.val(kendo.toString(value,options.format,options.culture)),that._updateARIA(value))},_editable:function(options){var that=this,element=that.element.off(ns),dateIcon=that._dateIcon.off(ns),timeIcon=that._timeIcon.off(ns),wrapper=that._inputWrapper.off(ns),readonly=options.readonly,disable=options.disable;readonly||disable?(wrapper.addClass(disable?STATEDISABLED:DEFAULT).removeClass(disable?DEFAULT:STATEDISABLED),element.attr(DISABLED,disable).attr(READONLY,readonly).attr(ARIA_DISABLED,disable).attr(ARIA_READONLY,readonly)):(wrapper.addClass(DEFAULT).removeClass(STATEDISABLED).on(HOVEREVENTS,that._toggleHover),element.removeAttr(DISABLED).removeAttr(READONLY).attr(ARIA_DISABLED,!1).attr(ARIA_READONLY,!1).on("keydown"+ns,$.proxy(that._keydown,that)).on("focus"+ns,function(){that._inputWrapper.addClass(FOCUSED)}).on("focusout"+ns,function(){that._inputWrapper.removeClass(FOCUSED),element.val()!==that._oldText&&that._change(element.val()),that.close("date"),that.close("time")}),dateIcon.on(MOUSEDOWN,preventDefault).on(CLICK,function(){that.toggle("date"),kendo.support.touch||element[0]===activeElement()||element.focus()}),timeIcon.on(MOUSEDOWN,preventDefault).on(CLICK,function(){that.toggle("time"),kendo.support.touch||element[0]===activeElement()||element.focus()}))},readonly:function(readonly){this._editable({readonly:readonly===undefined?!0:readonly,disable:!1})},enable:function(enable){this._editable({readonly:!1,disable:!(enable=enable===undefined?!0:enable)})},destroy:function(){var that=this;Widget.fn.destroy.call(that),that.dateView.destroy(),that.timeView.destroy(),that.element.off(ns),that._dateIcon.off(ns),that._timeIcon.off(ns),that._inputWrapper.off(ns),that._form&&that._form.off("reset",that._resetHandler)},close:function(view){"time"!==view&&(view="date"),this[view+"View"].close()},open:function(view){"time"!==view&&(view="date"),this[view+"View"].open()},min:function(value){return this._option("min",value)},max:function(value){return this._option("max",value)},toggle:function(view){var secondView="timeView";"time"!==view?view="date":secondView="dateView",this[view+"View"].toggle(),this[secondView].close()},value:function(value){var that=this;return value===undefined?that._value:(that._old=that._update(value),null===that._old&&that.element.val(""),void(that._oldText=that.element.val()))},_change:function(value){var that=this;value=that._update(value),+that._old!=+value&&(that._old=value,that._oldText=that.element.val(),that.trigger(CHANGE),that._typing||that.element.trigger(CHANGE))},_option:function(option,value){var minDateEqual,maxDateEqual,that=this,options=that.options,timeView=that.timeView,timeViewOptions=timeView.options,current=that._value||that._old;if(value===undefined)return options[option];if(value=parse(value,options.parseFormats,options.culture)){if(options.min.getTime()===options.max.getTime()&&(timeViewOptions.dates=[]),options[option]=new DATE(value.getTime()),that.dateView[option](value),that._midnight=that._calculateMidnight(options.min,options.max),current&&(minDateEqual=isEqualDatePart(options.min,current),maxDateEqual=isEqualDatePart(options.max,current)),minDateEqual||maxDateEqual){if(timeViewOptions[option]=value,minDateEqual&&!maxDateEqual&&(timeViewOptions.max=lastTimeOption(options.interval)),maxDateEqual){if(that._midnight)return void timeView.dataBind([MAX]);minDateEqual||(timeViewOptions.min=MIN)}}else timeViewOptions.max=MAX,timeViewOptions.min=MIN;timeView.bind()}},_toggleHover:function(e){$(e.currentTarget).toggleClass(HOVER,"mouseenter"===e.type)},_update:function(value){var rebind,timeViewOptions,old,skip,formattedValue,that=this,options=that.options,min=options.min,max=options.max,dates=options.dates,timeView=that.timeView,current=that._value,date=parse(value,options.parseFormats,options.culture),isSameType=null===date&&null===current||date instanceof Date&&current instanceof Date;return+date===+current&&isSameType?(formattedValue=kendo.toString(date,options.format,options.culture),formattedValue!==value&&that.element.val(null===date?value:formattedValue),date):(null!==date&&isEqualDatePart(date,min)?date=restrictValue(date,min,max):isInRange(date,min,max)||(date=null),that._value=date,timeView.value(date),that.dateView.value(date),date&&(old=that._old,timeViewOptions=timeView.options,dates[0]&&(dates=$.grep(dates,function(d){return isEqualDatePart(date,d)}),dates[0]&&(timeView.dataBind(dates),skip=!0)),skip||(isEqualDatePart(date,min)&&(timeViewOptions.min=min,timeViewOptions.max=lastTimeOption(options.interval),rebind=!0),isEqualDatePart(date,max)&&(that._midnight?(timeView.dataBind([MAX]),skip=!0):(timeViewOptions.max=max,rebind||(timeViewOptions.min=MIN),rebind=!0))),!skip&&(!old&&rebind||old&&!isEqualDatePart(old,date))&&(rebind||(timeViewOptions.max=MAX,timeViewOptions.min=MIN),timeView.bind())),that.element.val(date?kendo.toString(date,options.format,options.culture):value),that._updateARIA(date),date)},_keydown:function(e){var that=this,dateView=that.dateView,timeView=that.timeView,value=that.element.val(),isDateViewVisible=dateView.popup.visible();e.altKey&&e.keyCode===kendo.keys.DOWN?that.toggle(isDateViewVisible?"time":"date"):isDateViewVisible?(dateView.move(e),that._updateARIA(dateView._current)):timeView.popup.visible()?timeView.move(e):e.keyCode===kendo.keys.ENTER&&value!==that._oldText?that._change(value):that._typing=!0},_views:function(){var dateView,timeView,div,ul,msMin,date,that=this,element=that.element,options=that.options,id=element.attr("id");that.dateView=dateView=new kendo.DateView(extend({},options,{id:id,anchor:that.wrapper,change:function(){var current,value=dateView.calendar.value(),msValue=+value,msMin=+options.min,msMax=+options.max;msValue!==msMin&&msValue!==msMax||(current=new DATE(+that._value),current.setFullYear(value.getFullYear(),value.getMonth(),value.getDate()),isInRange(current,msMin,msMax)&&(value=current)),that._change(value),that.close("date")},close:function(e){that.trigger(CLOSE,dateViewParams)?e.preventDefault():(element.attr(ARIA_EXPANDED,!1),div.attr(ARIA_HIDDEN,!0),timeView.popup.visible()||element.removeAttr(ARIA_OWNS))},open:function(e){that.trigger(OPEN,dateViewParams)?e.preventDefault():(element.val()!==that._oldText&&(date=parse(element.val(),options.parseFormats,options.culture),that.dateView[date?"current":"value"](date)),div.attr(ARIA_HIDDEN,!1),element.attr(ARIA_EXPANDED,!0).attr(ARIA_OWNS,dateView._dateViewID),that._updateARIA(date))}})),div=dateView.div,msMin=options.min.getTime(),that.timeView=timeView=new TimeView({id:id,value:options.value,anchor:that.wrapper,animation:options.animation,format:options.timeFormat,culture:options.culture,height:options.height,interval:options.interval,min:new DATE(MIN),max:new DATE(MAX),dates:msMin===options.max.getTime()?[new Date(msMin)]:[],parseFormats:options.parseFormats,change:function(value,trigger){value=timeView._parse(value),value<options.min?(value=new DATE(+options.min),timeView.options.min=value):value>options.max&&(value=new DATE(+options.max),timeView.options.max=value),trigger?(that._timeSelected=!0,that._change(value)):(element.val(kendo.toString(value,options.format,options.culture)),dateView.value(value),that._updateARIA(value))},close:function(e){that.trigger(CLOSE,timeViewParams)?e.preventDefault():(ul.attr(ARIA_HIDDEN,!0),element.attr(ARIA_EXPANDED,!1),dateView.popup.visible()||element.removeAttr(ARIA_OWNS))},open:function(e){timeView._adjustListWidth(),that.trigger(OPEN,timeViewParams)?e.preventDefault():(element.val()!==that._oldText&&(date=parse(element.val(),options.parseFormats,options.culture),that.timeView.value(date)),ul.attr(ARIA_HIDDEN,!1),element.attr(ARIA_EXPANDED,!0).attr(ARIA_OWNS,timeView._timeViewID),timeView.options.active(timeView.current()))},active:function(current){element.removeAttr(ARIA_ACTIVEDESCENDANT),current&&element.attr(ARIA_ACTIVEDESCENDANT,timeView._optionID)}}),ul=timeView.ul},_icons:function(){var icons,that=this,element=that.element;icons=element.next("span.k-select"),icons[0]||(icons=$('<span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-calendar">select</span><span unselectable="on" class="k-icon k-i-clock">select</span></span>').insertAfter(element)),icons=icons.children(),that._dateIcon=icons.eq(0).attr({role:"button","aria-controls":that.dateView._dateViewID}),that._timeIcon=icons.eq(1).attr({role:"button","aria-controls":that.timeView._timeViewID})},_wrapper:function(){var wrapper,that=this,element=that.element;wrapper=element.parents(".k-datetimepicker"),wrapper[0]||(wrapper=element.wrap(SPAN).parent().addClass("k-picker-wrap k-state-default"),wrapper=wrapper.wrap(SPAN).parent()),
wrapper[0].style.cssText=element[0].style.cssText,element.css({width:"100%",height:element[0].style.height}),that.wrapper=wrapper.addClass("k-widget k-datetimepicker k-header").addClass(element[0].className),that._inputWrapper=$(wrapper[0].firstChild)},_reset:function(){var that=this,element=that.element,formId=element.attr("form"),form=formId?$("#"+formId):element.closest("form");form[0]&&(that._resetHandler=function(){that.value(element[0].defaultValue),that.max(that._initialOptions.max),that.min(that._initialOptions.min)},that._form=form.on("reset",that._resetHandler))},_template:function(){this._ariaTemplate=kendo.template(this.options.ARIATemplate)},_calculateMidnight:function(min,max){return getMilliseconds(min)+getMilliseconds(max)===0},_updateARIA:function(date){var cell,that=this,calendar=that.dateView.calendar;that.element.removeAttr(ARIA_ACTIVEDESCENDANT),calendar&&(cell=calendar._cell,cell.attr("aria-label",that._ariaTemplate({current:date||calendar.current()})),that.element.attr(ARIA_ACTIVEDESCENDANT,cell.attr("id")))}});ui.plugin(DateTimePicker)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(_,f){f()}),function(f,define){define(["./kendo.data"],f)}(function(){return function($,undefined){function lastFrom(array){return array[array.length-1]}function toArray(value){return value instanceof Array?value:[value]}function isPrimitive(dataItem){return"string"==typeof dataItem||"number"==typeof dataItem||"boolean"==typeof dataItem}function getItemCount(screenHeight,listScreens,itemHeight){return Math.ceil(screenHeight*listScreens/itemHeight)}function appendChild(parent,className,tagName){var element=document.createElement(tagName||"div");return className&&(element.className=className),parent.appendChild(element),element}function getDefaultItemHeight(){var lineHeight,mockList=$('<div class="k-popup"><ul class="k-list"><li class="k-item"><li></ul></div>');return mockList.css({position:"absolute",left:"-200000px",visibility:"hidden"}),mockList.appendTo(document.body),lineHeight=parseFloat(kendo.getComputedStyles(mockList.find(".k-item")[0],["line-height"])["line-height"]),mockList.remove(),lineHeight}function bufferSizes(screenHeight,listScreens,opposite){return{down:screenHeight*opposite,up:screenHeight*(listScreens-1-opposite)}}function listValidator(options,screenHeight){var downThreshold=(options.listScreens-1-options.threshold)*screenHeight,upThreshold=options.threshold*screenHeight;return function(list,scrollTop,lastScrollTop){return scrollTop>lastScrollTop?scrollTop-list.top<downThreshold:0===list.top||scrollTop-list.top>upThreshold}}function scrollCallback(element,callback){return function(force){return callback(element.scrollTop,force)}}function syncList(reorder){return function(list,force){return reorder(list.items,list.index,force),list}}function position(element,y){kendo.support.browser.msie&&kendo.support.browser.version<10?element.style.top=y+"px":(element.style.webkitTransform="translateY("+y+"px)",element.style.transform="translateY("+y+"px)")}function map2(callback,templates){return function(arr1,arr2){for(var i=0,len=arr1.length;len>i;i++)callback(arr1[i],arr2[i],templates),arr2[i].item&&(this.trigger(ITEMCHANGE,{item:$(arr1[i]),data:arr2[i].item,ns:kendo.ui}),arr2[i].index===this._selectedIndex&&this.select(this._selectedIndex))}}function reshift(items,diff){var range;return diff>0?(range=items.splice(0,diff),items.push.apply(items,range)):(range=items.splice(diff,-diff),items.unshift.apply(items,range)),range}function render(element,data,templates){var itemTemplate=templates.template;element=$(element),data.item||(itemTemplate=templates.placeholderTemplate),this.angular("cleanup",function(){return{elements:[element]}}),element.attr("data-uid",data.item?data.item.uid:"").attr("data-offset-index",data.index).html(itemTemplate(data.item||{})),element.toggleClass(FOCUSED,data.current),element.toggleClass(SELECTED,data.selected),element.toggleClass("k-first",data.newGroup),element.toggleClass("k-loading-item",!data.item),0!==data.index&&data.newGroup&&$("<div class="+GROUPITEM+"></div>").appendTo(element).html(templates.groupTemplate({group:data.group})),data.top!==undefined&&position(element[0],data.top),this.angular("compile",function(){return{elements:[element],data:[{dataItem:data.item,group:data.group,newGroup:data.newGroup}]}})}function findChangedItems(selected,changed){var dataItem,i,j,changedLength=changed.length,result=[];for(i=0;i<selected.length;i++)for(dataItem=selected[i],j=0;changedLength>j;j++)dataItem===changed[j]&&result.push({index:i,item:dataItem});return result}var kendo=window.kendo,ui=kendo.ui,Widget=ui.Widget,DataBoundWidget=ui.DataBoundWidget,proxy=$.proxy,WRAPPER="k-virtual-wrap",VIRTUALLIST="k-virtual-list",CONTENT="k-virtual-content",LIST="k-list",HEADER="k-group-header",VIRTUALITEM="k-virtual-item",ITEM="k-item",HEIGHTCONTAINER="k-height-container",GROUPITEM="k-group",SELECTED="k-state-selected",FOCUSED="k-state-focused",HOVER="k-state-hover",CHANGE="change",CLICK="click",LISTBOUND="listBound",ITEMCHANGE="itemChange",ACTIVATE="activate",DEACTIVATE="deactivate",VIRTUAL_LIST_NS=".VirtualList",VirtualList=DataBoundWidget.extend({init:function(element,options){var that=this;that._listCreated=!1,that._fetching=!1,that._filter=!1,Widget.fn.init.call(that,element,options),that.options.itemHeight||(that.options.itemHeight=getDefaultItemHeight()),options=that.options,that.element.addClass(LIST+" "+VIRTUALLIST).attr("role","listbox"),that.content=that.element.wrap("<div unselectable='on' class='"+CONTENT+"'></div>").parent(),that.wrapper=that.content.wrap("<div class='"+WRAPPER+"'></div>").parent(),that.header=that.content.before("<div class='"+HEADER+"'></div>").prev(),that.element.on("mouseenter"+VIRTUAL_LIST_NS,"li:not(.k-loading-item)",function(){$(this).addClass(HOVER)}).on("mouseleave"+VIRTUAL_LIST_NS,"li",function(){$(this).removeClass(HOVER)}),that._values=toArray(that.options.value),that._selectedDataItems=[],that._selectedIndexes=[],that._rangesList={},that._activeDeferred=null,that._promisesList=[],that._optionID=kendo.guid(),that.setDataSource(options.dataSource),that.content.on("scroll"+VIRTUAL_LIST_NS,kendo.throttle(function(){that._renderItems()},options.delay)),that._selectable()},options:{name:"VirtualList",autoBind:!0,delay:100,height:null,listScreens:4,threshold:.5,itemHeight:null,oppositeBuffer:1,type:"flat",selectable:!1,value:[],dataValueField:null,template:"#:data#",placeholderTemplate:"loading...",groupTemplate:"#:group#",fixedGroupTemplate:"fixed header template",valueMapper:null},events:[CHANGE,CLICK,LISTBOUND,ITEMCHANGE,ACTIVATE,DEACTIVATE],setOptions:function(options){Widget.fn.setOptions.call(this,options),this._selectProxy&&this.options.selectable===!1?this.element.off(CLICK,"."+VIRTUALITEM,this._selectProxy):!this._selectProxy&&this.options.selectable&&this._selectable(),this.refresh()},items:function(){return $(this._items)},destroy:function(){this.wrapper.off(VIRTUAL_LIST_NS),this.dataSource.unbind(CHANGE,this._refreshHandler),Widget.fn.destroy.call(this)},setDataSource:function(source){var value,that=this,dataSource=source||{};dataSource=$.isArray(dataSource)?{data:dataSource}:dataSource,dataSource=kendo.data.DataSource.create(dataSource),that.dataSource?(that.dataSource.unbind(CHANGE,that._refreshHandler),that.dataSource.unbind(CHANGE,that._rangeChangeHandler),value=that.value(),that.value([]),that.mute(function(){that.value(value)})):(that._refreshHandler=$.proxy(that.refresh,that),that._rangeChangeHandler=$.proxy(that.rangeChange,that)),that.dataSource=dataSource.bind(CHANGE,that._refreshHandler).bind(CHANGE,that._rangeChangeHandler),0!==that.dataSource.view().length?that.refresh():that.options.autoBind&&that.dataSource.fetch()},rangeChange:function(){var that=this,page=that.dataSource.page();that.isBound()&&that._rangeChange===!0&&that._lastPage!==page&&(that._lastPage=page,that.trigger(LISTBOUND))},refresh:function(e){var changedItems,that=this,action=e&&e.action;that._mute||(that._fetching?that._renderItems&&that._renderItems(!0):(that._filter&&that.focus(0),that._createList(),action||!that._values.length||that._filter?(that._lastPage=that.dataSource.page(),that._listCreated=!0,that.trigger(LISTBOUND)):that.value(that._values,!0).done(function(){that._lastPage=that.dataSource.page(),that._listCreated=!0,that.trigger(LISTBOUND)})),"itemchange"===action&&(changedItems=findChangedItems(that._selectedDataItems,e.items),changedItems.length&&that.trigger("selectedItemChange",{items:changedItems})),that._fetching=!1)},removeAt:function(position){return this._selectedIndexes.splice(position,1),this._values.splice(position,1),{position:position,dataItem:this._selectedDataItems.splice(position,1)[0]}},setValue:function(value){this._values=toArray(value)},value:function(value,_forcePrefetch){var that=this;that.dataSource;return value===undefined?that._values.slice():(value=toArray(value),"multiple"===that.options.selectable&&that.select().length&&value.length&&that.select(-1),that._valueDeferred&&"resolved"!==that._valueDeferred.state()||(that._valueDeferred=$.Deferred()),value.length||that.select(-1),that._values=value,(that.isBound()&&!that._mute||_forcePrefetch)&&that._prefetchByValue(value),that._valueDeferred)},_prefetchByValue:function(value){for(var item,that=this,dataView=that._dataView,valueGetter=that._valueGetter,match=!1,forSelection=[],i=0;i<value.length;i++)for(var idx=0;idx<dataView.length;idx++)item=dataView[idx].item,item&&(match=isPrimitive(item)?value[i]===item:value[i]===valueGetter(item),match&&forSelection.push(idx));if(forSelection.length===value.length)return that._values=[],void that.select(forSelection);if("function"!=typeof that.options.valueMapper)throw new Error("valueMapper is not provided");that.options.valueMapper({value:"multiple"===this.options.selectable?value:value[0],success:function(indexes){that._values=[],that._selectedIndexes=[],that._selectedDataItems=[],indexes=toArray(indexes),indexes.length||(indexes=[-1]),that.select(indexes)}})},deferredRange:function(index){var dataSource=this.dataSource,take=this.itemCount,ranges=this._rangesList,result=$.Deferred(),defs=[],low=Math.floor(index/take)*take,high=Math.ceil(index/take)*take,pages=high===low?[high]:[low,high];return $.each(pages,function(_,skip){var deferred,end=skip+take,existingRange=ranges[skip];existingRange&&existingRange.end===end?deferred=existingRange.deferred:(deferred=$.Deferred(),ranges[skip]={end:end,deferred:deferred},dataSource._multiplePrefetch(skip,take,function(){deferred.resolve()})),defs.push(deferred)}),$.when.apply($,defs).then(function(){result.resolve()}),result},prefetch:function(indexes){var that=this,take=this.itemCount,isEmptyList=(this.dataSource,!that._promisesList.length);return that._activeDeferred||(that._activeDeferred=$.Deferred(),that._promisesList=[]),$.each(indexes,function(_,index){var rangeStart=Math.floor(index/take)*take;that._promisesList.push(that.deferredRange(rangeStart))}),isEmptyList&&$.when.apply($,that._promisesList).done(function(){that._activeDeferred.resolve(),that._activeDeferred=null,that._promisesList=[]}),that._activeDeferred},_findDataItem:function(index){var group,view=this.dataSource.view();if("group"===this.options.type)for(var i=0;i<view.length;i++){if(group=view[i].items,!(group.length<=index))return group[index];index-=group.length}return view[index]},selectedDataItems:function(){return this._selectedDataItems.slice()},scrollTo:function(y){this.content.scrollTop(y)},scrollToIndex:function(index){this.scrollTo(index*this.options.itemHeight)},focus:function(candidate){var element,index,data,current,itemHeight=(this.dataSource,this.options.itemHeight),id=this._optionID,triggerEvent=!0;if(candidate===undefined)return current=this.element.find("."+FOCUSED),current.length?current:null;if("function"==typeof candidate){data=this.dataSource.flatView();for(var idx=0;idx<data.length;idx++)if(candidate(data[idx])){candidate=idx;break}}if(candidate instanceof Array&&(candidate=lastFrom(candidate)),isNaN(candidate)?(element=$(candidate),index=parseInt($(element).attr("data-offset-index"),10)):(index=candidate,element=this._getElementByIndex(index)),-1===index)return this.element.find("."+FOCUSED).removeClass(FOCUSED),void(this._focusedIndex=undefined);if(element.length){element.hasClass(FOCUSED)&&(triggerEvent=!1),this._focusedIndex!==undefined&&(current=this._getElementByIndex(this._focusedIndex),current.removeClass(FOCUSED).removeAttr("id"),triggerEvent&&this.trigger(DEACTIVATE)),this._focusedIndex=index,element.addClass(FOCUSED).attr("id",id);var position=this._getElementLocation(index);"top"===position?this.scrollTo(index*itemHeight):"bottom"===position?this.scrollTo(index*itemHeight+itemHeight-this.screenHeight):"outScreen"===position&&this.scrollTo(index*itemHeight),triggerEvent&&this.trigger(ACTIVATE)}else this._focusedIndex=index,this.items().removeClass(FOCUSED),this.scrollToIndex(index)},focusIndex:function(){return this._focusedIndex},first:function(){this.scrollTo(0),this.focus(0)},last:function(){var lastIndex=this.dataSource.total();this.scrollTo(this.heightContainer.offsetHeight),this.focus(lastIndex)},prev:function(){var current,index=this._focusedIndex;return!isNaN(index)&&index>0?(index-=1,this.focus(index),current=this.focus(),current&&current.hasClass("k-loading-item")&&(index+=1,this.focus(index)),index):void 0},next:function(){var current,index=this._focusedIndex,lastIndex=this.dataSource.total()-1;return!isNaN(index)&&lastIndex>index?(index+=1,this.focus(index),current=this.focus(),current&&current.hasClass("k-loading-item")&&(index-=1,this.focus(index)),index):void 0},select:function(candidate){var indices,deferred,that=this,singleSelection="multiple"!==that.options.selectable,prefetchStarted=!!that._activeDeferred,removed=[];if(candidate===undefined)return that._selectedIndexes.slice();if(indices=that._getIndecies(candidate),(!that._filter||singleSelection||!that._deselectFiltered(indices))&&indices.length&&(!singleSelection||that._filter||lastFrom(indices)!==lastFrom(this._selectedIndexes))){removed=that._deselect(indices),singleSelection&&(that._activeDeferred=null,prefetchStarted=!1,indices.length&&(indices=[lastFrom(indices)]));var done=function(){var added=that._select(indices);that.focus(indices),(added.length||removed.length)&&that.trigger(CHANGE,{added:added,removed:removed}),that._valueDeferred&&that._valueDeferred.resolve()};deferred=that.prefetch(indices),prefetchStarted||(deferred?deferred.done(done):done())}},isBound:function(){return this._listCreated},mute:function(callback){this._mute=!0,proxy(callback(),this),this._mute=!1},filter:function(filter){return filter===undefined?this._filter:(this._filter=filter,void(this._rangeChange=!0))},skipUpdate:$.noop,_getElementByIndex:function(index){return this.items().filter(function(idx,element){return index===parseInt($(element).attr("data-offset-index"),10)})},_clean:function(){this.result=undefined,this._lastScrollTop=undefined,this._lastPage=undefined,$(this.heightContainer).remove(),this.heightContainer=undefined,this.element.empty()},_height:function(){var hasData=!!this.dataSource.view().length,height=this.options.height,itemHeight=this.options.itemHeight,total=this.dataSource.total();return hasData?height/itemHeight>total&&(height=total*itemHeight):height=0,height},_screenHeight:function(){var height=this._height(),content=(this.element,this.content);content.height(height),this.screenHeight=height},_getElementLocation:function(index){var position,scrollTop=this.content.scrollTop(),screenHeight=this.screenHeight,itemHeight=this.options.itemHeight,yPosition=index*itemHeight,yDownPostion=yPosition+itemHeight,screenEnd=scrollTop+screenHeight;return position=yPosition===scrollTop-itemHeight||yDownPostion>scrollTop&&scrollTop>yPosition?"top":yPosition===screenEnd||screenEnd>yPosition&&yDownPostion>screenEnd?"bottom":yPosition>=scrollTop&&scrollTop+(screenHeight-itemHeight)>=yPosition?"inScreen":"outScreen"},_templates:function(){var templates={template:this.options.template,placeholderTemplate:this.options.placeholderTemplate,groupTemplate:this.options.groupTemplate,fixedGroupTemplate:this.options.fixedGroupTemplate};for(var key in templates)"function"!=typeof templates[key]&&(templates[key]=kendo.template(templates[key]));this.templates=templates},_generateItems:function(element,count){for(var item,items=[],itemHeight=this.options.itemHeight+"px";count-- >0;)item=document.createElement("li"),item.tabIndex=-1,item.className=VIRTUALITEM+" "+ITEM,item.setAttribute("role","option"),item.style.height=itemHeight,item.style.minHeight=itemHeight,element.appendChild(item),items.push(item);return items},_saveInitialRanges:function(){var ranges=this.dataSource._ranges,deferred=$.Deferred();deferred.resolve(),this._rangesList={};for(var i=0;i<ranges.length;i++)this._rangesList[ranges[i].start]={end:ranges[i].end,deferred:deferred}},_createList:function(){var that=this,content=that.content.get(0),options=that.options,dataSource=that.dataSource;dataSource.total();that._listCreated&&that._clean(),that._saveInitialRanges(),that._screenHeight(),that._buildValueGetter(),that.itemCount=getItemCount(that.screenHeight,options.listScreens,options.itemHeight),that.itemCount>dataSource.total()&&(that.itemCount=dataSource.total()),that._templates(),that._items=that._generateItems(that.element[0],that.itemCount),that._setHeight(options.itemHeight*dataSource.total()),that.options.type=(dataSource.group()||[]).length?"group":"flat","flat"===that.options.type?that.header.hide():that.header.show(),that.getter=that._getter(function(){that._renderItems(!0)}),that._onScroll=function(scrollTop,force){var getList=that._listItems(that.getter);return that._fixedHeader(scrollTop,getList(scrollTop,force))},that._renderItems=that._whenChanged(scrollCallback(content,that._onScroll),syncList(that._reorderList(that._items,$.proxy(render,that)))),that._renderItems(),that._calculateGroupPadding(that.screenHeight)},_setHeight:function(height){var currentHeight,heightContainer=this.heightContainer;if(heightContainer?currentHeight=heightContainer.offsetHeight:heightContainer=this.heightContainer=appendChild(this.content[0],HEIGHTCONTAINER),height!==currentHeight)for(heightContainer.innerHTML="";height>0;){var padHeight=Math.min(height,25e4);appendChild(heightContainer).style.height=padHeight+"px",height-=padHeight}},_getter:function(){var lastRequestedRange=null,dataSource=this.dataSource,lastRangeStart=dataSource.skip(),type=this.options.type,pageSize=this.itemCount,flatGroups={};return function(index,rangeStart){var that=this;if(dataSource.inRange(rangeStart,pageSize)){lastRangeStart!==rangeStart&&(that._mute=!0,that._fetching=!0,that._rangeChange=!0,dataSource.range(rangeStart,pageSize),lastRangeStart=rangeStart,that._rangeChange=!1,that._fetching=!1,that._mute=!1);var result;if("group"===type){if(!flatGroups[rangeStart])for(var flatGroup=flatGroups[rangeStart]=[],groups=dataSource.view(),i=0,len=groups.length;len>i;i++)for(var group=groups[i],j=0,groupLength=group.items.length;groupLength>j;j++)flatGroup.push({item:group.items[j],group:group.value});result=flatGroups[rangeStart][index-rangeStart]}else result=dataSource.view()[index-rangeStart];return result}return lastRequestedRange!==rangeStart&&(lastRequestedRange=rangeStart,lastRangeStart=rangeStart,that._fetching=!0,that._getterDeferred&&that._getterDeferred.reject(),that._getterDeferred=that.deferredRange(rangeStart),that._getterDeferred.then(function(){var firstItemIndex=that._indexConstraint(that.content[0].scrollTop);that._getterDeferred=null,firstItemIndex>=rangeStart&&rangeStart+pageSize>=firstItemIndex&&(that._fetching=!0,that._rangeChange=!0,dataSource.range(rangeStart,pageSize),that._rangeChange=!1)})),null}},_fixedHeader:function(scrollTop,list){var group=this.currentVisibleGroup,itemHeight=this.options.itemHeight,firstVisibleDataItemIndex=Math.floor((scrollTop-list.top)/itemHeight),firstVisibleDataItem=list.items[firstVisibleDataItemIndex];if(firstVisibleDataItem&&firstVisibleDataItem.item){var firstVisibleGroup=firstVisibleDataItem.group;firstVisibleGroup!==group&&(this.header[0].innerHTML=firstVisibleGroup||"",this.currentVisibleGroup=firstVisibleGroup)}return list},_itemMapper:function(item,index,value){var listType=this.options.type,itemHeight=this.options.itemHeight,currentIndex=this._focusedIndex,selected=!1,current=!1,newGroup=!1,group=null,match=!1,valueGetter=this._valueGetter;if("group"===listType&&(item&&(newGroup=0===index||this._currentGroup&&this._currentGroup!==item.group,this._currentGroup=item.group),group=item?item.group:null,item=item?item.item:null),value.length&&item)for(var i=0;i<value.length;i++)if(match=isPrimitive(item)?value[i]===item:value[i]===valueGetter(item)){value.splice(i,1),selected=!0;break}return currentIndex===index&&(current=!0),{item:item?item:null,group:group,newGroup:newGroup,selected:selected,current:current,index:index,top:index*itemHeight}},_range:function(index){var item,itemCount=this.itemCount,value=this._values.slice(),items=[];this._view={},this._currentGroup=null;for(var i=index,length=index+itemCount;length>i;i++)item=this._itemMapper(this.getter(i,index),i,value),items.push(item),this._view[item.index]=item;return this._dataView=items,items},_getDataItemsCollection:function(scrollTop,lastScrollTop){var items=this._range(this._listIndex(scrollTop,lastScrollTop));return{index:items.length?items[0].index:0,top:items.length?items[0].top:0,items:items}},_listItems:function(getter){var screenHeight=this.screenHeight,options=(this.itemCount,this.options),theValidator=listValidator(options,screenHeight);return $.proxy(function(value,force){var result=this.result,lastScrollTop=this._lastScrollTop;return!force&&result&&theValidator(result,value,lastScrollTop)||(result=this._getDataItemsCollection(value,lastScrollTop)),this._lastScrollTop=value,this.result=result,result},this)},_whenChanged:function(getter,callback){var current;return function(force){var theNew=getter(force);theNew!==current&&(current=theNew,callback(theNew,force))}},_reorderList:function(list,reorder){var that=this,length=list.length,currentOffset=-(1/0);return reorder=$.proxy(map2(reorder,this.templates),this),function(list2,offset,force){var range,range2,diff=offset-currentOffset;force||Math.abs(diff)>=length?(range=list,range2=list2):(range=reshift(list,diff),range2=diff>0?list2.slice(-diff):list2.slice(0,-diff)),reorder(range,range2,that._listCreated),currentOffset=offset}},_bufferSizes:function(){var options=this.options;return bufferSizes(this.screenHeight,options.listScreens,options.oppositeBuffer)},_indexConstraint:function(position){var itemCount=this.itemCount,itemHeight=this.options.itemHeight,total=this.dataSource.total();return Math.min(Math.max(total-itemCount,0),Math.max(0,Math.floor(position/itemHeight)))},_listIndex:function(scrollTop,lastScrollTop){var position,buffers=this._bufferSizes();return position=scrollTop-(scrollTop>lastScrollTop?buffers.down:buffers.up),this._indexConstraint(position)},_selectable:function(){this.options.selectable&&(this._selectProxy=$.proxy(this,"_clickHandler"),this.element.on(CLICK+VIRTUAL_LIST_NS,"."+VIRTUALITEM,this._selectProxy))},_getIndecies:function(candidate){var data,result=[];if("function"==typeof candidate){data=this.dataSource.flatView();for(var idx=0;idx<data.length;idx++)if(candidate(data[idx])){result.push(idx);break}}return"number"==typeof candidate&&result.push(candidate),candidate instanceof jQuery&&(candidate=parseInt(candidate.attr("data-offset-index"),10),isNaN(candidate)||result.push(candidate)),candidate instanceof Array&&(result=candidate),result},_deselect:function(indexes){var index,selectedIndex,dataItem,item,removed=[],selectedIndexes=this._selectedIndexes,position=0,selectable=this.options.selectable,removedindexesCounter=0;if(-1===indexes[position]){for(var idx=0;idx<selectedIndexes.length;idx++)selectedIndex=selectedIndexes[idx],this._getElementByIndex(selectedIndex).removeClass(SELECTED),removed.push({index:selectedIndex,position:idx,dataItem:this._selectedDataItems[idx]});return this._values=[],this._selectedDataItems=[],this._selectedIndexes=[],indexes.splice(0,indexes.length),removed}if(selectable===!0)index=indexes[position],selectedIndex=selectedIndexes[position],selectedIndex!==undefined&&index!==selectedIndex&&(this._getElementByIndex(selectedIndex).removeClass(SELECTED),removed.push({index:selectedIndex,position:position,dataItem:this._selectedDataItems[position]}),this._values=[],this._selectedDataItems=[],this._selectedIndexes=[]);else if("multiple"===selectable)for(var i=0;i<indexes.length;i++)if(position=$.inArray(indexes[i],selectedIndexes),selectedIndex=selectedIndexes[position],selectedIndex!==undefined){if(item=this._getElementByIndex(selectedIndex),!item.hasClass("k-state-selected"))continue;item.removeClass(SELECTED),this._values.splice(position,1),this._selectedIndexes.splice(position,1),dataItem=this._selectedDataItems.splice(position,1),indexes.splice(i,1),removed.push({index:selectedIndex,position:position+removedindexesCounter,dataItem:dataItem}),removedindexesCounter++,i--}return removed},_deselectFiltered:function(indices){for(var value,index,position,j,children=this.element[0].children,values=this._values,removed=[],idx=0;idx<indices.length;idx++){for(position=-1,index=indices[idx],value=this._valueGetter(this._view[index].item),j=0;j<values.length;j++)if(value==values[j]){position=j;break}position>-1&&(removed.push(this.removeAt(position)),$(children[index]).removeClass("k-state-selected"))}return removed.length?(this.trigger("change",{added:[],removed:removed}),!0):!1},_select:function(indexes){var dataItem,oldSkip,that=this,singleSelection="multiple"!==this.options.selectable,dataSource=this.dataSource,take=this.itemCount,valueGetter=this._valueGetter,added=[];return singleSelection&&(that._selectedIndexes=[],that._selectedDataItems=[],that._values=[]),oldSkip=dataSource.skip(),$.each(indexes,function(_,index){var page=take>index?1:Math.floor(index/take)+1,skip=(page-1)*take;that.mute(function(){dataSource.range(skip,take),dataItem=that._findDataItem([index-skip]),that._selectedIndexes.push(index),that._selectedDataItems.push(dataItem),that._values.push(isPrimitive(dataItem)?dataItem:valueGetter(dataItem)),added.push({index:index,dataItem:dataItem}),that._getElementByIndex(index).addClass(SELECTED),dataSource.range(oldSkip,take)})}),added},_clickHandler:function(e){var item=$(e.currentTarget);!e.isDefaultPrevented()&&item.attr("data-uid")&&this.trigger(CLICK,{item:item})},_buildValueGetter:function(){this._valueGetter=kendo.getter(this.options.dataValueField)},_calculateGroupPadding:function(height){var firstItem=this.items().first(),groupHeader=this.header,padding=0;groupHeader[0]&&"none"!==groupHeader[0].style.display&&("auto"!==height&&(padding=kendo.support.scrollbar()),padding+=parseFloat(firstItem.css("border-right-width"),10)+parseFloat(firstItem.children(".k-group").css("right"),10),groupHeader.css("padding-right",padding))}});kendo.ui.VirtualList=VirtualList,kendo.ui.plugin(VirtualList)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(_,f){f()}),function(f,define){define(["./kendo.core"],f)}(function(){return function($,angular,undefined){"use strict";function withoutTimeout(f){var save=$timeout;try{return $timeout=function(f){return f()},f()}finally{$timeout=save}}function addOption(scope,options,name,value){options[name]=angular.copy(scope.$eval(value)),options[name]===undefined&&value.match(/^\w*$/)&&$log.warn(name+" attribute resolved to undefined. Maybe you meant to use a string literal like: '"+value+"'?")}function createWidget(scope,element,attrs,widget,origAttr,controllers){function createIt(){var originalElement;attrs.kRebind&&(originalElement=$($(element)[0].cloneNode(!0)));var role=widget.replace(/^kendo/,""),options=angular.extend({},attrs.defaultOptions,scope.$eval(attrs.kOptions||attrs.options)),ctor=$(element)[widget];if(!ctor)return window.console.error("Could not find: "+widget),null;var widgetOptions=ctor.widget.prototype.options,widgetEvents=ctor.widget.prototype.events;$.each(attrs,function(name,value){if("source"!==name&&"kDataSource"!==name&&"kScopeField"!==name){var dataName="data"+name.charAt(0).toUpperCase()+name.slice(1);if(0===name.indexOf("on")){var eventKey=name.replace(/^on./,function(prefix){return prefix.charAt(2).toLowerCase()});widgetEvents.indexOf(eventKey)>-1&&(options[eventKey]=value)}if(widgetOptions.hasOwnProperty(dataName))addOption(scope,options,dataName,value);else if(widgetOptions.hasOwnProperty(name)&&!ignoredOwnProperties[name])addOption(scope,options,name,value);else if(!ignoredAttributes[name]){var match=name.match(/^k(On)?([A-Z].*)/);if(match){var optionName=match[2].charAt(0).toLowerCase()+match[2].slice(1);match[1]&&"kOnLabel"!=name?options[optionName]=value:("kOnLabel"==name&&(optionName="onLabel"),addOption(scope,options,optionName,value))}}}});var dataSource=attrs.kDataSource||attrs.source;dataSource&&(options.dataSource=createDataSource(scope,element,role,dataSource)),options.$angular=[scope],element.is("select")&&!function(options){if(options.length>0){var first=$(options[0]);!/\S/.test(first.text())&&/^\?/.test(first.val())&&first.remove()}}(element[0].options);var object=ctor.call(element,OPTIONS_NOW=options).data(widget);exposeWidget(object,scope,attrs,widget,origAttr),scope.$emit("kendoWidgetCreated",object);var destroyRegister=destroyWidgetOnScopeDestroy(scope,object);if(attrs.kRebind&&setupRebind(object,scope,element,originalElement,attrs.kRebind,destroyRegister,attrs),attrs.kNgDisabled){var kNgDisabled=attrs.kNgDisabled,isDisabled=scope.$eval(kNgDisabled);isDisabled&&object.enable(!isDisabled),bindToKNgDisabled(object,scope,element,kNgDisabled)}if(attrs.kNgReadonly){var kNgReadonly=attrs.kNgReadonly,isReadonly=scope.$eval(kNgReadonly);isReadonly&&object.readonly(isReadonly),bindToKNgReadonly(object,scope,element,kNgReadonly)}return attrs.kNgModel&&bindToKNgModel(object,scope,attrs.kNgModel),ngModel&&bindToNgModel(object,scope,element,ngModel,ngForm),object&&propagateClassToWidgetWrapper(object,element),object}if(!(element instanceof jQuery))throw new Error("The Kendo UI directives require jQuery to be available before AngularJS. Please include jquery before angular in the document.");var kNgDelay=attrs.kNgDelay,delayValue=scope.$eval(kNgDelay);controllers=controllers||[];var ngModel=controllers[0],ngForm=controllers[1];if(kNgDelay&&!delayValue){var root=scope.$root||scope,register=function(){var unregister=scope.$watch(kNgDelay,function(newValue,oldValue){newValue!==oldValue&&(unregister(),element.removeAttr(attrs.$attr.kNgDelay),kNgDelay=null,$timeout(createIt))})};return void(/^\$(digest|apply)$/.test(root.$$phase)?register():scope.$apply(register))}return createIt()}function bindToKNgDisabled(widget,scope,element,kNgDisabled){return kendo.ui.PanelBar&&widget instanceof kendo.ui.PanelBar||kendo.ui.Menu&&widget instanceof kendo.ui.Menu?void $log.warn("k-ng-disabled specified on a widget that does not have the enable() method: "+widget.options.name):void scope.$apply(function(){scope.$watch(kNgDisabled,function(newValue,oldValue){newValue!=oldValue&&widget.enable(!newValue)})})}function bindToKNgReadonly(widget,scope,element,kNgReadonly){return"function"!=typeof widget.readonly?void $log.warn("k-ng-readonly specified on a widget that does not have the readonly() method: "+widget.options.name):void scope.$apply(function(){scope.$watch(kNgReadonly,function(newValue,oldValue){newValue!=oldValue&&widget.readonly(newValue)})})}function exposeWidget(widget,scope,attrs,kendoWidget,origAttr){if(attrs[origAttr]){var set=$parse(attrs[origAttr]).assign;if(!set)throw new Error(origAttr+" attribute used but expression in it is not assignable: "+attrs[kendoWidget]);set(scope,widget)}}function formValue(element){return/checkbox|radio/i.test(element.attr("type"))?element.prop("checked"):element.val();
}function isForm(element){return formRegExp.test(element[0].tagName)}function bindToNgModel(widget,scope,element,ngModel,ngForm){if(widget.value){var value;value=isForm(element)?function(){return formValue(element)}:function(){return widget.value()},ngModel.$render=function(){var val=ngModel.$viewValue;val===undefined&&(val=ngModel.$modelValue),val===undefined&&(val=null),setTimeout(function(){widget&&widget.value(val)},0)};var haveChangeOnElement=!1;isForm(element)&&element.on("change",function(){haveChangeOnElement=!0});var onChange=function(pristine){return function(){var formPristine;haveChangeOnElement||(haveChangeOnElement=!1,pristine&&ngForm&&(formPristine=ngForm.$pristine),ngModel.$setViewValue(value()),pristine&&(ngModel.$setPristine(),formPristine&&ngForm.$setPristine()),digest(scope))}};widget.first("change",onChange(!1)),kendo.ui.AutoComplete&&widget instanceof kendo.ui.AutoComplete||widget.first("dataBound",onChange(!0));var currentVal=value();currentVal!=ngModel.$viewValue&&(ngModel.$isEmpty(ngModel.$viewValue)?null!=currentVal&&""!==currentVal&&currentVal!=ngModel.$viewValue&&ngModel.$setViewValue(currentVal):widget.value(ngModel.$viewValue)),ngModel.$setPristine()}}function bindToKNgModel(widget,scope,kNgModel){if("function"!=typeof widget.value)return void $log.warn("k-ng-model specified on a widget that does not have the value() method: "+widget.options.name);var form=$(widget.element).parents("form"),ngForm=scope[form.attr("name")],getter=$parse(kNgModel),setter=getter.assign,updating=!1;widget.$angular_setLogicValue(getter(scope)),scope.$apply(function(){var watchHandler=function(newValue,oldValue){newValue===undefined&&(newValue=null),updating||newValue!==oldValue&&widget.$angular_setLogicValue(newValue)};kendo.ui.MultiSelect&&widget instanceof kendo.ui.MultiSelect?scope.$watchCollection(kNgModel,watchHandler):scope.$watch(kNgModel,watchHandler)}),widget.first("change",function(){updating=!0,ngForm&&ngForm.$pristine&&ngForm.$setDirty(),scope.$apply(function(){setter(scope,widget.$angular_getLogicValue())}),updating=!1})}function destroyWidgetOnScopeDestroy(scope,widget){var deregister=scope.$on("$destroy",function(){deregister(),widget&&(widget.element&&(widget=kendoWidgetInstance(widget.element),widget&&widget.destroy()),widget=null)});return deregister}function propagateClassToWidgetWrapper(widget,element){function suspend(){mo.disconnect()}function resume(){mo.observe($(element)[0],{attributes:!0})}if(window.MutationObserver&&widget.wrapper){var prevClassList=[].slice.call($(element)[0].classList),mo=new MutationObserver(function(changes){suspend(),widget&&(changes.forEach(function(chg){var w=$(widget.wrapper)[0];switch(chg.attributeName){case"class":var currClassList=[].slice.call(chg.target.classList);currClassList.forEach(function(cls){prevClassList.indexOf(cls)<0&&(w.classList.add(cls),kendo.ui.ComboBox&&widget instanceof kendo.ui.ComboBox&&widget.input[0].classList.add(cls))}),prevClassList.forEach(function(cls){currClassList.indexOf(cls)<0&&(w.classList.remove(cls),kendo.ui.ComboBox&&widget instanceof kendo.ui.ComboBox&&widget.input[0].classList.remove(cls))}),prevClassList=currClassList;break;case"disabled":"function"==typeof widget.enable&&widget.enable(!$(chg.target).attr("disabled"));break;case"readonly":"function"==typeof widget.readonly&&widget.readonly(!!$(chg.target).attr("readonly"))}}),resume())});resume(),widget.first("destroy",suspend)}}function setupRebind(widget,scope,element,originalElement,rebindAttr,destroyRegister,attrs){var unregister=scope.$watch(rebindAttr,function(newValue,oldValue){if(newValue!==oldValue){unregister();var templateOptions=WIDGET_TEMPLATE_OPTIONS[widget.options.name];templateOptions&&templateOptions.forEach(function(name){var templateContents=scope.$eval(attrs["k"+name]);templateContents&&originalElement.append($(templateContents).attr(kendo.toHyphens("k"+name),""))});var _wrapper=$(widget.wrapper)[0],_element=$(widget.element)[0],compile=element.injector().get("$compile");widget.destroy(),destroyRegister&&destroyRegister(),widget=null,_wrapper&&_element&&(_wrapper.parentNode.replaceChild(_element,_wrapper),$(element).replaceWith(originalElement)),compile(originalElement)(scope)}},!0);digest(scope)}function createDirectives(klass,isMobile){function make(directiveName,widgetName){module.directive(directiveName,["directiveFactory",function(directiveFactory){return directiveFactory.create(widgetName,directiveName)}])}var name=isMobile?"Mobile":"";name+=klass.fn.options.name;var className=name,shortcut="kendo"+name.charAt(0)+name.substr(1).toLowerCase();name="kendo"+name;var dashed=name.replace(/([A-Z])/g,"-$1");if(-1==SKIP_SHORTCUTS.indexOf(name.replace("kendo",""))){var names=name===shortcut?[name]:[name,shortcut];angular.forEach(names,function(directiveName){module.directive(directiveName,function(){return{restrict:"E",replace:!0,template:function(element,attributes){var tag=TAGNAMES[className]||"div",scopeField=attributes.kScopeField;return"<"+tag+" "+dashed+(scopeField?'="'+scopeField+'"':"")+">"+element.html()+"</"+tag+">"}}})})}MANUAL_DIRECTIVES.indexOf(name.replace("kendo",""))>-1||(make(name,name),shortcut!=name&&make(shortcut,name))}function kendoWidgetInstance(el){return el=$(el),kendo.widgetInstance(el,kendo.ui)||kendo.widgetInstance(el,kendo.mobile.ui)||kendo.widgetInstance(el,kendo.dataviz.ui)}function digest(scope,func){var root=scope.$root||scope,isDigesting=/^\$(digest|apply)$/.test(root.$$phase);func?isDigesting?func():root.$apply(func):isDigesting||root.$digest()}function destroyScope(scope,el){scope.$destroy(),el&&$(el).removeData("$scope").removeData("$$kendoScope").removeData("$isolateScope").removeData("$isolateScopeNoTemplate").removeClass("ng-scope")}function defadvice(klass,methodName,func){if($.isArray(klass))return angular.forEach(klass,function(klass){defadvice(klass,methodName,func)});if("string"==typeof klass){for(var a=klass.split("."),x=kendo;x&&a.length>0;)x=x[a.shift()];if(!x)return pendingPatches.push([klass,methodName,func]),!1;klass=x.prototype}var origMethod=klass[methodName];return klass[methodName]=function(){var self=this,args=arguments;return func.apply({self:self,next:function(){return origMethod.apply(self,arguments.length>0?arguments:args)}},args)},!0}if(angular){var $defaultCompile,OPTIONS_NOW,module=angular.module("kendo.directives",[]),$injector=angular.injector(["ng"]),$parse=$injector.get("$parse"),$timeout=$injector.get("$timeout"),$log=$injector.get("$log"),createDataSource=function(){var types={TreeList:"TreeListDataSource",TreeView:"HierarchicalDataSource",Scheduler:"SchedulerDataSource",PanelBar:"$PLAIN",Menu:"$PLAIN",ContextMenu:"$PLAIN"},toDataSource=function(dataSource,type){return"$PLAIN"==type?dataSource:kendo.data[type].create(dataSource)};return function(scope,element,role,source){var type=types[role]||"DataSource",ds=toDataSource(scope.$eval(source),type);return scope.$watch(source,function(mew,old){if(mew!==old){var ds=toDataSource(mew,type),widget=kendoWidgetInstance(element);widget&&"function"==typeof widget.setDataSource&&widget.setDataSource(ds)}}),ds}}(),ignoredAttributes={kDataSource:!0,kOptions:!0,kRebind:!0,kNgModel:!0,kNgDelay:!0},ignoredOwnProperties={name:!0,title:!0,style:!0},formRegExp=/^(input|select|textarea)$/i;module.factory("directiveFactory",["$compile",function(compile){var KENDO_COUNT=0,RENDERED=!1;$defaultCompile=compile;var create=function(role,origAttr){return{restrict:"AC",require:["?ngModel","^?form"],scope:!1,controller:["$scope","$attrs","$element",function($scope,$attrs,$element){var that=this;that.template=function(key,value){$attrs[key]=kendo.stringify(value)},$scope.$on("$destroy",function(){that.template=null,that=null})}],link:function(scope,element,attrs,controllers){var $element=$(element),roleattr=role.replace(/([A-Z])/g,"-$1"),isVisible="hidden"!==$element.css("visibility");$element.attr(roleattr,$element.attr("data-"+roleattr)),$element[0].removeAttribute("data-"+roleattr),isVisible&&$element.css("visibility","hidden"),++KENDO_COUNT,$timeout(function(){isVisible&&$element.css("visibility","");var widget=createWidget(scope,element,attrs,role,origAttr,controllers);widget&&(--KENDO_COUNT,0===KENDO_COUNT&&(scope.$emit("kendoRendered"),RENDERED||(RENDERED=!0,$("form").each(function(){var form=$(this).controller("form");form&&form.$setPristine()}))))})}}};return{create:create}}]);var TAGNAMES={Editor:"textarea",NumericTextBox:"input",DatePicker:"input",DateTimePicker:"input",TimePicker:"input",AutoComplete:"input",ColorPicker:"input",MaskedTextBox:"input",MultiSelect:"input",Upload:"input",Validator:"form",Button:"button",MobileButton:"a",MobileBackButton:"a",MobileDetailButton:"a",ListView:"ul",MobileListView:"ul",TreeView:"ul",Menu:"ul",ContextMenu:"ul",ActionSheet:"ul"},SKIP_SHORTCUTS=["MobileView","MobileLayout","MobileSplitView","MobilePane","MobileModalView"],MANUAL_DIRECTIVES=["MobileApplication","MobileView","MobileModalView","MobileLayout","MobileActionSheet","MobileDrawer","MobileSplitView","MobilePane","MobileScrollView","MobilePopOver"];angular.forEach(["MobileNavBar","MobileButton","MobileBackButton","MobileDetailButton","MobileTabStrip","MobileScrollView","MobileScroller"],function(widget){MANUAL_DIRECTIVES.push(widget),widget="kendo"+widget,module.directive(widget,function(){return{restrict:"A",link:function(scope,element,attrs,controllers){createWidget(scope,element,attrs,widget,widget)}}})}),function(){function doAll(isMobile){return function(namespace){angular.forEach(namespace,function(value){value.fn&&value.fn.options&&value.fn.options.name&&/^[A-Z]/.test(value.fn.options.name)&&createDirectives(value,isMobile)})}}angular.forEach([kendo.ui,kendo.dataviz&&kendo.dataviz.ui],doAll(!1)),angular.forEach([kendo.mobile&&kendo.mobile.ui],doAll(!0))}();var pendingPatches=[];defadvice(kendo.ui,"plugin",function(klass,register,prefix){this.next(),pendingPatches=$.grep(pendingPatches,function(args){return!defadvice.apply(null,args)}),createDirectives(klass,"Mobile"==prefix)}),defadvice(["ui.Widget","mobile.ui.Widget"],"angular",function(cmd,arg){var self=this.self;if("init"==cmd)return!arg&&OPTIONS_NOW&&(arg=OPTIONS_NOW),OPTIONS_NOW=null,void(arg&&arg.$angular&&(self.$angular_scope=arg.$angular[0],self.$angular_init(self.element,arg)));var scope=self.$angular_scope;scope&&withoutTimeout(function(){var x=arg(),elements=x.elements,data=x.data;if(elements.length>0)switch(cmd){case"cleanup":angular.forEach(elements,function(el){var itemScope=$(el).data("$$kendoScope");itemScope&&itemScope!==scope&&itemScope.$$kendoScope&&destroyScope(itemScope,el)});break;case"compile":var injector=self.element.injector(),compile=injector?injector.get("$compile"):$defaultCompile;angular.forEach(elements,function(el,i){var itemScope;if(x.scopeFrom)itemScope=x.scopeFrom;else{var vars=data&&data[i];vars!==undefined?(itemScope=$.extend(scope.$new(),vars),itemScope.$$kendoScope=!0):itemScope=scope}$(el).data("$$kendoScope",itemScope),compile(el)(itemScope)}),digest(scope)}})}),defadvice("ui.Widget","$angular_getLogicValue",function(){return this.self.value()}),defadvice("ui.Widget","$angular_setLogicValue",function(val){this.self.value(val)}),defadvice("ui.Select","$angular_getLogicValue",function(){var item=this.self.dataItem(),valueField=this.self.options.dataValueField;return item?this.self.options.valuePrimitive?valueField?item[valueField]:item:item.toJSON():null}),defadvice("ui.Select","$angular_setLogicValue",function(val){var self=this.self,options=self.options,valueField=options.dataValueField,text=options.text||"";val===undefined&&(val=""),valueField&&!options.valuePrimitive&&val&&(text=val[options.dataTextField]||"",val=val[valueField||options.dataTextField]),self.options.autoBind!==!1||self.listView.isBound()?self.value(val):!text&&val&&options.valuePrimitive?self.value(val):self._preselect(val,text)}),defadvice("ui.MultiSelect","$angular_getLogicValue",function(){var value=this.self.dataItems().slice(0),valueField=this.self.options.dataValueField;return valueField&&this.self.options.valuePrimitive&&(value=$.map(value,function(item){return item[valueField]})),value}),defadvice("ui.MultiSelect","$angular_setLogicValue",function(val){null==val&&(val=[]);var self=this.self,options=self.options,valueField=options.dataValueField,data=val;valueField&&!options.valuePrimitive&&(val=$.map(val,function(item){return item[valueField]})),options.autoBind!==!1||options.valuePrimitive||self.listView.isBound()?self.value(val):self._preselect(data,val)}),defadvice("ui.AutoComplete","$angular_getLogicValue",function(){for(var options=this.self.options,values=this.self.value().split(options.separator),valuePrimitive=options.valuePrimitive,data=this.self.dataSource.data(),dataItems=[],idx=0,length=data.length;length>idx;idx++)for(var item=data[idx],dataValue=options.dataTextField?item[options.dataTextField]:item,j=0;j<values.length;j++)if(dataValue===values[j]){valuePrimitive?dataItems.push(dataValue):dataItems.push(item.toJSON());break}return dataItems}),defadvice("ui.AutoComplete","$angular_setLogicValue",function(value){null==value&&(value=[]);var self=this.self,dataTextField=self.options.dataTextField;dataTextField&&!self.options.valuePrimitive&&(value=$.map(value,function(item){return item[dataTextField]})),self.value(value)}),defadvice("ui.Widget","$angular_init",function(element,options){var self=this.self;if(options&&!$.isArray(options))for(var scope=self.$angular_scope,i=self.events.length;--i>=0;){var event=self.events[i],handler=options[event];handler&&"string"==typeof handler&&(options[event]=self.$angular_makeEventHandler(event,scope,handler))}}),defadvice("ui.Widget","$angular_makeEventHandler",function(event,scope,handler){return handler=$parse(handler),function(e){digest(scope,function(){handler(scope,{kendoEvent:e})})}}),defadvice(["ui.Grid","ui.ListView","ui.TreeView"],"$angular_makeEventHandler",function(event,scope,handler){return"change"!=event?this.next():(handler=$parse(handler),function(ev){var cell,multiple,elems,items,columns,colIdx,widget=ev.sender,options=widget.options,locals={kendoEvent:ev};angular.isString(options.selectable)&&(cell=-1!==options.selectable.indexOf("cell"),multiple=-1!==options.selectable.indexOf("multiple")),elems=locals.selected=this.select(),items=locals.data=[],columns=locals.columns=[];for(var i=0;i<elems.length;i++){var item=cell?elems[i].parentNode:elems[i],dataItem=widget.dataItem(item);cell?(angular.element.inArray(dataItem,items)<0&&items.push(dataItem),colIdx=angular.element(elems[i]).index(),angular.element.inArray(colIdx,columns)<0&&columns.push(colIdx)):items.push(dataItem)}multiple||(locals.dataItem=locals.data=items[0],locals.selected=elems[0]),digest(scope,function(){handler(scope,locals)})})}),defadvice("ui.Grid","$angular_init",function(element,options){if(this.next(),options.columns){var settings=$.extend({},kendo.Template,options.templateSettings);angular.forEach(options.columns,function(col){!col.field||col.template||col.format||col.values||col.encoded!==undefined&&!col.encoded||(col.template="<span ng-bind='"+kendo.expr(col.field,"dataItem")+"'>#: "+kendo.expr(col.field,settings.paramName)+"#</span>")})}}),defadvice("mobile.ui.ButtonGroup","value",function(mew){var self=this.self;return null!=mew&&(self.select(self.element.children("li.km-button").eq(mew)),self.trigger("change"),self.trigger("select",{index:self.selectedIndex})),self.selectedIndex}),defadvice("mobile.ui.ButtonGroup","_select",function(){this.next(),this.self.trigger("change")}),module.directive("kendoMobileApplication",function(){return{terminal:!0,link:function(scope,element,attrs,controllers){createWidget(scope,element,attrs,"kendoMobileApplication","kendoMobileApplication")}}}).directive("kendoMobileView",function(){return{scope:!0,link:{pre:function(scope,element,attrs,controllers){attrs.defaultOptions=scope.viewOptions,attrs._instance=createWidget(scope,element,attrs,"kendoMobileView","kendoMobileView")},post:function(scope,element,attrs){attrs._instance._layout(),attrs._instance._scroller()}}}}).directive("kendoMobileDrawer",function(){return{scope:!0,link:{pre:function(scope,element,attrs,controllers){attrs.defaultOptions=scope.viewOptions,attrs._instance=createWidget(scope,element,attrs,"kendoMobileDrawer","kendoMobileDrawer")},post:function(scope,element,attrs){attrs._instance._layout(),attrs._instance._scroller()}}}}).directive("kendoMobileModalView",function(){return{scope:!0,link:{pre:function(scope,element,attrs,controllers){attrs.defaultOptions=scope.viewOptions,attrs._instance=createWidget(scope,element,attrs,"kendoMobileModalView","kendoMobileModalView")},post:function(scope,element,attrs){attrs._instance._layout(),attrs._instance._scroller()}}}}).directive("kendoMobileSplitView",function(){return{terminal:!0,link:{pre:function(scope,element,attrs,controllers){attrs.defaultOptions=scope.viewOptions,attrs._instance=createWidget(scope,element,attrs,"kendoMobileSplitView","kendoMobileSplitView")},post:function(scope,element,attrs){attrs._instance._layout()}}}}).directive("kendoMobilePane",function(){return{terminal:!0,link:{pre:function(scope,element,attrs,controllers){attrs.defaultOptions=scope.viewOptions,createWidget(scope,element,attrs,"kendoMobilePane","kendoMobilePane")}}}}).directive("kendoMobileLayout",function(){return{link:{pre:function(scope,element,attrs,controllers){createWidget(scope,element,attrs,"kendoMobileLayout","kendoMobileLayout")}}}}).directive("kendoMobileActionSheet",function(){return{restrict:"A",link:function(scope,element,attrs,controllers){element.find("a[k-action]").each(function(){$(this).attr("data-"+kendo.ns+"action",$(this).attr("k-action"))}),createWidget(scope,element,attrs,"kendoMobileActionSheet","kendoMobileActionSheet")}}}).directive("kendoMobilePopOver",function(){return{terminal:!0,link:{pre:function(scope,element,attrs,controllers){attrs.defaultOptions=scope.viewOptions,createWidget(scope,element,attrs,"kendoMobilePopOver","kendoMobilePopOver")}}}}).directive("kendoViewTitle",function(){return{restrict:"E",replace:!0,template:function(element,attributes){return"<span data-"+kendo.ns+"role='view-title'>"+element.html()+"</span>"}}}).directive("kendoMobileHeader",function(){return{restrict:"E",link:function(scope,element,attrs,controllers){element.addClass("km-header").attr("data-role","header")}}}).directive("kendoMobileFooter",function(){return{restrict:"E",link:function(scope,element,attrs,controllers){element.addClass("km-footer").attr("data-role","footer")}}}).directive("kendoMobileScrollViewPage",function(){return{restrict:"E",replace:!0,template:function(element,attributes){return"<div data-"+kendo.ns+"role='page'>"+element.html()+"</div>"}}}),angular.forEach(["align","icon","rel","transition","actionsheetContext"],function(attr){var kAttr="k"+attr.slice(0,1).toUpperCase()+attr.slice(1);module.directive(kAttr,function(){return{restrict:"A",priority:2,link:function(scope,element,attrs){element.attr(kendo.attr(kendo.toHyphens(attr)),scope.$eval(attrs[kAttr]))}}})});var WIDGET_TEMPLATE_OPTIONS={TreeMap:["Template"],MobileListView:["HeaderTemplate","Template"],MobileScrollView:["EmptyTemplate","Template"],Grid:["AltRowTemplate","DetailTemplate","RowTemplate"],ListView:["EditTemplate","Template","AltTemplate"],Pager:["SelectTemplate","LinkTemplate"],PivotGrid:["ColumnHeaderTemplate","DataCellTemplate","RowHeaderTemplate"],Scheduler:["AllDayEventTemplate","DateHeaderTemplate","EventTemplate","MajorTimeHeaderTemplate","MinorTimeHeaderTemplate"],TreeView:["Template"],Validator:["ErrorTemplate"]};!function(){var templateDirectives={};angular.forEach(WIDGET_TEMPLATE_OPTIONS,function(templates,widget){angular.forEach(templates,function(template){templateDirectives[template]||(templateDirectives[template]=[]),templateDirectives[template].push("?^^kendo"+widget)})}),angular.forEach(templateDirectives,function(parents,directive){var templateName="k"+directive,attrName=kendo.toHyphens(templateName);module.directive(templateName,function(){return{restrict:"A",require:parents,terminal:!0,compile:function($element,$attrs){if(""===$attrs[templateName]){$element.removeAttr(attrName);var template=$element[0].outerHTML;return function(scope,element,attrs,controllers){for(var controller;!controller&&controllers.length;)controller=controllers.shift();controller?(controller.template(templateName,template),$element.remove()):$log.warn(attrName+" without a matching parent widget found. It can be one of the following: "+parents.join(", "))}}}}})})}()}}(window.kendo.jQuery,window.angular),window.kendo},"function"==typeof define&&define.amd?define:function(_,f){f()});